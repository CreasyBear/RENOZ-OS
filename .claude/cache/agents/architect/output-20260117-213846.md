# Architect Output: FormatAmount Component Family
Generated: 2026-01-17

## Summary

Designed a unified currency/number display component system for renoz-v3:

1. **FormatAmount** - Currency display with color coding
2. **FormatPercent** - Percentage display
3. **FormatDelta** - Change indicators with arrows

## Key Findings

### Current State
- `src/lib/formatters.ts` has utility functions (formatCurrency, formatCurrencyCompact, formatPercentage)
- Scattered local `formatPrice()` functions in route files
- `currencyColumn` in data-table has inline formatting without color coding
- No React components for currency display (only CurrencyField for input)

### Recommended Location
```
src/components/shared/format/
├── format-amount.tsx
├── format-percent.tsx
├── format-delta.tsx
├── format-utils.ts
└── index.ts
```

## Component APIs

### FormatAmount
```tsx
<FormatAmount
  amount={12500}        // Required: value (in cents by default)
  currency="AUD"        // Optional: AUD|USD|EUR|GBP
  cents={true}          // Optional: convert from cents
  showSign={false}      // Optional: show +/-
  colorCode={true}      // Optional: green/red/muted
  size="base"           // Optional: sm|base|lg|xl|2xl
  compact={false}       // Optional: $12.5K notation
/>
```

### FormatPercent
```tsx
<FormatPercent
  value={45.5}          // Required
  decimals={0}          // Optional
  showSign={false}      // Optional
  colorCode={false}     // Optional
/>
```

### FormatDelta
```tsx
<FormatDelta
  value={12.5}          // Required
  type="percent"        // Optional: percent|amount
  indicator="arrow"     // Optional: arrow|triangle|none
  invertColors={false}  // Optional: for costs where decrease=good
/>
```

## CSS Variables (Add to styles.css)
```css
:root {
  --success: 142 76% 36%;
  --amount-positive: var(--success);
  --amount-negative: var(--destructive);
  --amount-zero: var(--muted-foreground);
}
```

## Files Needing Migration
1. `src/routes/_authenticated/products/$productId.tsx` (local formatPrice)
2. `src/routes/_authenticated/pipeline/$opportunityId.tsx`
3. `src/routes/_authenticated/reports/pipeline-forecast.tsx`
4. `src/components/shared/data-table/column-presets.tsx`

## Full Plan
See: `/thoughts/shared/plans/format-amount-component-plan.md`
