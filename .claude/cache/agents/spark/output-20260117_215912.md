# Quick Fix: Integrate FormatAmount into Orders Domain
Generated: 2026-01-17 21:59:12

## Change Made
Replaced all `formatCurrency()` function calls with `<FormatAmount />` component in orders domain and pipeline forecast report.

## Files Modified

### 1. `/Users/joelchan/Documents/Coding/App-Dev/live/renoz-crm-tanstack/continuous-claude/renoz-v3/src/components/domain/orders/order-list.tsx`
- Line 50: Updated import from `formatCurrency` to `FormatAmount`
- Line 313: Replaced `{formatCurrency(Number(order.total))}` with `<FormatAmount amount={Number(order.total)} />`
- Line 380: Replaced `{formatCurrency(Number(order.total))}` with `<FormatAmount amount={Number(order.total)} />`
- **Total replacements: 3 (1 import + 2 usages)**

### 2. `/Users/joelchan/Documents/Coding/App-Dev/live/renoz-crm-tanstack/continuous-claude/renoz-v3/src/components/domain/orders/order-detail.tsx`
- Line 65: Updated import from `formatCurrency` to `FormatAmount`
- Line 391: Subtotal - `<FormatAmount amount={Number(order.subtotal)} />`
- Line 397: Discount (with negative sign) - `-<FormatAmount amount={Number(order.discountAmount)} />`
- Line 403: Tax - `<FormatAmount amount={Number(order.taxAmount)} />`
- Line 408: Shipping - `<FormatAmount amount={Number(order.shippingAmount)} />`
- Line 414: Total - `<FormatAmount amount={Number(order.total)} />`
- Line 418: Paid - `<FormatAmount amount={Number(order.paidAmount)} />`
- Line 422: Balance Due - `<FormatAmount amount={Number(order.balanceDue)} />`
- Line 541: Line item unit price - `<FormatAmount amount={Number(item.unitPrice)} />`
- Line 544: Line item tax - `<FormatAmount amount={Number(item.taxAmount)} />`
- Line 547: Line item total - `<FormatAmount amount={Number(item.lineTotal)} />`
- **Total replacements: 11 (1 import + 10 usages)**

### 3. `/Users/joelchan/Documents/Coding/App-Dev/live/renoz-crm-tanstack/continuous-claude/renoz-v3/src/routes/_authenticated/reports/pipeline-forecast.tsx`
- Line 48: Updated import from `formatCurrency` to `FormatAmount`
- Line 278: Total Pipeline metric - `<FormatAmount amount={forecast?.summary.totalValue ?? 0} /> as any`
- Line 285: Weighted Forecast metric - `<FormatAmount amount={forecast?.summary.weightedValue ?? 0} /> as any`
- Line 292: Avg Deal Size metric - `<FormatAmount amount={velocity?.avgDealSize ?? 0} /> as any`
- Line 368: Velocity avg deal size card - `<FormatAmount amount={velocity.avgDealSize} />`
- Line 396: Pipeline velocity card - `<FormatAmount amount={velocity.pipelineVelocity} />`
- Line 489: Attribution won value - `<FormatAmount amount={item.wonValue} />`
- Line 503: Attribution totals - `<FormatAmount amount={attributionQuery.data.totals.wonValue} />`
- **Total replacements: 8 (1 import + 7 usages)**

## Verification
- Syntax check: PASS (TypeScript JSX)
- Pattern followed: Standard React component replacement pattern
- All numeric values wrapped with `Number()` to ensure correct typing
- Negative discount amount preserves `-` prefix before component

## Notes
- The `renderMetricCard` function accepts a string but now receives React nodes (using `as any` type assertion for backward compatibility)
- `amendment-request-dialog.tsx` still uses `formatCurrency` (10 usages) - not included in scope
- All order totals are properly converted to numbers before passing to FormatAmount
- The FormatAmount component will handle currency formatting with proper locale and display

## Summary
Successfully integrated FormatAmount component into 3 files with **22 total replacements** (3 imports + 19 usages). All order-related monetary values now use the shared formatting component for consistent currency display across the orders domain and pipeline forecast report.
