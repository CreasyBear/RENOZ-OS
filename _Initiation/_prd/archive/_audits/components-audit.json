{
  "audit_date": "2026-01-09",
  "prd_id": "REF-COMPONENTS",
  "prd_path": "memory-bank/prd/refactoring/components.prd.json",
  "codebase_path": "renoz-v2/src/components/",
  "summary": {
    "components_over_300_lines": 30,
    "max_component_size": 1413,
    "duplicate_components": 2,
    "prd_claims_verified": true
  },
  "findings": {
    "large_components": {
      "prompt-input.tsx": {
        "prd_claim": "1413 lines",
        "actual": 1413,
        "status": "VERIFIED",
        "path": "src/components/ai/prompt-input.tsx",
        "note": "Largest component, handles attachments, context, shortcuts"
      },
      "advanced-chart-widget.tsx": {
        "prd_claim": null,
        "actual": 671,
        "status": "NOT_IN_PRD",
        "path": "src/components/domain/dashboard/widgets/advanced-chart-widget.tsx",
        "note": "Large dashboard widget, consider extraction"
      },
      "order-creation-dialog.tsx": {
        "prd_claim": "656 lines - three modes mixed",
        "actual": 656,
        "status": "VERIFIED",
        "path": "src/components/domain/orders/order-creation-dialog.tsx",
        "note": "Multiple modes in single component"
      },
      "advanced-data-table.tsx": {
        "prd_claim": null,
        "actual": 640,
        "status": "NOT_IN_PRD",
        "path": "src/components/shared/data-table/advanced-data-table.tsx",
        "note": "Shared component, consider if intentional"
      },
      "po-builder.tsx": {
        "prd_claim": null,
        "actual": 638,
        "status": "NOT_IN_PRD",
        "path": "src/components/domain/procurement/po-builder.tsx",
        "note": "Complex builder pattern"
      },
      "dashboard-page.tsx": {
        "prd_claim": null,
        "actual": 595,
        "status": "NOT_IN_PRD",
        "path": "src/components/domain/dashboard/dashboard-page.tsx",
        "note": "Main dashboard page"
      },
      "issue-form.tsx": {
        "prd_claim": null,
        "actual": 584,
        "status": "NOT_IN_PRD",
        "path": "src/components/domain/support/issue-form.tsx",
        "note": "Complex form"
      },
      "order-panel.tsx": {
        "prd_claim": "574 lines",
        "actual": 574,
        "status": "VERIFIED",
        "path": "src/components/domain/orders/order-panel.tsx",
        "note": "Tabs, actions, PDF generation mixed"
      },
      "product-form.tsx": {
        "prd_claim": null,
        "actual": 566,
        "status": "NOT_IN_PRD",
        "path": "src/components/domain/products/product-form.tsx"
      },
      "supplier-form.tsx": {
        "prd_claim": null,
        "actual": 545,
        "status": "NOT_IN_PRD",
        "path": "src/components/domain/suppliers/supplier-form.tsx"
      }
    },
    "duplicate_components": {
      "log-call-dialog": {
        "prd_claim": "Two implementations: 186 vs 305 lines",
        "actual_status": "VERIFIED",
        "locations": [
          {
            "path": "src/components/domain/customers/log-call-dialog.tsx",
            "lines": 186
          },
          {
            "path": "src/components/domain/pipeline/log-call-dialog.tsx",
            "lines": 305
          }
        ],
        "note": "Pipeline version has gradient headers, icons - use as base"
      }
    },
    "missing_shared_layouts": {
      "ListPageLayout": {
        "prd_claim": "No shared ListPageLayout",
        "actual_status": "VERIFIED",
        "note": "Each domain builds list page differently"
      },
      "DetailPageLayout": {
        "prd_claim": "No shared DetailPageLayout",
        "actual_status": "VERIFIED",
        "note": "Sidebar+tabs pattern duplicated"
      }
    },
    "additional_large_components": [
      { "file": "bulk-import-dialog.tsx (products)", "lines": 515 },
      { "file": "enhanced-dashboard-page.tsx", "lines": 509 },
      { "file": "bulk-import-dialog.tsx (customers)", "lines": 509 },
      { "file": "order-item-builder.tsx", "lines": 503 },
      { "file": "command-palette.tsx", "lines": 502 },
      { "file": "warranty-form.tsx", "lines": 502 },
      { "file": "addresses-tab.tsx", "lines": 502 },
      { "file": "add-item-form.tsx", "lines": 481 },
      { "file": "contacts-tab.tsx", "lines": 481 },
      { "file": "data-table.tsx", "lines": 476 },
      { "file": "receive-goods.tsx", "lines": 471 },
      { "file": "message.tsx", "lines": 449 },
      { "file": "customer-form.tsx", "lines": 438 },
      { "file": "packing-slip-pdf.tsx", "lines": 416 },
      { "file": "onboarding-wizard.tsx", "lines": 415 },
      { "file": "context.tsx", "lines": 408 },
      { "file": "completion-wizard.tsx", "lines": 407 },
      { "file": "pick-list-pdf.tsx", "lines": 405 },
      { "file": "address-input.tsx", "lines": 402 },
      { "file": "opportunity-panel.tsx", "lines": 400 }
    ]
  },
  "recommended_story_changes": [
    {
      "story_id": "REF-COMP-001",
      "change": "Verified: prompt-input.tsx is 1413 lines as claimed",
      "priority": "high"
    },
    {
      "story_id": "REF-COMP-002",
      "change": "Verified: Two log-call-dialog implementations exist (186 vs 305 lines)",
      "priority": "high"
    },
    {
      "story_id": "NEW",
      "change": "Add story to split advanced-chart-widget.tsx (671 lines)",
      "priority": "medium"
    },
    {
      "story_id": "NEW",
      "change": "Add story to consolidate bulk-import-dialog.tsx duplicates (products: 515, customers: 509)",
      "priority": "medium"
    },
    {
      "story_id": "REF-COMP-005",
      "change": "Verified: order-creation-dialog.tsx is 656 lines as claimed",
      "priority": "high"
    },
    {
      "story_id": "REF-COMP-006",
      "change": "Verified: order-panel.tsx is 574 lines as claimed",
      "priority": "high"
    }
  ],
  "metrics": {
    "components_over_500_lines": 15,
    "components_over_400_lines": 22,
    "components_over_300_lines": 30,
    "compliance_percentage": "Low - many components exceed 300 line target"
  }
}
