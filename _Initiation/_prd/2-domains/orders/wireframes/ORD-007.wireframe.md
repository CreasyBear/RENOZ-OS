# Wireframe: DOM-ORD-007 - Fulfillment Dashboard

## Story Reference

- **Story ID**: DOM-ORD-007
- **Name**: Fulfillment Dashboard
- **PRD**: memory-bank/prd/domains/orders.prd.json
- **Type**: Full Page Route
- **Component Type**: KanbanBoard with drag-drop and bulk operations

## Overview

Operations-focused Kanban dashboard for warehouse team to manage order fulfillment workflow. Shows orders across columns: To Allocate, To Pick, Picking, To Ship, and Shipped Today. Supports drag-drop between columns, bulk selection, bulk actions (allocate, print pick lists, ship), and auto-refresh with real-time metrics.

## UI Patterns (Reference Implementation)

### Kanban Board
- **Pattern**: RE-UI Drag-Drop Columns
- **Reference**: `_reference/.midday-reference/apps/dashboard/src/components/tables/draggable-header.tsx`
- **Features**:
  - Columns: To Allocate, To Pick, Picking, To Ship, Shipped Today
  - dnd-kit for drag-drop interactions
  - Accessible keyboard navigation (D key + arrow keys)
  - Drop zone indicators with visual feedback
  - Invalid drop warnings for stage-skipping

### Card (Fulfillment Order)
- **Pattern**: RE-UI Card
- **Reference**: `_reference/.reui-reference/registry/default/ui/card.tsx`
- **Features**:
  - Priority indicators (colored border/badge)
  - Customer info, items, value, ship date display
  - Drag handle for reordering
  - Checkbox for multi-select

### Bulk Actions Bar
- **Pattern**: RE-UI Sticky Action Bar
- **Reference**: Custom pattern
- **Features**:
  - Multi-select with checkbox
  - Bulk allocate, print pick lists, bulk ship actions
  - Selected count indicator
  - Sticky positioning at bottom

### Metrics Bar (KPI Cards)
- **Pattern**: RE-UI Card with Counting Numbers
- **Reference**: `_reference/.reui-reference/registry/default/ui/card.tsx`
- **Features**:
  - Sparklines for trend visualization
  - Progress bars for daily goals
  - Real-time updates via polling
  - Animated number transitions

### Auto-Refresh
- **Pattern**: Polling with Loading Indicators
- **Features**:
  - Subtle loading indicator (no full-screen spinner)
  - No flicker on refresh
  - Configurable 30s interval
  - Non-blocking background updates

---

## Dependencies

> **STATUS: READY** - All required schema exists, this wireframe can be implemented now.

| Dependency Type | Requirement | Status |
|-----------------|-------------|--------|
| **Schema Available** | orders, orderItems | IMPLEMENTED |
| **Server Functions** | Standard CRUD | AVAILABLE |
| **PRD Stories** | DOM-ORD-007 | N/A |

### Existing Schema Files
- `renoz-v2/lib/schema/orders.ts`

### Renoz Business Context
- **Industry**: Australian B2B battery manufacturer
- **Currency**: AUD with GST (10%)
- **Date Format**: DD/MM/YYYY

---

## Mobile Wireframe (375px)

### Single Column View with Swipe Navigation

```
+=========================================+
| Fulfillment                [O] [...]    | <- Sync indicator, menu
|                                         |
| Today: Jan 10, 2026                     |
+-----------------------------------------+
|                                         |
|  +-- TODAY'S METRICS ------------------+|
|  |  Orders: 47  |  Shipped: 12  |  Avg ||| <- Compact metrics
|  |              |  2.5 hrs/ship        ||
|  +------------------=-------------------+|
|                                         |
|  <-swipe-> [ALLOCATE] [PICK] [SHIP]... | <- Stage tabs
|            ===========                  |
+-----------------------------------------+
|                                         |
|  TO ALLOCATE (8)                        |
|  Ready for stock allocation             |
|  ───────────────────────────────────    |
|                                         |
|  +-------------------------------------+|
|  |  [!] ORD-2024-0156                  || <- Priority indicator
|  |  ───────────────────────────────    ||
|  |  Brisbane Solar Co                   ||
|  |  8 items | $2,450.00                ||
|  |  Promised: Jan 11 (Tomorrow)        ||
|  |                                     ||
|  |  [ALLOCATE]                         || <- Primary action
|  +-------------------------------------+|
|                                         |
|  +-------------------------------------+|
|  |  ORD-2024-0158                      ||
|  |  ───────────────────────────────    ||
|  |  Sydney Energy                    ||
|  |  3 items | $890.00                  ||
|  |  Promised: Jan 12                   ||
|  |                                     ||
|  |  [ALLOCATE]                         ||
|  +-------------------------------------+|
|                                         |
|  +-------------------------------------+|
|  |  ORD-2024-0160                      ||
|  |  ───────────────────────────────    ||
|  |  Melbourne Power                          ||
|  |  12 items | $5,200.00               ||
|  |  Promised: Jan 13                   ||
|  |                                     ||
|  |  [ALLOCATE]                         ||
|  +-------------------------------------+|
|                                         |
|  ... scroll for more                    |
|                                         |
+-----------------------------------------+
```

### Swipe Actions on Order Card

```
+-------------------------------------------------------------+
|                                                             |
|  <- SWIPE LEFT reveals:                                     |
|  +------------------------------------+-------+------------+|
|  | ORD-2024-0156                      | VIEW  |  ACTION    ||
|  | Brisbane Solar Co                   | [eye] |  [check]   ||
|  | 8 items | $2,450                   | gray  |   green    ||
|  +------------------------------------+-------+------------+|
|                                                             |
|  ACTION button text changes per column:                     |
|  - To Allocate: "ALLOCATE"                                  |
|  - To Pick: "START PICK"                                    |
|  - Picking: "COMPLETE"                                      |
|  - To Ship: "SHIP"                                          |
|                                                             |
+-------------------------------------------------------------+
```

### Filter Bottom Sheet

```
+=========================================+
| ====================================    |
|                                         |
|  FILTERS                         [X]    |
|  ───────────────────────────────────    |
|                                         |
|  Priority                               |
|  +----------+ +----------+ +----------+ |
|  |   All    | |   High   | |  Urgent  | |
|  |   (o)    | |   ( )    | |   ( )    | |
|  +----------+ +----------+ +----------+ |
|                                         |
|  Promised Ship Date                     |
|  +-------------------------------------+|
|  | [cal] Today                    [v]  ||
|  +-------------------------------------+|
|                                         |
|  Customer                               |
|  +-------------------------------------+|
|  | [search] Search customers...        ||
|  +-------------------------------------+|
|                                         |
|  Order Age                              |
|  +-------------------------------------+|
|  | [All Ages                      [v]  ||
|  +-------------------------------------+|
|                                         |
|  +-------------------------------------+|
|  |        [APPLY FILTERS]              ||
|  +-------------------------------------+|
|  +-------------------------------------+|
|  |          [Clear All]                ||
|  +-------------------------------------+|
|                                         |
+=========================================+
```

---

## Tablet Wireframe (768px)

### Three Column View with Horizontal Scroll

```
+=====================================================================+
| Fulfillment Dashboard                            [Refresh] [Filters]|
| Operations view for order fulfillment                               |
+---------------------------------------------------------------------+
|                                                                      |
|  +-- TODAY'S METRICS -----------------------------------------------+|
|  |  Orders      |  Avg Time     |  Shipped Today  |  Pending        ||
|  |  47 pending  |  2.5 hours    |  12 orders      |  35 orders      ||
|  |  [sparkline] |  [sparkline]  |  [progress bar] |                 ||
|  +------------------------------------------------------------------+|
|                                                                      |
|  +-- FILTERS -------------------------------------------------------+|
|  |  [Priority ▼]  [Ship Date ▼]  [Customer ▼]  [Age ▼]  [Clear]    ||
|  +------------------------------------------------------------------+|
|                                                                      |
|  <- Horizontal scroll for columns ->                                 |
|  +------------------------------------------------------------------+|
|  |                                                                  ||
|  |  +-- TO ALLOCATE ---+  +-- TO PICK ------+  +-- PICKING ------+ ||
|  |  | (8) $18,500      |  | (12) $24,200    |  | (3) $4,800      | ||
|  |  +-----------------+   +----------------+   +----------------+  ||
|  |  |                 |   |                |   |                |  ||
|  |  | +-------------+ |   | +------------+ |   | +------------+ |  ||
|  |  | |[!] 0156     | |   | | 0147       | |   | | 0152       | |  ||
|  |  | | Brisbane Solar   | |   | | GoldCoast Battery  | |   | | Zeta Ltd   | |  ||
|  |  | | 8 items     | |   | | 5 items    | |   | | 4 items    | |  ||
|  |  | | Jan 11      | |   | | Jan 10     | |   | | Jan 10     | |  ||
|  |  | +-------------+ |   | +------------+ |   | | [Mike J]   | |  ||
|  |  |                 |   |                |   | +------------+ |  ||
|  |  | +-------------+ |   | +------------+ |   |                |  ||
|  |  | | 0158        | |   | | 0149       | |   | +------------+ |  ||
|  |  | | Beta Ind    | |   | | Epsilon    | |   | | 0155       | |  ||
|  |  | | 3 items     | |   | | 8 items    | |   | | Theta Inc  | |  ||
|  |  | +-------------+ |   | +------------+ |   | | 6 items    | |  ||
|  |  |                 |   |                |   | | [Sarah C]  | |  ||
|  |  | +-------------+ |   | +------------+ |   | +------------+ |  ||
|  |  | | 0160        | |   | | 0150       | |   |                |  ||
|  |  | | Melbourne Power   | |   | | Kappa Co   | |   |                |  ||
|  |  | | 12 items    | |   | | 2 items    | |   |                |  ||
|  |  | +-------------+ |   | +------------+ |   |                |  ||
|  |  |                 |   |                |   |                |  ||
|  |  | [ ] Select All  |   | [ ] Select All|   | [ ] Select All |  ||
|  |  +-----------------+   +----------------+   +----------------+  ||
|  |                                                                  ||
|  +------------------------------------------------------------------+|
|                                                                      |
|  +-- BULK ACTIONS (when selected) ----------------------------------+|
|  |  3 orders selected                                               ||
|  |  [Allocate All]  [Print Pick Lists]  [x Clear Selection]         ||
|  +------------------------------------------------------------------+|
|                                                                      |
+=====================================================================+
```

---

## Desktop Wireframe (1280px+)

### Full Kanban Board with All Columns

```
+===================================================================================================+
| Renoz CRM                                                                    [bell] [Joel v]      |
+-------------+-------------------------------------------------------------------------------------+
|             |                                                                                     |
| Dashboard   |  Fulfillment Dashboard                              [Auto-refresh: 30s] [Filters]  |
| Customers   |  Operations view for order fulfillment                                              |
| Orders      |  ─────────────────────────────────────────────────────────────────────────────      |
| Products    |                                                                                     |
| Jobs        |  +-- METRICS BAR ------------------------------------------------------------+      |
| Pipeline    |  |                                                                            |      |
| Fulfillment |  |  +----------------+  +----------------+  +----------------+  +------------+|      |
|             |  |  | Today's Orders |  | Avg Ship Time  |  | Shipped Today  |  | On Track   ||      |
|             |  |  | 47             |  | 2.5 hours      |  | 12 / 47        |  | 92%        ||      |
|             |  |  | [============] |  | [target: 3h]   |  | [==========  ] |  | [graph]    ||      |
|             |  |  +----------------+  +----------------+  +----------------+  +------------+|      |
|             |  |                                                                            |      |
|             |  +----------------------------------------------------------------------------+      |
|             |                                                                                     |
|             |  +-- FILTERS -------------------------------------------------------------+          |
|             |  | [Priority ▼] [Ship Date ▼] [Customer ▼] [Age ▼]        [Clear Filters] |          |
|             |  +------------------------------------------------------------------------+          |
|             |                                                                                     |
|             |  +-- KANBAN BOARD (role="application") ----------------------------------------+    |
|             |  |                                                                             |    |
|             |  | +-- TO ALLOCATE ---+ +-- TO PICK ------+ +-- PICKING -----+ +-- TO SHIP --+|    |
|             |  | | (8) $18,500      | | (12) $24,200    | | (3) $4,800     | | (7) $12,100 ||    |
|             |  | +------------------+ +-----------------+ +----------------+ +-------------+|    |
|             |  | |                  | |                 | |                | |             ||    |
|             |  | | +==============+ | | +-------------+ | | +------------+ | | +---------+ ||    |
|             |  | | |[!] ORD-0156 || | | | ORD-0147   | | | | ORD-0152   | | | | ORD-0145| ||    |
|             |  | | |Brisbane Solar    || | | | GoldCoast Battery  | | | | Zeta Ltd   | | | | Iota Co | ||    |
|             |  | | |8 items      || | | | 5 items    | | | | 4 items    | | | | 3 items | ||    |
|             |  | | |$2,450       || | | | $1,200     | | | | $980       | | | | $450    | ||    |
|             |  | | |Jan 11 [!]   || | | | Jan 10     | | | | [Mike J]   | | | | Jan 10  | ||    |
|             |  | | |[ ] [E] [...] || | | | [ ] [...] | | | | [ ] [...]  | | | | [ ][...] | ||    |
|             |  | | +==============+ | | +-------------+ | | +------------+ | | +---------+ ||    |
|             |  | |                  | |                 | |                | |             ||    |
|             |  | | +--------------+ | | +-------------+ | | +------------+ | | +---------+ ||    |
|             |  | | | ORD-0158    | | | | ORD-0149   | | | | ORD-0155   | | | | ORD-0148| ||    |
|             |  | | | Beta Ind    | | | | Epsilon    | | | | Theta Inc  | | | | Lambda  | ||    |
|             |  | | | 3 items     | | | | 8 items    | | | | 6 items    | | | | 4 items | ||    |
|             |  | | | $890        | | | | $2,400     | | | | [Sarah C]  | | | | $720    | ||    |
|             |  | | +--------------+ | | +-------------+ | | +------------+ | | +---------+ ||    |
|             |  | |                  | |                 | |                | |             ||    |
|             |  | | +--------------+ | | +-------------+ | | +------------+ | | +---------+ ||    |
|             |  | | | ORD-0160    | | | | ORD-0150   | | | | ORD-0159   | | | | ORD-0151| ||    |
|             |  | | | Melbourne Power   | | | | Kappa Co   | | | |Processing..|<-|-| | Mu Inc  | ||    |
|             |  | | | 12 items    | | | | 2 items    | | | |            | | | | 8 items | ||    |
|             |  | | | $5,200      | | | | $340       | | | |            | | | | $2,800  | ||    |
|             |  | | +--------------+ | | +-------------+ | | +------------+ | | +---------+ ||    |
|             |  | |                  | |                 | |                | |             ||    |
|             |  | | ... +5 more     | | ... +9 more     | |                | | ... +4 more ||    |
|             |  | |                  | |                 | |                | |             ||    |
|             |  | | [ ] Select All  | | [ ] Select All  | | [ ] Select All | | [ ] Sel All ||    |
|             |  | +------------------+ +-----------------+ +----------------+ +-------------+|    |
|             |  |                                                                             |    |
|             |  | +-- SHIPPED TODAY -----------------------------------------------------+   |    |
|             |  | | (12) $18,400          [Collapsed - Click to expand]                  |   |    |
|             |  | +----------------------------------------------------------------------+   |    |
|             |  |                                                                             |    |
|             |  +-----------------------------------------------------------------------------+    |
|             |                                                                                     |
|             |  +-- BULK ACTIONS BAR (visible when selection active) -------------------------+    |
|             |  |  5 orders selected    [Allocate] [Print Pick Lists] [Bulk Ship] [x Clear]  |    |
|             |  +-----------------------------------------------------------------------------+    |
|             |                                                                                     |
+-------------+-------------------------------------------------------------------------------------+
```

### Order Card Detail

```
+==========================================+
| [=] ORD-2024-0156                   [!]  |  <- Drag handle, Priority flag
|==========================================|
| Brisbane Solar Co                         |
| ─────────────────────────────────────    |
| Items: 8  |  Value: $2,450.00            |
| ─────────────────────────────────────    |
| Ship By: Jan 11 (Tomorrow)               |  <- Urgent if today/tomorrow
| Age: 2 days                              |
|==========================================|
| [ ] Select   [View] [...]                |  <- Checkbox for bulk, actions
+==========================================+
  Border color indicates priority:
  - Red: Urgent (ship today/overdue)
  - Amber: High (ship tomorrow)
  - Gray: Normal
```

### Drag-Drop States

```
IDLE:
+==============+
| ORD-0156     |
| Brisbane Solar    |
| 8 items      |
+==============+
  cursor: grab

DRAGGING:
+~~~~~~~~~~~~~~+  <- Placeholder (dashed)
|              |
+~~~~~~~~~~~~~~+

     +================+  <- Dragged card (elevated)
     || ORD-0156     ||    shadow, slight rotation
     || Brisbane Solar    ||    opacity: 0.9
     || Moving...    ||
     +================+
           |
           v cursor: grabbing

OVER DROP ZONE (Valid - next stage):
+-- TO PICK ------+
| DROP HERE       |  <- Column header highlights
| (12) -> (13)    |  <- Count preview
+-----------------+
|                 |
| +~~~~~~~~~~~~~+ |  <- Drop indicator
| |  Drop here  | |     animated pulse
| +~~~~~~~~~~~~~+ |
|                 |
+-----------------+

OVER DROP ZONE (Invalid - skip stage):
+-- TO SHIP ------+
| CANNOT DROP     |  <- Red warning
| Must pick first |
+-----------------+
```

### Picking Column - Assigned Card

```
+==========================================+
| [=] ORD-2024-0152                        |
|==========================================|
| Zeta Ltd                                 |
| 4 items  |  $980.00                      |
|==========================================|
| [avatar] Mike Johnson                    |  <- Assigned picker
| Started: 15 min ago                      |
| ─────────────────────────────────────    |
| [=====           ] 25% picked            |  <- Pick progress
|==========================================|
| [ ] [View] [Complete Pick] [...]         |
+==========================================+
```

---

## Interaction States

### Loading States

```
INITIAL BOARD LOAD:
+-- TO ALLOCATE ---+ +-- TO PICK ------+
| [shimmer====]    | | [shimmer====]    |
| [shimmer==]      | | [shimmer==]      |
+------------------+ +------------------+
|                  | |                  |
| +~~~~~~~~~~~~~~+ | | +~~~~~~~~~~~~~~+ |
| | [shimmer===] | | | | [shimmer===] | |
| | [shimmer=]   | | | | [shimmer=]   | |
| +~~~~~~~~~~~~~~+ | | +~~~~~~~~~~~~~~+ |
|                  | |                  |
| +~~~~~~~~~~~~~~+ | | +~~~~~~~~~~~~~~+ |
| | [shimmer===] | | | | [shimmer===] | |
| +~~~~~~~~~~~~~~+ | | +~~~~~~~~~~~~~~+ |
+------------------+ +------------------+

AUTO-REFRESH (subtle):
+-- TO ALLOCATE ---+
| (8) [...]        |  <- Subtle spinner in header
|==================|     Cards remain visible
| Cards unchanged  |     No flicker
|                  |

DRAG PROCESSING:
+==================+
| ORD-0156         |
| [spinner]        |  <- Card shows processing
| Moving...        |
+==================+
```

### Empty States

```
EMPTY COLUMN:
+-- TO ALLOCATE ---+
| (0) $0           |
+------------------+
|                  |
|   [illustration] |
|                  |
|   All orders     |
|   allocated!     |
|                  |
|   New orders     |
|   appear here    |
|                  |
+------------------+

ALL CAUGHT UP:
+=====================================================================+
|                                                                      |
|                    [celebration illustration]                        |
|                                                                      |
|                      All Caught Up!                                  |
|                                                                      |
|    All orders have been shipped. Great work, team!                   |
|                                                                      |
|    Shipped today: 47 orders | $124,500                               |
|                                                                      |
+=====================================================================+
```

### Error States

```
BOARD LOAD FAILED:
+=====================================================================+
| [!] Unable to load fulfillment dashboard                             |
|                                                                      |
|     There was a problem connecting to the server.                    |
|     Please check your connection and try again.                      |
|                                                                      |
|     [Retry]                                                          |
+=====================================================================+

DRAG FAILED:
+=========================================+
|  [!] Move Failed                        |
|                                         |
|  Could not move ORD-0156 to Picking.    |
|  The order may have been modified.      |
|                                         |
|  [Retry]  [Dismiss]                     |
+=========================================+
  Card reverts to original position

BULK ACTION FAILED:
+=========================================+
|  [!] Bulk Allocation Failed             |
|                                         |
|  3 of 5 orders could not be allocated:  |
|  - ORD-0158: Insufficient stock         |
|  - ORD-0160: Already allocated          |
|  - ORD-0162: Order locked               |
|                                         |
|  [View Details]  [Dismiss]              |
+=========================================+
```

### Success States

```
DRAG COMPLETE:
+==================+
| ORD-0156         |
| [check]          |  <- Brief checkmark
| Moved to Picking |
+==================+
  Green pulse animation

BULK COMPLETE:
+=========================================+
|  [check] Bulk Allocation Complete       |
|                                         |
|  5 orders allocated successfully.       |
|  Ready for picking.                     |
|                                         |
|              <- Auto-dismiss 3s         |
+=========================================+

ALL SHIPPED:
+=========================================+
|  [confetti]                             |
|                                         |
|  Order ORD-0156 Shipped!                |
|                                         |
|  All orders for today complete.         |
|                                         |
+=========================================+
```

---

## Accessibility Notes

### Focus Order

1. **Dashboard Level**
   - Metrics bar (info only)
   - Filters toolbar
   - Kanban board (application mode)

2. **Kanban Board**
   - Tab: Move between columns
   - Arrow keys: Navigate cards within column
   - Enter: Open card details
   - Space: Toggle selection
   - D: Start drag mode (accessible drag)

3. **Drag Mode (Accessible)**
   - Arrow keys: Move between columns/positions
   - Enter: Confirm drop
   - Escape: Cancel drag

### ARIA Requirements

```html
<!-- Fulfillment Dashboard -->
<main
  role="main"
  aria-label="Fulfillment Dashboard"
>
  <!-- Metrics -->
  <section
    role="region"
    aria-label="Today's fulfillment metrics"
    aria-live="polite"
  >
    <!-- Metrics content -->
  </section>

  <!-- Kanban Board -->
  <section
    role="application"
    aria-label="Order fulfillment board"
    aria-describedby="board-instructions"
  >
    <p id="board-instructions" class="sr-only">
      Use Tab to navigate columns, Arrow keys to navigate cards,
      Space to select, D then Arrow keys to drag cards between columns.
    </p>

    <!-- Column -->
    <div
      role="listbox"
      aria-label="To Allocate: 8 orders, $18,500 value"
    >
      <h3 id="col-allocate">To Allocate (8)</h3>

      <!-- Order Card -->
      <article
        role="option"
        aria-selected="false"
        aria-grabbed="false"
        aria-label="Order 0156, Brisbane Solar Co, 8 items, $2,450, ship by January 11, priority urgent"
        tabindex="0"
      >
        <!-- Card content -->
      </article>
    </div>
  </section>

  <!-- Bulk Actions -->
  <div
    role="toolbar"
    aria-label="Bulk actions for 5 selected orders"
    aria-hidden="false"
  >
    <button aria-label="Allocate 5 selected orders">Allocate</button>
    <button aria-label="Print pick lists for 5 orders">Print Pick Lists</button>
    <button aria-label="Clear selection">Clear</button>
  </div>
</main>

<!-- Drag Announcement -->
<div
  role="status"
  aria-live="assertive"
  class="sr-only"
>
  Order 0156 grabbed. Use arrow keys to move between columns.
  Currently over To Pick column. Press Enter to drop.
</div>

<!-- Auto-refresh Announcement -->
<div
  role="status"
  aria-live="polite"
  class="sr-only"
>
  Dashboard refreshed. 2 new orders added to To Allocate.
</div>
```

### Screen Reader Announcements

- Board loaded: "Fulfillment dashboard loaded. 47 orders pending. 12 shipped today."
- Column focused: "To Allocate column. 8 orders, total value $18,500."
- Card focused: "Order 0156, Brisbane Solar Co, 8 items, $2,450. Ship by January 11, urgent priority."
- Drag started: "Order 0156 grabbed. Use arrow keys to move."
- Drag over: "Over To Pick column. Press Enter to drop."
- Drop complete: "Order 0156 moved to To Pick. 9 of 13 orders."
- Selection: "5 orders selected. Bulk actions available."
- Auto-refresh: "Dashboard refreshed. 2 new orders in To Allocate."
- All complete: "All orders shipped! 47 orders processed today."

---

## Animation Choreography

### Card Drag-Drop

```
DRAG START:
- Duration: 150ms
- Card scale: 1 -> 1.02
- Shadow elevation: 2 -> 8
- Rotate: 0 -> 2deg
- Placeholder fade in: 100ms

DRAG OVER VALID:
- Duration: 100ms
- Column header: background highlight
- Drop zone: height expand, pulse border
- Other cards: shift to make room (150ms)

DROP:
- Duration: 300ms
- Card scale: 1.02 -> 1
- Shadow elevation: 8 -> 2
- Settle animation (spring easing)
- Placeholder collapse
- Count update with number animation

DROP INVALID:
- Duration: 400ms
- Card returns to original (spring)
- Shake animation: 3 cycles, 50ms each
- Red flash on target column
```

### Bulk Selection

```
CHECKBOX TOGGLE:
- Duration: 150ms
- Scale bounce: 1 -> 1.2 -> 1
- Checkmark draw animation

BULK BAR APPEAR:
- Duration: 200ms
- Slide up from bottom
- Backdrop slight darken

SELECT ALL:
- Duration: 300ms
- Staggered card highlight (30ms each)
- Count animate up
```

### Auto-Refresh

```
REFRESH INDICATOR:
- Duration: continuous during fetch
- Subtle spinner in header
- No card flicker

NEW CARD APPEAR:
- Duration: 400ms
- Fade in from top of column
- Other cards shift down
- Highlight pulse on new card

CARD REMOVED (shipped by other):
- Duration: 300ms
- Fade out + collapse
- Other cards shift up
```

### Metrics Updates

```
NUMBER CHANGE:
- Duration: 300ms
- Typewriter/counter animation
- Color flash if significant change

PROGRESS BAR:
- Duration: 400ms
- Width transition smooth
- Color gradient if percentage changes bracket
```

---

## Component Props Interfaces

```typescript
// Fulfillment Dashboard Page
interface FulfillmentDashboardProps {
  initialFilters?: FulfillmentFilters;
}

// Fulfillment Filters
interface FulfillmentFilters {
  priority?: 'all' | 'urgent' | 'high' | 'normal';
  shipDate?: Date | 'today' | 'tomorrow' | 'this_week';
  customerId?: string;
  ageFilter?: 'all' | 'new' | 'aging' | 'critical';
}

// Fulfillment Metrics
interface FulfillmentMetrics {
  totalOrders: number;
  shippedToday: number;
  avgShipTime: number; // hours
  onTrackPercentage: number;
  totalValue: number;
}

// Fulfillment Column
interface FulfillmentColumn {
  id: 'to_allocate' | 'to_pick' | 'picking' | 'to_ship' | 'shipped_today';
  name: string;
  orders: FulfillmentOrder[];
  totalValue: number;
}

// Fulfillment Order (Card data)
interface FulfillmentOrder {
  id: string;
  orderNumber: string;
  customerName: string;
  itemCount: number;
  totalValue: number;
  promisedShipDate: Date;
  createdAt: Date;
  priority: 'urgent' | 'high' | 'normal';
  status: FulfillmentColumn['id'];
  assignedTo?: { id: string; name: string; avatar?: string };
  pickProgress?: number; // 0-100 for picking status
}

// Kanban Board Component
interface FulfillmentBoardProps {
  columns: FulfillmentColumn[];
  isLoading: boolean;
  isRefreshing: boolean;
  error: Error | null;
  selectedOrderIds: Set<string>;
  onOrderSelect: (orderId: string, selected: boolean) => void;
  onSelectAll: (columnId: string) => void;
  onClearSelection: () => void;
  onDragEnd: (orderId: string, targetColumnId: string) => Promise<void>;
  onOrderClick: (orderId: string) => void;
}

// Fulfillment Card
interface FulfillmentCardProps {
  order: FulfillmentOrder;
  isSelected: boolean;
  isDragging: boolean;
  onSelect: (selected: boolean) => void;
  onClick: () => void;
  actions: CardAction[];
}

// Fulfillment Column Component
interface FulfillmentColumnProps {
  column: FulfillmentColumn;
  selectedCount: number;
  onSelectAll: () => void;
  onDragOver: (orderId: string) => void;
  onDrop: (orderId: string) => void;
  isDropTarget: boolean;
  canDrop: boolean;
}

// Metrics Bar
interface FulfillmentMetricsProps {
  metrics: FulfillmentMetrics;
  isLoading: boolean;
}

// Bulk Actions Bar
interface BulkActionsBarProps {
  selectedCount: number;
  selectedColumnId?: string;
  onAllocate: () => Promise<void>;
  onPrintPickLists: () => Promise<void>;
  onBulkShip: () => Promise<void>;
  onClearSelection: () => void;
  isProcessing: boolean;
}

// Filters Component
interface FulfillmentFiltersProps {
  filters: FulfillmentFilters;
  onFilterChange: (filters: FulfillmentFilters) => void;
  onClearFilters: () => void;
}
```

---

## Files to Create/Modify

| File | Purpose |
|------|---------|
| `src/routes/_authed/fulfillment/index.tsx` | Main dashboard route |
| `src/components/domain/orders/fulfillment-board.tsx` | Kanban board container |
| `src/components/domain/orders/fulfillment-column.tsx` | Individual column |
| `src/components/domain/orders/fulfillment-card.tsx` | Order card |
| `src/components/domain/orders/fulfillment-metrics.tsx` | Metrics bar |
| `src/components/domain/orders/fulfillment-filters.tsx` | Filter toolbar |
| `src/components/domain/orders/bulk-actions-bar.tsx` | Bulk action toolbar |

---

## Performance Requirements

| Metric | Target | Notes |
|--------|--------|-------|
| Initial load | < 2s | Time to interactive |
| Drag start | < 100ms | From mousedown to visual |
| Drop response | < 500ms | From drop to card settled |
| Auto-refresh | 30s interval | Background, non-blocking |
| Column scroll | 60fps | Smooth scrolling |
| Bulk action | < 2s | For up to 10 orders |

---

## Related Wireframes

- [DOM-ORD-001c: Shipment Tracking UI](./DOM-ORD-001c.wireframe.md)
- [DOM-ORD-003c: Partial Shipments UI](./DOM-ORD-003c.wireframe.md)
- [DOM-ORD-004c: Backorder Management UI](./DOM-ORD-004c.wireframe.md)

---

**Document Version:** 1.0
**Created:** 2026-01-10
**Author:** UI Skill
