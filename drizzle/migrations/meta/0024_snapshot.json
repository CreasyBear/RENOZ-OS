{
  "id": "670c23aa-17dd-4c29-ba39-f5cfeb72e0db",
  "prevId": "2dedb973-6184-4833-86e0-cc3929f7c635",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.jobs": {
      "name": "jobs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "job_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "job_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "progress": {
          "name": "progress",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_jobs_user_status": {
          "name": "idx_jobs_user_status",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_jobs_user_active": {
          "name": "idx_jobs_user_active",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_jobs_org_user": {
          "name": "idx_jobs_org_user",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_jobs_external_id": {
          "name": "idx_jobs_external_id",
          "columns": [
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "jobs_organization_id_organizations_id_fk": {
          "name": "jobs_organization_id_organizations_id_fk",
          "tableFrom": "jobs",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "jobs_user_id_users_id_fk": {
          "name": "jobs_user_id_users_id_fk",
          "tableFrom": "jobs",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "jobs_select_policy": {
          "name": "jobs_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "jobs_insert_policy": {
          "name": "jobs_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "jobs_update_policy": {
          "name": "jobs_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "jobs_delete_policy": {
          "name": "jobs_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.notifications": {
      "name": "notifications",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "notification_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "notification_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "read_at": {
          "name": "read_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "dismissed_at": {
          "name": "dismissed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "failure_reason": {
          "name": "failure_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "data": {
          "name": "data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_notifications_user_status": {
          "name": "idx_notifications_user_status",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_notifications_org_user": {
          "name": "idx_notifications_org_user",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_notifications_user_created": {
          "name": "idx_notifications_user_created",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "notifications_organization_id_organizations_id_fk": {
          "name": "notifications_organization_id_organizations_id_fk",
          "tableFrom": "notifications",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "notifications_user_id_users_id_fk": {
          "name": "notifications_user_id_users_id_fk",
          "tableFrom": "notifications",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "notifications_select_policy": {
          "name": "notifications_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "notifications_insert_policy": {
          "name": "notifications_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "notifications_update_policy": {
          "name": "notifications_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "notifications_delete_policy": {
          "name": "notifications_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.audit_logs": {
      "name": "audit_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "action": {
          "name": "action",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "old_values": {
          "name": "old_values",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "new_values": {
          "name": "new_values",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        }
      },
      "indexes": {
        "idx_audit_logs_org": {
          "name": "idx_audit_logs_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_logs_user": {
          "name": "idx_audit_logs_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_logs_entity": {
          "name": "idx_audit_logs_entity",
          "columns": [
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_logs_timestamp": {
          "name": "idx_audit_logs_timestamp",
          "columns": [
            {
              "expression": "timestamp",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_logs_org_timestamp": {
          "name": "idx_audit_logs_org_timestamp",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "timestamp",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_logs_org_action": {
          "name": "idx_audit_logs_org_action",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_logs_org_user_timestamp": {
          "name": "idx_audit_logs_org_user_timestamp",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "timestamp",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "audit_logs_organization_id_organizations_id_fk": {
          "name": "audit_logs_organization_id_organizations_id_fk",
          "tableFrom": "audit_logs",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "audit_logs_user_id_users_id_fk": {
          "name": "audit_logs_user_id_users_id_fk",
          "tableFrom": "audit_logs",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "audit_logs_select_policy": {
          "name": "audit_logs_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "audit_logs_insert_policy": {
          "name": "audit_logs_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.addresses": {
      "name": "addresses",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "address_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'billing'"
        },
        "is_primary": {
          "name": "is_primary",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "street1": {
          "name": "street1",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "street2": {
          "name": "street2",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "state": {
          "name": "state",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "postcode": {
          "name": "postcode",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "country": {
          "name": "country",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'AU'"
        },
        "latitude": {
          "name": "latitude",
          "type": "numeric(10, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "longitude": {
          "name": "longitude",
          "type": "numeric(11, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_addresses_org": {
          "name": "idx_addresses_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_addresses_customer": {
          "name": "idx_addresses_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_addresses_org_customer": {
          "name": "idx_addresses_org_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_addresses_type": {
          "name": "idx_addresses_type",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_addresses_postcode": {
          "name": "idx_addresses_postcode",
          "columns": [
            {
              "expression": "postcode",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_addresses_primary": {
          "name": "idx_addresses_primary",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_primary",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "addresses_organization_id_organizations_id_fk": {
          "name": "addresses_organization_id_organizations_id_fk",
          "tableFrom": "addresses",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "addresses_customer_id_customers_id_fk": {
          "name": "addresses_customer_id_customers_id_fk",
          "tableFrom": "addresses",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "addresses_select_policy": {
          "name": "addresses_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "addresses_insert_policy": {
          "name": "addresses_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "addresses_update_policy": {
          "name": "addresses_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "addresses_delete_policy": {
          "name": "addresses_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.contacts": {
      "name": "contacts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "first_name": {
          "name": "first_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "last_name": {
          "name": "last_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "mobile": {
          "name": "mobile",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "department": {
          "name": "department",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_primary": {
          "name": "is_primary",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "decision_maker": {
          "name": "decision_maker",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "influencer": {
          "name": "influencer",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "email_opt_in": {
          "name": "email_opt_in",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "sms_opt_in": {
          "name": "sms_opt_in",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "email_opt_in_at": {
          "name": "email_opt_in_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sms_opt_in_at": {
          "name": "sms_opt_in_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_contacted_at": {
          "name": "last_contacted_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_contacts_org": {
          "name": "idx_contacts_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_contacts_customer": {
          "name": "idx_contacts_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_contacts_org_customer": {
          "name": "idx_contacts_org_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_contacts_email": {
          "name": "idx_contacts_email",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_contacts_primary": {
          "name": "idx_contacts_primary",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_primary",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "contacts_organization_id_organizations_id_fk": {
          "name": "contacts_organization_id_organizations_id_fk",
          "tableFrom": "contacts",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "contacts_customer_id_customers_id_fk": {
          "name": "contacts_customer_id_customers_id_fk",
          "tableFrom": "contacts",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "contacts_select_policy": {
          "name": "contacts_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "contacts_insert_policy": {
          "name": "contacts_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "contacts_update_policy": {
          "name": "contacts_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "contacts_delete_policy": {
          "name": "contacts_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.customer_activities": {
      "name": "customer_activities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "contact_id": {
          "name": "contact_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "activity_type": {
          "name": "activity_type",
          "type": "customer_activity_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "direction": {
          "name": "direction",
          "type": "activity_direction",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "outcome": {
          "name": "outcome",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "duration": {
          "name": "duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "scheduled_at": {
          "name": "scheduled_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "assigned_to": {
          "name": "assigned_to",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "idx_customer_activities_customer": {
          "name": "idx_customer_activities_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_activities_org_customer": {
          "name": "idx_customer_activities_org_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_activities_contact": {
          "name": "idx_customer_activities_contact",
          "columns": [
            {
              "expression": "contact_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_activities_type": {
          "name": "idx_customer_activities_type",
          "columns": [
            {
              "expression": "activity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_activities_scheduled": {
          "name": "idx_customer_activities_scheduled",
          "columns": [
            {
              "expression": "scheduled_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_activities_completed": {
          "name": "idx_customer_activities_completed",
          "columns": [
            {
              "expression": "completed_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_activities_assigned": {
          "name": "idx_customer_activities_assigned",
          "columns": [
            {
              "expression": "assigned_to",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_activities_org_customer_created": {
          "name": "idx_customer_activities_org_customer_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "customer_activities_organization_id_organizations_id_fk": {
          "name": "customer_activities_organization_id_organizations_id_fk",
          "tableFrom": "customer_activities",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "customer_activities_customer_id_customers_id_fk": {
          "name": "customer_activities_customer_id_customers_id_fk",
          "tableFrom": "customer_activities",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "customer_activities_contact_id_contacts_id_fk": {
          "name": "customer_activities_contact_id_contacts_id_fk",
          "tableFrom": "customer_activities",
          "tableTo": "contacts",
          "columnsFrom": [
            "contact_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.customer_health_metrics": {
      "name": "customer_health_metrics",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "metric_date": {
          "name": "metric_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "recency_score": {
          "name": "recency_score",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "frequency_score": {
          "name": "frequency_score",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "monetary_score": {
          "name": "monetary_score",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "engagement_score": {
          "name": "engagement_score",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "overall_score": {
          "name": "overall_score",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_customer_health_metrics_unique": {
          "name": "idx_customer_health_metrics_unique",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "metric_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_health_metrics_customer": {
          "name": "idx_customer_health_metrics_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_health_metrics_org_customer": {
          "name": "idx_customer_health_metrics_org_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_health_metrics_date": {
          "name": "idx_customer_health_metrics_date",
          "columns": [
            {
              "expression": "metric_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_health_metrics_overall": {
          "name": "idx_customer_health_metrics_overall",
          "columns": [
            {
              "expression": "overall_score",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "customer_health_metrics_organization_id_organizations_id_fk": {
          "name": "customer_health_metrics_organization_id_organizations_id_fk",
          "tableFrom": "customer_health_metrics",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "customer_health_metrics_customer_id_customers_id_fk": {
          "name": "customer_health_metrics_customer_id_customers_id_fk",
          "tableFrom": "customer_health_metrics",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "recency_score_range": {
          "name": "recency_score_range",
          "value": "\"customer_health_metrics\".\"recency_score\" IS NULL OR (\"customer_health_metrics\".\"recency_score\" >= $1 AND \"customer_health_metrics\".\"recency_score\" <= $2)"
        },
        "frequency_score_range": {
          "name": "frequency_score_range",
          "value": "\"customer_health_metrics\".\"frequency_score\" IS NULL OR (\"customer_health_metrics\".\"frequency_score\" >= $1 AND \"customer_health_metrics\".\"frequency_score\" <= $2)"
        },
        "monetary_score_range": {
          "name": "monetary_score_range",
          "value": "\"customer_health_metrics\".\"monetary_score\" IS NULL OR (\"customer_health_metrics\".\"monetary_score\" >= $1 AND \"customer_health_metrics\".\"monetary_score\" <= $2)"
        },
        "engagement_score_range": {
          "name": "engagement_score_range",
          "value": "\"customer_health_metrics\".\"engagement_score\" IS NULL OR (\"customer_health_metrics\".\"engagement_score\" >= $1 AND \"customer_health_metrics\".\"engagement_score\" <= $2)"
        },
        "overall_score_range": {
          "name": "overall_score_range",
          "value": "\"customer_health_metrics\".\"overall_score\" IS NULL OR (\"customer_health_metrics\".\"overall_score\" >= $1 AND \"customer_health_metrics\".\"overall_score\" <= $2)"
        }
      },
      "isRLSEnabled": false
    },
    "public.customer_merge_audit": {
      "name": "customer_merge_audit",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "primary_customer_id": {
          "name": "primary_customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "merged_customer_id": {
          "name": "merged_customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "performed_by": {
          "name": "performed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "performed_at": {
          "name": "performed_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "merged_data": {
          "name": "merged_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        }
      },
      "indexes": {
        "idx_customer_merge_audit_org": {
          "name": "idx_customer_merge_audit_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_merge_audit_primary": {
          "name": "idx_customer_merge_audit_primary",
          "columns": [
            {
              "expression": "primary_customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_merge_audit_merged": {
          "name": "idx_customer_merge_audit_merged",
          "columns": [
            {
              "expression": "merged_customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_merge_audit_action": {
          "name": "idx_customer_merge_audit_action",
          "columns": [
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_merge_audit_performed_at": {
          "name": "idx_customer_merge_audit_performed_at",
          "columns": [
            {
              "expression": "performed_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_merge_audit_org_performed": {
          "name": "idx_customer_merge_audit_org_performed",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "performed_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "customer_merge_audit_organization_id_organizations_id_fk": {
          "name": "customer_merge_audit_organization_id_organizations_id_fk",
          "tableFrom": "customer_merge_audit",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "customer_merge_audit_primary_customer_id_customers_id_fk": {
          "name": "customer_merge_audit_primary_customer_id_customers_id_fk",
          "tableFrom": "customer_merge_audit",
          "tableTo": "customers",
          "columnsFrom": [
            "primary_customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "customer_merge_audit_merged_customer_id_customers_id_fk": {
          "name": "customer_merge_audit_merged_customer_id_customers_id_fk",
          "tableFrom": "customer_merge_audit",
          "tableTo": "customers",
          "columnsFrom": [
            "merged_customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.customer_priorities": {
      "name": "customer_priorities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "priority_level": {
          "name": "priority_level",
          "type": "customer_priority_level",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'medium'"
        },
        "account_manager": {
          "name": "account_manager",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "service_level": {
          "name": "service_level",
          "type": "service_level",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'standard'"
        },
        "contract_value": {
          "name": "contract_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "contract_start_date": {
          "name": "contract_start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "contract_end_date": {
          "name": "contract_end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "special_terms": {
          "name": "special_terms",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_customer_priorities_customer_unique": {
          "name": "idx_customer_priorities_customer_unique",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_priorities_org_customer": {
          "name": "idx_customer_priorities_org_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_priorities_level": {
          "name": "idx_customer_priorities_level",
          "columns": [
            {
              "expression": "priority_level",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_priorities_manager": {
          "name": "idx_customer_priorities_manager",
          "columns": [
            {
              "expression": "account_manager",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "customer_priorities_organization_id_organizations_id_fk": {
          "name": "customer_priorities_organization_id_organizations_id_fk",
          "tableFrom": "customer_priorities",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "customer_priorities_customer_id_customers_id_fk": {
          "name": "customer_priorities_customer_id_customers_id_fk",
          "tableFrom": "customer_priorities",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "contract_dates_valid": {
          "name": "contract_dates_valid",
          "value": "\"customer_priorities\".\"contract_end_date\" IS NULL OR \"customer_priorities\".\"contract_start_date\" IS NULL OR \"customer_priorities\".\"contract_end_date\" > \"customer_priorities\".\"contract_start_date\""
        }
      },
      "isRLSEnabled": false
    },
    "public.customer_tag_assignments": {
      "name": "customer_tag_assignments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tag_id": {
          "name": "tag_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "assigned_by": {
          "name": "assigned_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "assigned_at": {
          "name": "assigned_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_customer_tag_assignments_unique": {
          "name": "idx_customer_tag_assignments_unique",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "tag_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_tag_assignments_customer": {
          "name": "idx_customer_tag_assignments_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_tag_assignments_tag": {
          "name": "idx_customer_tag_assignments_tag",
          "columns": [
            {
              "expression": "tag_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "customer_tag_assignments_organization_id_organizations_id_fk": {
          "name": "customer_tag_assignments_organization_id_organizations_id_fk",
          "tableFrom": "customer_tag_assignments",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "customer_tag_assignments_customer_id_customers_id_fk": {
          "name": "customer_tag_assignments_customer_id_customers_id_fk",
          "tableFrom": "customer_tag_assignments",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "customer_tag_assignments_tag_id_customer_tags_id_fk": {
          "name": "customer_tag_assignments_tag_id_customer_tags_id_fk",
          "tableFrom": "customer_tag_assignments",
          "tableTo": "customer_tags",
          "columnsFrom": [
            "tag_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "customer_tag_assignments_select_policy": {
          "name": "customer_tag_assignments_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "customer_tag_assignments_insert_policy": {
          "name": "customer_tag_assignments_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "customer_tag_assignments_update_policy": {
          "name": "customer_tag_assignments_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "customer_tag_assignments_delete_policy": {
          "name": "customer_tag_assignments_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.customer_tags": {
      "name": "customer_tags",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "color": {
          "name": "color",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'#6B7280'"
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "usage_count": {
          "name": "usage_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "idx_customer_tags_name_org_unique": {
          "name": "idx_customer_tags_name_org_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_tags_org_category": {
          "name": "idx_customer_tags_org_category",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "category",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_tags_active": {
          "name": "idx_customer_tags_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_tags_usage": {
          "name": "idx_customer_tags_usage",
          "columns": [
            {
              "expression": "usage_count",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "customer_tags_organization_id_organizations_id_fk": {
          "name": "customer_tags_organization_id_organizations_id_fk",
          "tableFrom": "customer_tags",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.customers": {
      "name": "customers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "customer_code": {
          "name": "customer_code",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'CUST-' || substr(gen_random_uuid()::text, 1, 8)"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "legal_name": {
          "name": "legal_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "website": {
          "name": "website",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "customer_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'prospect'"
        },
        "type": {
          "name": "type",
          "type": "customer_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'business'"
        },
        "size": {
          "name": "size",
          "type": "customer_size",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "industry": {
          "name": "industry",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tax_id": {
          "name": "tax_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "registration_number": {
          "name": "registration_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "parent_id": {
          "name": "parent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "credit_limit": {
          "name": "credit_limit",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "credit_hold": {
          "name": "credit_hold",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "credit_hold_reason": {
          "name": "credit_hold_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "health_score": {
          "name": "health_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "health_score_updated_at": {
          "name": "health_score_updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "lifetime_value": {
          "name": "lifetime_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "first_order_date": {
          "name": "first_order_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "last_order_date": {
          "name": "last_order_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "total_orders": {
          "name": "total_orders",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_order_value": {
          "name": "total_order_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "average_order_value": {
          "name": "average_order_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "tags": {
          "name": "tags",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "custom_fields": {
          "name": "custom_fields",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "warranty_expiry_alert_opt_out": {
          "name": "warranty_expiry_alert_opt_out",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_customers_code_org_unique": {
          "name": "idx_customers_code_org_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"customers\".\"deleted_at\" IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customers_email_org_unique": {
          "name": "idx_customers_email_org_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"customers\".\"email\" IS NOT NULL AND \"customers\".\"deleted_at\" IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customers_org_status": {
          "name": "idx_customers_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customers_org_type": {
          "name": "idx_customers_org_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customers_org_health_score": {
          "name": "idx_customers_org_health_score",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "health_score",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customers_org_last_order": {
          "name": "idx_customers_org_last_order",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "last_order_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customers_parent": {
          "name": "idx_customers_parent",
          "columns": [
            {
              "expression": "parent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customers_org_created_id": {
          "name": "idx_customers_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customers_name_search": {
          "name": "idx_customers_name_search",
          "columns": [
            {
              "expression": "to_tsvector('english', \"name\")",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_customers_tags_gin": {
          "name": "idx_customers_tags_gin",
          "columns": [
            {
              "expression": "tags",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        }
      },
      "foreignKeys": {
        "customers_organization_id_organizations_id_fk": {
          "name": "customers_organization_id_organizations_id_fk",
          "tableFrom": "customers",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "customers_parent_id_customers_id_fk": {
          "name": "customers_parent_id_customers_id_fk",
          "tableFrom": "customers",
          "tableTo": "customers",
          "columnsFrom": [
            "parent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "customers_select_policy": {
          "name": "customers_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "customers_insert_policy": {
          "name": "customers_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "customers_update_policy": {
          "name": "customers_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "customers_delete_policy": {
          "name": "customers_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "health_score_range": {
          "name": "health_score_range",
          "value": "\"customers\".\"health_score\" IS NULL OR (\"customers\".\"health_score\" >= $1 AND \"customers\".\"health_score\" <= $2)"
        },
        "parent_not_self": {
          "name": "parent_not_self",
          "value": "\"customers\".\"parent_id\" IS NULL OR \"customers\".\"parent_id\" != \"customers\".\"id\""
        }
      },
      "isRLSEnabled": false
    },
    "public.customer_action_plans": {
      "name": "customer_action_plans",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "priority": {
          "name": "priority",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "is_completed": {
          "name": "is_completed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_by": {
          "name": "completed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "due_date": {
          "name": "due_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_customer_action_plans_org": {
          "name": "idx_customer_action_plans_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_action_plans_customer": {
          "name": "idx_customer_action_plans_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_action_plans_customer_active": {
          "name": "idx_customer_action_plans_customer_active",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_completed",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_action_plans_priority": {
          "name": "idx_customer_action_plans_priority",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "priority",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_completed",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_action_plans_due_date": {
          "name": "idx_customer_action_plans_due_date",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "due_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_completed",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "customer_action_plans_organization_id_organizations_id_fk": {
          "name": "customer_action_plans_organization_id_organizations_id_fk",
          "tableFrom": "customer_action_plans",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "customer_action_plans_customer_id_customers_id_fk": {
          "name": "customer_action_plans_customer_id_customers_id_fk",
          "tableFrom": "customer_action_plans",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "customer_action_plans_completed_by_users_id_fk": {
          "name": "customer_action_plans_completed_by_users_id_fk",
          "tableFrom": "customer_action_plans",
          "tableTo": "users",
          "columnsFrom": [
            "completed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "customer_action_plans_select_policy": {
          "name": "customer_action_plans_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "customer_action_plans_insert_policy": {
          "name": "customer_action_plans_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "customer_action_plans_update_policy": {
          "name": "customer_action_plans_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "customer_action_plans_delete_policy": {
          "name": "customer_action_plans_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.categories": {
      "name": "categories",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "parent_id": {
          "name": "parent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "default_warranty_policy_id": {
          "name": "default_warranty_policy_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_categories_name_parent_org": {
          "name": "idx_categories_name_parent_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "parent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"categories\".\"parent_id\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_categories_name_root_org": {
          "name": "idx_categories_name_root_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"categories\".\"parent_id\" IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_categories_org_active": {
          "name": "idx_categories_org_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_categories_parent": {
          "name": "idx_categories_parent",
          "columns": [
            {
              "expression": "parent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_categories_org_sort": {
          "name": "idx_categories_org_sort",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "sort_order",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_categories_warranty_policy": {
          "name": "idx_categories_warranty_policy",
          "columns": [
            {
              "expression": "default_warranty_policy_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "categories_organization_id_organizations_id_fk": {
          "name": "categories_organization_id_organizations_id_fk",
          "tableFrom": "categories",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "categories_select_policy": {
          "name": "categories_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "categories_insert_policy": {
          "name": "categories_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "categories_update_policy": {
          "name": "categories_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "categories_delete_policy": {
          "name": "categories_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "category_parent_not_self": {
          "name": "category_parent_not_self",
          "value": "\"categories\".\"parent_id\" IS NULL OR \"categories\".\"parent_id\" != \"categories\".\"id\""
        }
      },
      "isRLSEnabled": false
    },
    "public.products": {
      "name": "products",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "sku": {
          "name": "sku",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "barcode": {
          "name": "barcode",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category_id": {
          "name": "category_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "product_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'physical'"
        },
        "status": {
          "name": "status",
          "type": "product_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "is_serialized": {
          "name": "is_serialized",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "track_inventory": {
          "name": "track_inventory",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "base_price": {
          "name": "base_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "cost_price": {
          "name": "cost_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "tax_type": {
          "name": "tax_type",
          "type": "tax_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'gst'"
        },
        "weight": {
          "name": "weight",
          "type": "numeric(8, 3)",
          "primaryKey": false,
          "notNull": false
        },
        "dimensions": {
          "name": "dimensions",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "specifications": {
          "name": "specifications",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "seo_title": {
          "name": "seo_title",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "seo_description": {
          "name": "seo_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tags": {
          "name": "tags",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "xero_item_id": {
          "name": "xero_item_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "pricing": {
          "name": "pricing",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "reorder_point": {
          "name": "reorder_point",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "reorder_qty": {
          "name": "reorder_qty",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "warranty_policy_id": {
          "name": "warranty_policy_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "is_sellable": {
          "name": "is_sellable",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "is_purchasable": {
          "name": "is_purchasable",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_products_sku_org_unique": {
          "name": "idx_products_sku_org_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "sku",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"products\".\"deleted_at\" IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_barcode_org_unique": {
          "name": "idx_products_barcode_org_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "barcode",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"products\".\"barcode\" IS NOT NULL AND \"products\".\"deleted_at\" IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_org_status": {
          "name": "idx_products_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_org_active": {
          "name": "idx_products_org_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_org_category": {
          "name": "idx_products_org_category",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "category_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_org_type": {
          "name": "idx_products_org_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_category": {
          "name": "idx_products_category",
          "columns": [
            {
              "expression": "category_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_warranty_policy": {
          "name": "idx_products_warranty_policy",
          "columns": [
            {
              "expression": "warranty_policy_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_org_created_id": {
          "name": "idx_products_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_name_search": {
          "name": "idx_products_name_search",
          "columns": [
            {
              "expression": "to_tsvector('english', \"name\")",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_products_sku_search": {
          "name": "idx_products_sku_search",
          "columns": [
            {
              "expression": "to_tsvector('english', \"sku\")",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_products_tags_gin": {
          "name": "idx_products_tags_gin",
          "columns": [
            {
              "expression": "tags",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        }
      },
      "foreignKeys": {
        "products_organization_id_organizations_id_fk": {
          "name": "products_organization_id_organizations_id_fk",
          "tableFrom": "products",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "products_category_id_categories_id_fk": {
          "name": "products_category_id_categories_id_fk",
          "tableFrom": "products",
          "tableTo": "categories",
          "columnsFrom": [
            "category_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "products_warranty_policy_id_warranty_policies_id_fk": {
          "name": "products_warranty_policy_id_warranty_policies_id_fk",
          "tableFrom": "products",
          "tableTo": "warranty_policies",
          "columnsFrom": [
            "warranty_policy_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "products_select_policy": {
          "name": "products_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "products_insert_policy": {
          "name": "products_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "products_update_policy": {
          "name": "products_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "products_delete_policy": {
          "name": "products_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "product_base_price_non_negative": {
          "name": "product_base_price_non_negative",
          "value": "\"products\".\"base_price\" >= 0"
        },
        "product_cost_price_non_negative": {
          "name": "product_cost_price_non_negative",
          "value": "\"products\".\"cost_price\" IS NULL OR \"products\".\"cost_price\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.product_attribute_values": {
      "name": "product_attribute_values",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "attribute_id": {
          "name": "attribute_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_product_attribute_values_unique": {
          "name": "idx_product_attribute_values_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "attribute_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_attribute_values_org_product": {
          "name": "idx_product_attribute_values_org_product",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_attribute_values_org_attribute": {
          "name": "idx_product_attribute_values_org_attribute",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "attribute_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_attribute_values_value": {
          "name": "idx_product_attribute_values_value",
          "columns": [
            {
              "expression": "value",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_attribute_values_organization_id_organizations_id_fk": {
          "name": "product_attribute_values_organization_id_organizations_id_fk",
          "tableFrom": "product_attribute_values",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "product_attribute_values_product_id_products_id_fk": {
          "name": "product_attribute_values_product_id_products_id_fk",
          "tableFrom": "product_attribute_values",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "product_attribute_values_attribute_id_product_attributes_id_fk": {
          "name": "product_attribute_values_attribute_id_product_attributes_id_fk",
          "tableFrom": "product_attribute_values",
          "tableTo": "product_attributes",
          "columnsFrom": [
            "attribute_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_attribute_values_select_policy": {
          "name": "product_attribute_values_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_attribute_values_insert_policy": {
          "name": "product_attribute_values_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_attribute_values_update_policy": {
          "name": "product_attribute_values_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_attribute_values_delete_policy": {
          "name": "product_attribute_values_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_attributes": {
      "name": "product_attributes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "attribute_type": {
          "name": "attribute_type",
          "type": "attribute_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "options": {
          "name": "options",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "is_required": {
          "name": "is_required",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_filterable": {
          "name": "is_filterable",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_searchable": {
          "name": "is_searchable",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "category_ids": {
          "name": "category_ids",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_product_attributes_name_org": {
          "name": "idx_product_attributes_name_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_attributes_org_active": {
          "name": "idx_product_attributes_org_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_attributes_org_type": {
          "name": "idx_product_attributes_org_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "attribute_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_attributes_org_filterable": {
          "name": "idx_product_attributes_org_filterable",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_filterable",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_attributes_org_sort": {
          "name": "idx_product_attributes_org_sort",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "sort_order",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_attributes_organization_id_organizations_id_fk": {
          "name": "product_attributes_organization_id_organizations_id_fk",
          "tableFrom": "product_attributes",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_attributes_select_policy": {
          "name": "product_attributes_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_attributes_insert_policy": {
          "name": "product_attributes_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_attributes_update_policy": {
          "name": "product_attributes_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_attributes_delete_policy": {
          "name": "product_attributes_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_bundles": {
      "name": "product_bundles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "bundle_product_id": {
          "name": "bundle_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "component_product_id": {
          "name": "component_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "is_optional": {
          "name": "is_optional",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_bundles_bundle_component_org": {
          "name": "idx_bundles_bundle_component_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "bundle_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "component_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_bundles_org_bundle": {
          "name": "idx_bundles_org_bundle",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "bundle_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_bundles_org_component": {
          "name": "idx_bundles_org_component",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "component_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_bundles_bundle_sort": {
          "name": "idx_bundles_bundle_sort",
          "columns": [
            {
              "expression": "bundle_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "sort_order",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_bundles_organization_id_organizations_id_fk": {
          "name": "product_bundles_organization_id_organizations_id_fk",
          "tableFrom": "product_bundles",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "product_bundles_bundle_product_id_products_id_fk": {
          "name": "product_bundles_bundle_product_id_products_id_fk",
          "tableFrom": "product_bundles",
          "tableTo": "products",
          "columnsFrom": [
            "bundle_product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "product_bundles_component_product_id_products_id_fk": {
          "name": "product_bundles_component_product_id_products_id_fk",
          "tableFrom": "product_bundles",
          "tableTo": "products",
          "columnsFrom": [
            "component_product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_bundles_select_policy": {
          "name": "product_bundles_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_bundles_insert_policy": {
          "name": "product_bundles_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_bundles_update_policy": {
          "name": "product_bundles_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_bundles_delete_policy": {
          "name": "product_bundles_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "bundle_quantity_positive": {
          "name": "bundle_quantity_positive",
          "value": "\"product_bundles\".\"quantity\" > 0"
        },
        "bundle_not_self_reference": {
          "name": "bundle_not_self_reference",
          "value": "\"product_bundles\".\"bundle_product_id\" != \"product_bundles\".\"component_product_id\""
        }
      },
      "isRLSEnabled": false
    },
    "public.product_images": {
      "name": "product_images",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "image_url": {
          "name": "image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "alt_text": {
          "name": "alt_text",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "caption": {
          "name": "caption",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_primary": {
          "name": "is_primary",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "file_size": {
          "name": "file_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "dimensions": {
          "name": "dimensions",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "uploaded_by": {
          "name": "uploaded_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_product_images_org_product": {
          "name": "idx_product_images_org_product",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_images_product_sort": {
          "name": "idx_product_images_product_sort",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "sort_order",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_images_product_primary": {
          "name": "idx_product_images_product_primary",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_primary",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_images_organization_id_organizations_id_fk": {
          "name": "product_images_organization_id_organizations_id_fk",
          "tableFrom": "product_images",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "product_images_product_id_products_id_fk": {
          "name": "product_images_product_id_products_id_fk",
          "tableFrom": "product_images",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_images_select_policy": {
          "name": "product_images_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_images_insert_policy": {
          "name": "product_images_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_images_update_policy": {
          "name": "product_images_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_images_delete_policy": {
          "name": "product_images_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "image_file_size_positive": {
          "name": "image_file_size_positive",
          "value": "\"product_images\".\"file_size\" IS NULL OR \"product_images\".\"file_size\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.customer_product_prices": {
      "name": "customer_product_prices",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "price": {
          "name": "price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "discount_percent": {
          "name": "discount_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "valid_from": {
          "name": "valid_from",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "valid_to": {
          "name": "valid_to",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_customer_prices_unique": {
          "name": "idx_customer_prices_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_prices_org_customer": {
          "name": "idx_customer_prices_org_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_prices_org_product": {
          "name": "idx_customer_prices_org_product",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_prices_valid_from": {
          "name": "idx_customer_prices_valid_from",
          "columns": [
            {
              "expression": "valid_from",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_customer_prices_valid_to": {
          "name": "idx_customer_prices_valid_to",
          "columns": [
            {
              "expression": "valid_to",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "customer_product_prices_organization_id_organizations_id_fk": {
          "name": "customer_product_prices_organization_id_organizations_id_fk",
          "tableFrom": "customer_product_prices",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "customer_product_prices_customer_id_customers_id_fk": {
          "name": "customer_product_prices_customer_id_customers_id_fk",
          "tableFrom": "customer_product_prices",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "customer_product_prices_product_id_products_id_fk": {
          "name": "customer_product_prices_product_id_products_id_fk",
          "tableFrom": "customer_product_prices",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "customer_product_prices_select_policy": {
          "name": "customer_product_prices_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "customer_product_prices_insert_policy": {
          "name": "customer_product_prices_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "customer_product_prices_update_policy": {
          "name": "customer_product_prices_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "customer_product_prices_delete_policy": {
          "name": "customer_product_prices_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "customer_price_valid_to_after_from": {
          "name": "customer_price_valid_to_after_from",
          "value": "\"customer_product_prices\".\"valid_to\" IS NULL OR \"customer_product_prices\".\"valid_from\" IS NULL OR \"customer_product_prices\".\"valid_to\" > \"customer_product_prices\".\"valid_from\""
        },
        "customer_price_non_negative": {
          "name": "customer_price_non_negative",
          "value": "\"customer_product_prices\".\"price\" >= 0"
        },
        "customer_price_discount_range": {
          "name": "customer_price_discount_range",
          "value": "\"customer_product_prices\".\"discount_percent\" IS NULL OR (\"customer_product_prices\".\"discount_percent\" >= $1 AND \"customer_product_prices\".\"discount_percent\" <= $2)"
        }
      },
      "isRLSEnabled": false
    },
    "public.price_history": {
      "name": "price_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "change_type": {
          "name": "change_type",
          "type": "price_change_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "previous_price": {
          "name": "previous_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "new_price": {
          "name": "new_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "previous_discount_percent": {
          "name": "previous_discount_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "new_discount_percent": {
          "name": "new_discount_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "tier_id": {
          "name": "tier_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "changed_by": {
          "name": "changed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "changed_at": {
          "name": "changed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_price_history_org_product": {
          "name": "idx_price_history_org_product",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_history_changed_at": {
          "name": "idx_price_history_changed_at",
          "columns": [
            {
              "expression": "changed_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_history_change_type": {
          "name": "idx_price_history_change_type",
          "columns": [
            {
              "expression": "change_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_history_org_customer": {
          "name": "idx_price_history_org_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "price_history_organization_id_organizations_id_fk": {
          "name": "price_history_organization_id_organizations_id_fk",
          "tableFrom": "price_history",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "price_history_product_id_products_id_fk": {
          "name": "price_history_product_id_products_id_fk",
          "tableFrom": "price_history",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "price_history_select_policy": {
          "name": "price_history_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "price_history_insert_policy": {
          "name": "price_history_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "price_history_update_policy": {
          "name": "price_history_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "price_history_delete_policy": {
          "name": "price_history_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_price_tiers": {
      "name": "product_price_tiers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "min_quantity": {
          "name": "min_quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "max_quantity": {
          "name": "max_quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "price": {
          "name": "price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "discount_percent": {
          "name": "discount_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_price_tiers_org_product": {
          "name": "idx_price_tiers_org_product",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_tiers_product_qty": {
          "name": "idx_price_tiers_product_qty",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "min_quantity",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_tiers_org_active": {
          "name": "idx_price_tiers_org_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_price_tiers_organization_id_organizations_id_fk": {
          "name": "product_price_tiers_organization_id_organizations_id_fk",
          "tableFrom": "product_price_tiers",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "product_price_tiers_product_id_products_id_fk": {
          "name": "product_price_tiers_product_id_products_id_fk",
          "tableFrom": "product_price_tiers",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_price_tiers_select_policy": {
          "name": "product_price_tiers_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_price_tiers_insert_policy": {
          "name": "product_price_tiers_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_price_tiers_update_policy": {
          "name": "product_price_tiers_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_price_tiers_delete_policy": {
          "name": "product_price_tiers_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "price_tier_min_qty_positive": {
          "name": "price_tier_min_qty_positive",
          "value": "\"product_price_tiers\".\"min_quantity\" > 0"
        },
        "price_tier_max_qty_valid": {
          "name": "price_tier_max_qty_valid",
          "value": "\"product_price_tiers\".\"max_quantity\" IS NULL OR \"product_price_tiers\".\"min_quantity\" IS NULL OR \"product_price_tiers\".\"max_quantity\" > \"product_price_tiers\".\"min_quantity\""
        },
        "price_tier_price_non_negative": {
          "name": "price_tier_price_non_negative",
          "value": "\"product_price_tiers\".\"price\" >= 0"
        },
        "price_tier_discount_range": {
          "name": "price_tier_discount_range",
          "value": "\"product_price_tiers\".\"discount_percent\" IS NULL OR (\"product_price_tiers\".\"discount_percent\" >= $1 AND \"product_price_tiers\".\"discount_percent\" <= $2)"
        }
      },
      "isRLSEnabled": false
    },
    "public.product_relations": {
      "name": "product_relations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "related_product_id": {
          "name": "related_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "relation_type": {
          "name": "relation_type",
          "type": "product_relation_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_product_relations_unique": {
          "name": "idx_product_relations_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "related_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "relation_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_relations_org_product": {
          "name": "idx_product_relations_org_product",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_relations_org_related": {
          "name": "idx_product_relations_org_related",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "related_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_relations_org_type": {
          "name": "idx_product_relations_org_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "relation_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_relations_product_sort": {
          "name": "idx_product_relations_product_sort",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "sort_order",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_relations_organization_id_organizations_id_fk": {
          "name": "product_relations_organization_id_organizations_id_fk",
          "tableFrom": "product_relations",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "product_relations_product_id_products_id_fk": {
          "name": "product_relations_product_id_products_id_fk",
          "tableFrom": "product_relations",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "product_relations_related_product_id_products_id_fk": {
          "name": "product_relations_related_product_id_products_id_fk",
          "tableFrom": "product_relations",
          "tableTo": "products",
          "columnsFrom": [
            "related_product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_relations_select_policy": {
          "name": "product_relations_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_relations_insert_policy": {
          "name": "product_relations_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_relations_update_policy": {
          "name": "product_relations_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "product_relations_delete_policy": {
          "name": "product_relations_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "product_not_self_relation": {
          "name": "product_not_self_relation",
          "value": "\"product_relations\".\"product_id\" != \"product_relations\".\"related_product_id\""
        }
      },
      "isRLSEnabled": false
    },
    "public.order_line_items": {
      "name": "order_line_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "line_number": {
          "name": "line_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sku": {
          "name": "sku",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "unit_price": {
          "name": "unit_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "discount_percent": {
          "name": "discount_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "discount_amount": {
          "name": "discount_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "tax_type": {
          "name": "tax_type",
          "type": "tax_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'gst'"
        },
        "tax_amount": {
          "name": "tax_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "line_total": {
          "name": "line_total",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "pick_status": {
          "name": "pick_status",
          "type": "order_line_item_pick_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'not_picked'"
        },
        "picked_at": {
          "name": "picked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "picked_by": {
          "name": "picked_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "qty_picked": {
          "name": "qty_picked",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "qty_shipped": {
          "name": "qty_shipped",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "qty_delivered": {
          "name": "qty_delivered",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "allocated_serial_numbers": {
          "name": "allocated_serial_numbers",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_order_items_order": {
          "name": "idx_order_items_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_order_items_product": {
          "name": "idx_order_items_product",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_order_items_org_order": {
          "name": "idx_order_items_org_order",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_order_items_org_pick_status": {
          "name": "idx_order_items_org_pick_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "pick_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_order_items_org_created": {
          "name": "idx_order_items_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "order_line_items_organization_id_organizations_id_fk": {
          "name": "order_line_items_organization_id_organizations_id_fk",
          "tableFrom": "order_line_items",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "order_line_items_order_id_orders_id_fk": {
          "name": "order_line_items_order_id_orders_id_fk",
          "tableFrom": "order_line_items",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "order_line_items_product_id_products_id_fk": {
          "name": "order_line_items_product_id_products_id_fk",
          "tableFrom": "order_line_items",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "order_line_items_picked_by_users_id_fk": {
          "name": "order_line_items_picked_by_users_id_fk",
          "tableFrom": "order_line_items",
          "tableTo": "users",
          "columnsFrom": [
            "picked_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "order_line_items_select_policy": {
          "name": "order_line_items_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_line_items_insert_policy": {
          "name": "order_line_items_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_line_items_update_policy": {
          "name": "order_line_items_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_line_items_delete_policy": {
          "name": "order_line_items_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_line_items_portal_select_policy": {
          "name": "order_line_items_portal_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(\n        \"order_line_items\".\"organization_id\" = (SELECT current_setting('app.organization_id', true)::uuid)\n        OR EXISTS (\n          SELECT 1 FROM orders o\n          WHERE o.id = \"order_line_items\".\"order_id\"\n            AND o.organization_id = \"order_line_items\".\"organization_id\"\n            AND (\n              EXISTS (\n                SELECT 1 FROM portal_identities pi\n                WHERE pi.auth_user_id = auth.uid()\n                  AND pi.status = 'active'\n                  AND pi.organization_id = \"order_line_items\".\"organization_id\"\n                  AND pi.scope = 'customer'\n                  AND pi.customer_id = o.customer_id\n              )\n              OR EXISTS (\n                SELECT 1 FROM portal_identities pi\n                JOIN job_assignments ja ON ja.id = pi.job_assignment_id\n                WHERE pi.auth_user_id = auth.uid()\n                  AND pi.status = 'active'\n                  AND pi.organization_id = \"order_line_items\".\"organization_id\"\n                  AND pi.scope = 'subcontractor'\n                  AND ja.order_id = o.id\n              )\n            )\n        )\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.orders": {
      "name": "orders",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_number": {
          "name": "order_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "order_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "payment_status": {
          "name": "payment_status",
          "type": "payment_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "order_date": {
          "name": "order_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "due_date": {
          "name": "due_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "shipped_date": {
          "name": "shipped_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "delivered_date": {
          "name": "delivered_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "billing_address": {
          "name": "billing_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "shipping_address": {
          "name": "shipping_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "subtotal": {
          "name": "subtotal",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "discount_amount": {
          "name": "discount_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "discount_percent": {
          "name": "discount_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "tax_amount": {
          "name": "tax_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "shipping_amount": {
          "name": "shipping_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total": {
          "name": "total",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "paid_amount": {
          "name": "paid_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "balance_due": {
          "name": "balance_due",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "paid_at": {
          "name": "paid_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_status": {
          "name": "invoice_status",
          "type": "invoice_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'draft'"
        },
        "invoice_due_date": {
          "name": "invoice_due_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_sent_at": {
          "name": "invoice_sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_viewed_at": {
          "name": "invoice_viewed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_reminder_sent_at": {
          "name": "invoice_reminder_sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_number": {
          "name": "invoice_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "internal_notes": {
          "name": "internal_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_notes": {
          "name": "customer_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "quote_pdf_url": {
          "name": "quote_pdf_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_pdf_url": {
          "name": "invoice_pdf_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "xero_invoice_id": {
          "name": "xero_invoice_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "xero_sync_status": {
          "name": "xero_sync_status",
          "type": "xero_sync_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "xero_sync_error": {
          "name": "xero_sync_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_xero_sync_at": {
          "name": "last_xero_sync_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "xero_invoice_url": {
          "name": "xero_invoice_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_orders_number_org_unique": {
          "name": "idx_orders_number_org_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "order_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"orders\".\"deleted_at\" IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_orders_org_status": {
          "name": "idx_orders_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_orders_org_payment": {
          "name": "idx_orders_org_payment",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "payment_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_orders_org_invoice_status": {
          "name": "idx_orders_org_invoice_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "invoice_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_orders_org_customer": {
          "name": "idx_orders_org_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_orders_org_date": {
          "name": "idx_orders_org_date",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "order_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_orders_org_created": {
          "name": "idx_orders_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_orders_customer": {
          "name": "idx_orders_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_orders_xero_sync": {
          "name": "idx_orders_xero_sync",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "xero_sync_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "orders_organization_id_organizations_id_fk": {
          "name": "orders_organization_id_organizations_id_fk",
          "tableFrom": "orders",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "orders_customer_id_customers_id_fk": {
          "name": "orders_customer_id_customers_id_fk",
          "tableFrom": "orders",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "orders_select_policy": {
          "name": "orders_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "orders_insert_policy": {
          "name": "orders_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "orders_update_policy": {
          "name": "orders_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "orders_delete_policy": {
          "name": "orders_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "orders_portal_select_policy": {
          "name": "orders_portal_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(\n        \"orders\".\"organization_id\" = (SELECT current_setting('app.organization_id', true)::uuid)\n        OR EXISTS (\n          SELECT 1 FROM portal_identities pi\n          WHERE pi.auth_user_id = auth.uid()\n            AND pi.status = 'active'\n            AND pi.organization_id = \"orders\".\"organization_id\"\n            AND pi.scope = 'customer'\n            AND pi.customer_id = \"orders\".\"customer_id\"\n        )\n        OR EXISTS (\n          SELECT 1 FROM portal_identities pi\n          JOIN job_assignments ja ON ja.id = pi.job_assignment_id\n          WHERE pi.auth_user_id = auth.uid()\n            AND pi.status = 'active'\n            AND pi.organization_id = \"orders\".\"organization_id\"\n            AND pi.scope = 'subcontractor'\n            AND ja.order_id = \"orders\".\"id\"\n        )\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.order_amendments": {
      "name": "order_amendments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "amendment_type": {
          "name": "amendment_type",
          "type": "amendment_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "changes": {
          "name": "changes",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "amendment_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'requested'"
        },
        "requested_at": {
          "name": "requested_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "requested_by": {
          "name": "requested_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "reviewed_at": {
          "name": "reviewed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "reviewed_by": {
          "name": "reviewed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "approval_notes": {
          "name": "approval_notes",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "applied_at": {
          "name": "applied_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "applied_by": {
          "name": "applied_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "order_version_before": {
          "name": "order_version_before",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "order_version_after": {
          "name": "order_version_after",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "order_amendments_org_idx": {
          "name": "order_amendments_org_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_amendments_order_idx": {
          "name": "order_amendments_order_idx",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_amendments_status_idx": {
          "name": "order_amendments_status_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_amendments_requested_idx": {
          "name": "order_amendments_requested_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "requested_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_amendments_org_created_idx": {
          "name": "order_amendments_org_created_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "order_amendments_organization_id_organizations_id_fk": {
          "name": "order_amendments_organization_id_organizations_id_fk",
          "tableFrom": "order_amendments",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "order_amendments_order_id_orders_id_fk": {
          "name": "order_amendments_order_id_orders_id_fk",
          "tableFrom": "order_amendments",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "order_amendments_requested_by_users_id_fk": {
          "name": "order_amendments_requested_by_users_id_fk",
          "tableFrom": "order_amendments",
          "tableTo": "users",
          "columnsFrom": [
            "requested_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "order_amendments_reviewed_by_users_id_fk": {
          "name": "order_amendments_reviewed_by_users_id_fk",
          "tableFrom": "order_amendments",
          "tableTo": "users",
          "columnsFrom": [
            "reviewed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "order_amendments_applied_by_users_id_fk": {
          "name": "order_amendments_applied_by_users_id_fk",
          "tableFrom": "order_amendments",
          "tableTo": "users",
          "columnsFrom": [
            "applied_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "order_amendments_select_policy": {
          "name": "order_amendments_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_amendments_insert_policy": {
          "name": "order_amendments_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_amendments_update_policy": {
          "name": "order_amendments_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_amendments_delete_policy": {
          "name": "order_amendments_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.order_payments": {
      "name": "order_payments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "payment_method": {
          "name": "payment_method",
          "type": "payment_method",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "payment_date": {
          "name": "payment_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "reference": {
          "name": "reference",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_refund": {
          "name": "is_refund",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "related_payment_id": {
          "name": "related_payment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "recorded_by": {
          "name": "recorded_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_order_payments_org_order": {
          "name": "idx_order_payments_org_order",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_order_payments_org_date": {
          "name": "idx_order_payments_org_date",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "payment_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_order_payments_org_method": {
          "name": "idx_order_payments_org_method",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "payment_method",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_order_payments_order": {
          "name": "idx_order_payments_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_order_payments_date": {
          "name": "idx_order_payments_date",
          "columns": [
            {
              "expression": "payment_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "order_payments_organization_id_organizations_id_fk": {
          "name": "order_payments_organization_id_organizations_id_fk",
          "tableFrom": "order_payments",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "order_payments_order_id_orders_id_fk": {
          "name": "order_payments_order_id_orders_id_fk",
          "tableFrom": "order_payments",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "order_payments_recorded_by_users_id_fk": {
          "name": "order_payments_recorded_by_users_id_fk",
          "tableFrom": "order_payments",
          "tableTo": "users",
          "columnsFrom": [
            "recorded_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "order_payments_select_policy": {
          "name": "order_payments_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_payments_insert_policy": {
          "name": "order_payments_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_payments_update_policy": {
          "name": "order_payments_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_payments_delete_policy": {
          "name": "order_payments_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.order_shipments": {
      "name": "order_shipments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "shipment_number": {
          "name": "shipment_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "shipment_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "carrier": {
          "name": "carrier",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "carrier_service": {
          "name": "carrier_service",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tracking_number": {
          "name": "tracking_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tracking_url": {
          "name": "tracking_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "shipping_address": {
          "name": "shipping_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "return_address": {
          "name": "return_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "weight": {
          "name": "weight",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "length": {
          "name": "length",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "width": {
          "name": "width",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "height": {
          "name": "height",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "package_count": {
          "name": "package_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "shipped_at": {
          "name": "shipped_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "estimated_delivery_at": {
          "name": "estimated_delivery_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "delivered_at": {
          "name": "delivered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "delivery_confirmation": {
          "name": "delivery_confirmation",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "tracking_events": {
          "name": "tracking_events",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "shipped_by": {
          "name": "shipped_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "shipping_cost": {
          "name": "shipping_cost",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "carrier_notes": {
          "name": "carrier_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "order_shipments_order_id_idx": {
          "name": "order_shipments_order_id_idx",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_shipments_status_idx": {
          "name": "order_shipments_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_shipments_org_status_idx": {
          "name": "order_shipments_org_status_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_shipments_org_created_idx": {
          "name": "order_shipments_org_created_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_shipments_tracking_number_idx": {
          "name": "order_shipments_tracking_number_idx",
          "columns": [
            {
              "expression": "tracking_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_shipments_shipped_at_idx": {
          "name": "order_shipments_shipped_at_idx",
          "columns": [
            {
              "expression": "shipped_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_shipments_org_delivered_idx": {
          "name": "order_shipments_org_delivered_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "delivered_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "order_shipments_organization_id_organizations_id_fk": {
          "name": "order_shipments_organization_id_organizations_id_fk",
          "tableFrom": "order_shipments",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "order_shipments_order_id_orders_id_fk": {
          "name": "order_shipments_order_id_orders_id_fk",
          "tableFrom": "order_shipments",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "order_shipments_shipped_by_users_id_fk": {
          "name": "order_shipments_shipped_by_users_id_fk",
          "tableFrom": "order_shipments",
          "tableTo": "users",
          "columnsFrom": [
            "shipped_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "order_shipments_select_policy": {
          "name": "order_shipments_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_shipments_insert_policy": {
          "name": "order_shipments_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_shipments_update_policy": {
          "name": "order_shipments_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_shipments_delete_policy": {
          "name": "order_shipments_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.shipment_items": {
      "name": "shipment_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "shipment_id": {
          "name": "shipment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_line_item_id": {
          "name": "order_line_item_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "serial_numbers": {
          "name": "serial_numbers",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "lot_number": {
          "name": "lot_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "shipment_items_shipment_id_idx": {
          "name": "shipment_items_shipment_id_idx",
          "columns": [
            {
              "expression": "shipment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "shipment_items_line_item_id_idx": {
          "name": "shipment_items_line_item_id_idx",
          "columns": [
            {
              "expression": "order_line_item_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "shipment_items_org_created_idx": {
          "name": "shipment_items_org_created_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "shipment_items_organization_id_organizations_id_fk": {
          "name": "shipment_items_organization_id_organizations_id_fk",
          "tableFrom": "shipment_items",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "shipment_items_shipment_id_order_shipments_id_fk": {
          "name": "shipment_items_shipment_id_order_shipments_id_fk",
          "tableFrom": "shipment_items",
          "tableTo": "order_shipments",
          "columnsFrom": [
            "shipment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "shipment_items_order_line_item_id_order_line_items_id_fk": {
          "name": "shipment_items_order_line_item_id_order_line_items_id_fk",
          "tableFrom": "shipment_items",
          "tableTo": "order_line_items",
          "columnsFrom": [
            "order_line_item_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "shipment_items_select_policy": {
          "name": "shipment_items_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "shipment_items_insert_policy": {
          "name": "shipment_items_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "shipment_items_update_policy": {
          "name": "shipment_items_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "shipment_items_delete_policy": {
          "name": "shipment_items_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.order_template_items": {
      "name": "order_template_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "template_id": {
          "name": "template_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "line_number": {
          "name": "line_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sort_order": {
          "name": "sort_order",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "sku": {
          "name": "sku",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "default_quantity": {
          "name": "default_quantity",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "fixed_unit_price": {
          "name": "fixed_unit_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "use_current_price": {
          "name": "use_current_price",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "discount_percent": {
          "name": "discount_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "discount_amount": {
          "name": "discount_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "tax_type": {
          "name": "tax_type",
          "type": "tax_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'gst'"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "order_template_items_template_idx": {
          "name": "order_template_items_template_idx",
          "columns": [
            {
              "expression": "template_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_template_items_product_idx": {
          "name": "order_template_items_product_idx",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_template_items_org_created_idx": {
          "name": "order_template_items_org_created_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "order_template_items_organization_id_organizations_id_fk": {
          "name": "order_template_items_organization_id_organizations_id_fk",
          "tableFrom": "order_template_items",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "order_template_items_template_id_order_templates_id_fk": {
          "name": "order_template_items_template_id_order_templates_id_fk",
          "tableFrom": "order_template_items",
          "tableTo": "order_templates",
          "columnsFrom": [
            "template_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "order_template_items_product_id_products_id_fk": {
          "name": "order_template_items_product_id_products_id_fk",
          "tableFrom": "order_template_items",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "order_template_items_select_policy": {
          "name": "order_template_items_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_template_items_insert_policy": {
          "name": "order_template_items_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_template_items_update_policy": {
          "name": "order_template_items_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_template_items_delete_policy": {
          "name": "order_template_items_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.order_templates": {
      "name": "order_templates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "is_global": {
          "name": "is_global",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "default_customer_id": {
          "name": "default_customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "default_values": {
          "name": "default_values",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "order_templates_org_idx": {
          "name": "order_templates_org_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_templates_org_active_idx": {
          "name": "order_templates_org_active_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_templates_org_created_idx": {
          "name": "order_templates_org_created_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "order_templates_name_idx": {
          "name": "order_templates_name_idx",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "order_templates_organization_id_organizations_id_fk": {
          "name": "order_templates_organization_id_organizations_id_fk",
          "tableFrom": "order_templates",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "order_templates_default_customer_id_customers_id_fk": {
          "name": "order_templates_default_customer_id_customers_id_fk",
          "tableFrom": "order_templates",
          "tableTo": "customers",
          "columnsFrom": [
            "default_customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "order_templates_select_policy": {
          "name": "order_templates_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_templates_insert_policy": {
          "name": "order_templates_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_templates_update_policy": {
          "name": "order_templates_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "order_templates_delete_policy": {
          "name": "order_templates_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.credit_notes": {
      "name": "credit_notes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "credit_note_number": {
          "name": "credit_note_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "gst_amount": {
          "name": "gst_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "credit_note_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "applied_to_order_id": {
          "name": "applied_to_order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "internal_notes": {
          "name": "internal_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_credit_notes_org_status": {
          "name": "idx_credit_notes_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_credit_notes_org_customer": {
          "name": "idx_credit_notes_org_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_credit_notes_customer": {
          "name": "idx_credit_notes_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_credit_notes_order": {
          "name": "idx_credit_notes_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "credit_notes_organization_id_organizations_id_fk": {
          "name": "credit_notes_organization_id_organizations_id_fk",
          "tableFrom": "credit_notes",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "credit_notes_order_id_orders_id_fk": {
          "name": "credit_notes_order_id_orders_id_fk",
          "tableFrom": "credit_notes",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "credit_notes_customer_id_customers_id_fk": {
          "name": "credit_notes_customer_id_customers_id_fk",
          "tableFrom": "credit_notes",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "credit_notes_applied_to_order_id_orders_id_fk": {
          "name": "credit_notes_applied_to_order_id_orders_id_fk",
          "tableFrom": "credit_notes",
          "tableTo": "orders",
          "columnsFrom": [
            "applied_to_order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "credit_notes_select_policy": {
          "name": "credit_notes_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "credit_notes_insert_policy": {
          "name": "credit_notes_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "credit_notes_update_policy": {
          "name": "credit_notes_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "credit_notes_delete_policy": {
          "name": "credit_notes_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.payment_reminder_settings": {
      "name": "payment_reminder_settings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "is_enabled": {
          "name": "is_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "default_template_id": {
          "name": "default_template_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_payment_reminder_settings_org": {
          "name": "idx_payment_reminder_settings_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_payment_reminder_settings_org_enabled": {
          "name": "idx_payment_reminder_settings_org_enabled",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_enabled",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "payment_reminder_settings_organization_id_organizations_id_fk": {
          "name": "payment_reminder_settings_organization_id_organizations_id_fk",
          "tableFrom": "payment_reminder_settings",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "payment_reminder_settings_default_template_id_reminder_templates_id_fk": {
          "name": "payment_reminder_settings_default_template_id_reminder_templates_id_fk",
          "tableFrom": "payment_reminder_settings",
          "tableTo": "reminder_templates",
          "columnsFrom": [
            "default_template_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "payment_reminder_settings_select_policy": {
          "name": "payment_reminder_settings_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "payment_reminder_settings_insert_policy": {
          "name": "payment_reminder_settings_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "payment_reminder_settings_update_policy": {
          "name": "payment_reminder_settings_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "payment_reminder_settings_delete_policy": {
          "name": "payment_reminder_settings_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.reminder_history": {
      "name": "reminder_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "template_id": {
          "name": "template_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "template_name": {
          "name": "template_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "days_overdue": {
          "name": "days_overdue",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "subject_sent": {
          "name": "subject_sent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "body_sent": {
          "name": "body_sent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "recipient_email": {
          "name": "recipient_email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "delivery_status": {
          "name": "delivery_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'sent'"
        },
        "delivery_error": {
          "name": "delivery_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_manual_send": {
          "name": "is_manual_send",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_reminder_history_org_order": {
          "name": "idx_reminder_history_org_order",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_reminder_history_org_date": {
          "name": "idx_reminder_history_org_date",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "sent_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_reminder_history_order": {
          "name": "idx_reminder_history_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_reminder_history_template": {
          "name": "idx_reminder_history_template",
          "columns": [
            {
              "expression": "template_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "reminder_history_organization_id_organizations_id_fk": {
          "name": "reminder_history_organization_id_organizations_id_fk",
          "tableFrom": "reminder_history",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "reminder_history_order_id_orders_id_fk": {
          "name": "reminder_history_order_id_orders_id_fk",
          "tableFrom": "reminder_history",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "reminder_history_template_id_reminder_templates_id_fk": {
          "name": "reminder_history_template_id_reminder_templates_id_fk",
          "tableFrom": "reminder_history",
          "tableTo": "reminder_templates",
          "columnsFrom": [
            "template_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "reminder_history_select_policy": {
          "name": "reminder_history_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "reminder_history_insert_policy": {
          "name": "reminder_history_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "reminder_history_update_policy": {
          "name": "reminder_history_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "reminder_history_delete_policy": {
          "name": "reminder_history_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.reminder_templates": {
      "name": "reminder_templates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "days_overdue": {
          "name": "days_overdue",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "body": {
          "name": "body",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_reminder_templates_org_active": {
          "name": "idx_reminder_templates_org_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_reminder_templates_org_days": {
          "name": "idx_reminder_templates_org_days",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "days_overdue",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "reminder_templates_organization_id_organizations_id_fk": {
          "name": "reminder_templates_organization_id_organizations_id_fk",
          "tableFrom": "reminder_templates",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "reminder_templates_select_policy": {
          "name": "reminder_templates_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "reminder_templates_insert_policy": {
          "name": "reminder_templates_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "reminder_templates_update_policy": {
          "name": "reminder_templates_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "reminder_templates_delete_policy": {
          "name": "reminder_templates_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.payment_schedules": {
      "name": "payment_schedules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "plan_type": {
          "name": "plan_type",
          "type": "payment_plan_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'fifty_fifty'"
        },
        "installment_no": {
          "name": "installment_no",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "due_date": {
          "name": "due_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "gst_amount": {
          "name": "gst_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "status": {
          "name": "status",
          "type": "installment_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "paid_amount": {
          "name": "paid_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "paid_at": {
          "name": "paid_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "payment_reference": {
          "name": "payment_reference",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_payment_schedules_org_order": {
          "name": "idx_payment_schedules_org_order",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_payment_schedules_org_status": {
          "name": "idx_payment_schedules_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_payment_schedules_org_due": {
          "name": "idx_payment_schedules_org_due",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "due_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_payment_schedules_order": {
          "name": "idx_payment_schedules_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_payment_schedules_status_due": {
          "name": "idx_payment_schedules_status_due",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "due_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "payment_schedules_organization_id_organizations_id_fk": {
          "name": "payment_schedules_organization_id_organizations_id_fk",
          "tableFrom": "payment_schedules",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "payment_schedules_order_id_orders_id_fk": {
          "name": "payment_schedules_order_id_orders_id_fk",
          "tableFrom": "payment_schedules",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "payment_schedules_select_policy": {
          "name": "payment_schedules_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "payment_schedules_insert_policy": {
          "name": "payment_schedules_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "payment_schedules_update_policy": {
          "name": "payment_schedules_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "payment_schedules_delete_policy": {
          "name": "payment_schedules_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.deferred_revenue": {
      "name": "deferred_revenue",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "original_amount": {
          "name": "original_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "remaining_amount": {
          "name": "remaining_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "recognized_amount": {
          "name": "recognized_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "deferral_date": {
          "name": "deferral_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "expected_recognition_date": {
          "name": "expected_recognition_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "deferred_revenue_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'deferred'"
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_deferred_revenue_order": {
          "name": "idx_deferred_revenue_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_deferred_revenue_status": {
          "name": "idx_deferred_revenue_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_deferred_revenue_date": {
          "name": "idx_deferred_revenue_date",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "deferral_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "deferred_revenue_organization_id_organizations_id_fk": {
          "name": "deferred_revenue_organization_id_organizations_id_fk",
          "tableFrom": "deferred_revenue",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "deferred_revenue_order_id_orders_id_fk": {
          "name": "deferred_revenue_order_id_orders_id_fk",
          "tableFrom": "deferred_revenue",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "deferred_revenue_select_policy": {
          "name": "deferred_revenue_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "deferred_revenue_insert_policy": {
          "name": "deferred_revenue_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "deferred_revenue_update_policy": {
          "name": "deferred_revenue_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "deferred_revenue_delete_policy": {
          "name": "deferred_revenue_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.revenue_recognition": {
      "name": "revenue_recognition",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "recognition_type": {
          "name": "recognition_type",
          "type": "recognition_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "milestone_name": {
          "name": "milestone_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "recognized_amount": {
          "name": "recognized_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "recognition_date": {
          "name": "recognition_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "state": {
          "name": "state",
          "type": "recognition_state",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "xero_sync_attempts": {
          "name": "xero_sync_attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "xero_sync_error": {
          "name": "xero_sync_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_xero_sync_at": {
          "name": "last_xero_sync_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "xero_journal_id": {
          "name": "xero_journal_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_revenue_recognition_order": {
          "name": "idx_revenue_recognition_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_revenue_recognition_state": {
          "name": "idx_revenue_recognition_state",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "state",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_revenue_recognition_date": {
          "name": "idx_revenue_recognition_date",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "recognition_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_revenue_recognition_sync_failed": {
          "name": "idx_revenue_recognition_sync_failed",
          "columns": [
            {
              "expression": "state",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "xero_sync_attempts",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "revenue_recognition_organization_id_organizations_id_fk": {
          "name": "revenue_recognition_organization_id_organizations_id_fk",
          "tableFrom": "revenue_recognition",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "revenue_recognition_order_id_orders_id_fk": {
          "name": "revenue_recognition_order_id_orders_id_fk",
          "tableFrom": "revenue_recognition",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "revenue_recognition_select_policy": {
          "name": "revenue_recognition_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "revenue_recognition_insert_policy": {
          "name": "revenue_recognition_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "revenue_recognition_update_policy": {
          "name": "revenue_recognition_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "revenue_recognition_delete_policy": {
          "name": "revenue_recognition_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.statement_history": {
      "name": "statement_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "opening_balance": {
          "name": "opening_balance",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "closing_balance": {
          "name": "closing_balance",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "invoice_count": {
          "name": "invoice_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "payment_count": {
          "name": "payment_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "credit_note_count": {
          "name": "credit_note_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_invoiced": {
          "name": "total_invoiced",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_payments": {
          "name": "total_payments",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_credits": {
          "name": "total_credits",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_gst": {
          "name": "total_gst",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "pdf_path": {
          "name": "pdf_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "sent_to_email": {
          "name": "sent_to_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_statement_history_org_customer": {
          "name": "idx_statement_history_org_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_statement_history_org_date": {
          "name": "idx_statement_history_org_date",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "end_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_statement_history_org_created": {
          "name": "idx_statement_history_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_statement_history_customer": {
          "name": "idx_statement_history_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_statement_history_customer_date": {
          "name": "idx_statement_history_customer_date",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "end_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "statement_history_organization_id_organizations_id_fk": {
          "name": "statement_history_organization_id_organizations_id_fk",
          "tableFrom": "statement_history",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "statement_history_customer_id_customers_id_fk": {
          "name": "statement_history_customer_id_customers_id_fk",
          "tableFrom": "statement_history",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "statement_history_select_policy": {
          "name": "statement_history_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "statement_history_insert_policy": {
          "name": "statement_history_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "statement_history_update_policy": {
          "name": "statement_history_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "statement_history_delete_policy": {
          "name": "statement_history_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.opportunities": {
      "name": "opportunities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "contact_id": {
          "name": "contact_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "assigned_to": {
          "name": "assigned_to",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "stage": {
          "name": "stage",
          "type": "opportunity_stage",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'new'"
        },
        "probability": {
          "name": "probability",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": 10
        },
        "value": {
          "name": "value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "weighted_value": {
          "name": "weighted_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "expected_close_date": {
          "name": "expected_close_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "actual_close_date": {
          "name": "actual_close_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "follow_up_date": {
          "name": "follow_up_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "quote_expires_at": {
          "name": "quote_expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "quote_pdf_url": {
          "name": "quote_pdf_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "win_loss_reason_id": {
          "name": "win_loss_reason_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "lost_reason": {
          "name": "lost_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "lost_notes": {
          "name": "lost_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "competitor_name": {
          "name": "competitor_name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "days_in_stage": {
          "name": "days_in_stage",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "tags": {
          "name": "tags",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_opportunities_org_stage": {
          "name": "idx_opportunities_org_stage",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "stage",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunities_org_customer": {
          "name": "idx_opportunities_org_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunities_org_assigned": {
          "name": "idx_opportunities_org_assigned",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "assigned_to",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunities_org_expected_close": {
          "name": "idx_opportunities_org_expected_close",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "expected_close_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunities_org_follow_up": {
          "name": "idx_opportunities_org_follow_up",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "follow_up_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunities_org_probability": {
          "name": "idx_opportunities_org_probability",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "probability",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunities_org_created": {
          "name": "idx_opportunities_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunities_customer": {
          "name": "idx_opportunities_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunities_contact": {
          "name": "idx_opportunities_contact",
          "columns": [
            {
              "expression": "contact_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunities_win_loss_reason": {
          "name": "idx_opportunities_win_loss_reason",
          "columns": [
            {
              "expression": "win_loss_reason_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunities_quote_expires": {
          "name": "idx_opportunities_quote_expires",
          "columns": [
            {
              "expression": "quote_expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "opportunities_organization_id_organizations_id_fk": {
          "name": "opportunities_organization_id_organizations_id_fk",
          "tableFrom": "opportunities",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "opportunities_customer_id_customers_id_fk": {
          "name": "opportunities_customer_id_customers_id_fk",
          "tableFrom": "opportunities",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "opportunities_contact_id_contacts_id_fk": {
          "name": "opportunities_contact_id_contacts_id_fk",
          "tableFrom": "opportunities",
          "tableTo": "contacts",
          "columnsFrom": [
            "contact_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "opportunities_assigned_to_users_id_fk": {
          "name": "opportunities_assigned_to_users_id_fk",
          "tableFrom": "opportunities",
          "tableTo": "users",
          "columnsFrom": [
            "assigned_to"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "opportunities_win_loss_reason_id_win_loss_reasons_id_fk": {
          "name": "opportunities_win_loss_reason_id_win_loss_reasons_id_fk",
          "tableFrom": "opportunities",
          "tableTo": "win_loss_reasons",
          "columnsFrom": [
            "win_loss_reason_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "opportunities_select_policy": {
          "name": "opportunities_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "opportunities_insert_policy": {
          "name": "opportunities_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "opportunities_update_policy": {
          "name": "opportunities_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "opportunities_delete_policy": {
          "name": "opportunities_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "actual_close_date_required": {
          "name": "actual_close_date_required",
          "value": "\"opportunities\".\"stage\" NOT IN ('won', 'lost') OR \"opportunities\".\"actual_close_date\" IS NOT NULL"
        },
        "probability_range": {
          "name": "probability_range",
          "value": "\"opportunities\".\"probability\" IS NULL OR (\"opportunities\".\"probability\" >= $1 AND \"opportunities\".\"probability\" <= $2)"
        }
      },
      "isRLSEnabled": false
    },
    "public.opportunity_activities": {
      "name": "opportunity_activities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "opportunity_id": {
          "name": "opportunity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "opportunity_activity_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "outcome": {
          "name": "outcome",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "scheduled_at": {
          "name": "scheduled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_opportunity_activities_org_opportunity": {
          "name": "idx_opportunity_activities_org_opportunity",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "opportunity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunity_activities_org_type": {
          "name": "idx_opportunity_activities_org_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunity_activities_org_created": {
          "name": "idx_opportunity_activities_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunity_activities_opportunity": {
          "name": "idx_opportunity_activities_opportunity",
          "columns": [
            {
              "expression": "opportunity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunity_activities_scheduled": {
          "name": "idx_opportunity_activities_scheduled",
          "columns": [
            {
              "expression": "scheduled_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunity_activities_completed": {
          "name": "idx_opportunity_activities_completed",
          "columns": [
            {
              "expression": "completed_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_opportunity_activities_timeline": {
          "name": "idx_opportunity_activities_timeline",
          "columns": [
            {
              "expression": "opportunity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "opportunity_activities_organization_id_organizations_id_fk": {
          "name": "opportunity_activities_organization_id_organizations_id_fk",
          "tableFrom": "opportunity_activities",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "opportunity_activities_opportunity_id_opportunities_id_fk": {
          "name": "opportunity_activities_opportunity_id_opportunities_id_fk",
          "tableFrom": "opportunity_activities",
          "tableTo": "opportunities",
          "columnsFrom": [
            "opportunity_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "opportunity_activities_created_by_users_id_fk": {
          "name": "opportunity_activities_created_by_users_id_fk",
          "tableFrom": "opportunity_activities",
          "tableTo": "users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "opportunity_activities_select_policy": {
          "name": "opportunity_activities_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "opportunity_activities_insert_policy": {
          "name": "opportunity_activities_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "opportunity_activities_delete_policy": {
          "name": "opportunity_activities_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.quote_versions": {
      "name": "quote_versions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "opportunity_id": {
          "name": "opportunity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "version_number": {
          "name": "version_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "items": {
          "name": "items",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "subtotal": {
          "name": "subtotal",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "tax_amount": {
          "name": "tax_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total": {
          "name": "total",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_quote_versions_opportunity_version_unique": {
          "name": "idx_quote_versions_opportunity_version_unique",
          "columns": [
            {
              "expression": "opportunity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "version_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_quote_versions_org_opportunity": {
          "name": "idx_quote_versions_org_opportunity",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "opportunity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_quote_versions_org_created": {
          "name": "idx_quote_versions_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_quote_versions_opportunity": {
          "name": "idx_quote_versions_opportunity",
          "columns": [
            {
              "expression": "opportunity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "quote_versions_organization_id_organizations_id_fk": {
          "name": "quote_versions_organization_id_organizations_id_fk",
          "tableFrom": "quote_versions",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "quote_versions_opportunity_id_opportunities_id_fk": {
          "name": "quote_versions_opportunity_id_opportunities_id_fk",
          "tableFrom": "quote_versions",
          "tableTo": "opportunities",
          "columnsFrom": [
            "opportunity_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "quote_versions_select_policy": {
          "name": "quote_versions_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "quote_versions_insert_policy": {
          "name": "quote_versions_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "quote_versions_update_policy": {
          "name": "quote_versions_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "quote_versions_delete_policy": {
          "name": "quote_versions_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "quote_versions_portal_select_policy": {
          "name": "quote_versions_portal_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(\n        \"quote_versions\".\"organization_id\" = (SELECT current_setting('app.organization_id', true)::uuid)\n        OR EXISTS (\n          SELECT 1 FROM portal_identities pi\n          JOIN opportunities o ON o.id = \"quote_versions\".\"opportunity_id\"\n          WHERE pi.auth_user_id = auth.uid()\n            AND pi.status = 'active'\n            AND pi.organization_id = \"quote_versions\".\"organization_id\"\n            AND pi.scope = 'customer'\n            AND pi.customer_id = o.customer_id\n        )\n      )"
        }
      },
      "checkConstraints": {
        "version_number_positive": {
          "name": "version_number_positive",
          "value": "\"quote_versions\".\"version_number\" > 0"
        },
        "subtotal_non_negative": {
          "name": "subtotal_non_negative",
          "value": "\"quote_versions\".\"subtotal\" >= 0"
        },
        "tax_amount_non_negative": {
          "name": "tax_amount_non_negative",
          "value": "\"quote_versions\".\"tax_amount\" >= 0"
        },
        "total_non_negative": {
          "name": "total_non_negative",
          "value": "\"quote_versions\".\"total\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.quotes": {
      "name": "quotes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "quote_number": {
          "name": "quote_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "opportunity_id": {
          "name": "opportunity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "quote_date": {
          "name": "quote_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "valid_until": {
          "name": "valid_until",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "accepted_at": {
          "name": "accepted_at",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "line_items": {
          "name": "line_items",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "subtotal": {
          "name": "subtotal",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "discount_amount": {
          "name": "discount_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "tax_amount": {
          "name": "tax_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total": {
          "name": "total",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "terms": {
          "name": "terms",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_quotes_number_org_unique": {
          "name": "idx_quotes_number_org_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "quote_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "deleted_at IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_quotes_org_status": {
          "name": "idx_quotes_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_quotes_org_customer": {
          "name": "idx_quotes_org_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_quotes_org_opportunity": {
          "name": "idx_quotes_org_opportunity",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "opportunity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "quotes_organization_id_organizations_id_fk": {
          "name": "quotes_organization_id_organizations_id_fk",
          "tableFrom": "quotes",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "quotes_opportunity_id_opportunities_id_fk": {
          "name": "quotes_opportunity_id_opportunities_id_fk",
          "tableFrom": "quotes",
          "tableTo": "opportunities",
          "columnsFrom": [
            "opportunity_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "quotes_customer_id_customers_id_fk": {
          "name": "quotes_customer_id_customers_id_fk",
          "tableFrom": "quotes",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "quotes_select_policy": {
          "name": "quotes_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "quotes_insert_policy": {
          "name": "quotes_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "quotes_update_policy": {
          "name": "quotes_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "quotes_delete_policy": {
          "name": "quotes_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "quotes_portal_select_policy": {
          "name": "quotes_portal_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(\n        \"quotes\".\"organization_id\" = (SELECT current_setting('app.organization_id', true)::uuid)\n        OR EXISTS (\n          SELECT 1 FROM portal_identities pi\n          WHERE pi.auth_user_id = auth.uid()\n            AND pi.status = 'active'\n            AND pi.organization_id = \"quotes\".\"organization_id\"\n            AND pi.scope = 'customer'\n            AND pi.customer_id = \"quotes\".\"customer_id\"\n        )\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.win_loss_reasons": {
      "name": "win_loss_reasons",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "win_loss_reason_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_win_loss_reasons_name_org_type_unique": {
          "name": "idx_win_loss_reasons_name_org_type_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_win_loss_reasons_org_type": {
          "name": "idx_win_loss_reasons_org_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_win_loss_reasons_org_active": {
          "name": "idx_win_loss_reasons_org_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_win_loss_reasons_sort_order": {
          "name": "idx_win_loss_reasons_sort_order",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "sort_order",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "win_loss_reasons_organization_id_organizations_id_fk": {
          "name": "win_loss_reasons_organization_id_organizations_id_fk",
          "tableFrom": "win_loss_reasons",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "win_loss_reasons_select_policy": {
          "name": "win_loss_reasons_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "win_loss_reasons_insert_policy": {
          "name": "win_loss_reasons_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "win_loss_reasons_update_policy": {
          "name": "win_loss_reasons_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "win_loss_reasons_delete_policy": {
          "name": "win_loss_reasons_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.inventory": {
      "name": "inventory",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "location_id": {
          "name": "location_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "inventory_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'available'"
        },
        "quantity_on_hand": {
          "name": "quantity_on_hand",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "quantity_allocated": {
          "name": "quantity_allocated",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "quantity_available": {
          "name": "quantity_available",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "generated": {
            "as": "quantity_on_hand - quantity_allocated",
            "type": "stored"
          }
        },
        "unit_cost": {
          "name": "unit_cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_value": {
          "name": "total_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "lot_number": {
          "name": "lot_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "serial_number": {
          "name": "serial_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_inventory_product_location_unique": {
          "name": "idx_inventory_product_location_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "location_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "lot_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"inventory\".\"lot_number\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_inventory_org_product": {
          "name": "idx_inventory_org_product",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_inventory_org_location": {
          "name": "idx_inventory_org_location",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "location_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_inventory_org_status": {
          "name": "idx_inventory_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_inventory_org_created": {
          "name": "idx_inventory_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_inventory_product": {
          "name": "idx_inventory_product",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_inventory_location": {
          "name": "idx_inventory_location",
          "columns": [
            {
              "expression": "location_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_inventory_serial_number": {
          "name": "idx_inventory_serial_number",
          "columns": [
            {
              "expression": "serial_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "inventory_organization_id_organizations_id_fk": {
          "name": "inventory_organization_id_organizations_id_fk",
          "tableFrom": "inventory",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "inventory_product_id_products_id_fk": {
          "name": "inventory_product_id_products_id_fk",
          "tableFrom": "inventory",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "inventory_location_id_warehouse_locations_id_fk": {
          "name": "inventory_location_id_warehouse_locations_id_fk",
          "tableFrom": "inventory",
          "tableTo": "warehouse_locations",
          "columnsFrom": [
            "location_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "inventory_select_policy": {
          "name": "inventory_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "inventory_insert_policy": {
          "name": "inventory_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "inventory_update_policy": {
          "name": "inventory_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "inventory_delete_policy": {
          "name": "inventory_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "inventory_allocation_max": {
          "name": "inventory_allocation_max",
          "value": "\"inventory\".\"quantity_allocated\" <= \"inventory\".\"quantity_on_hand\""
        }
      },
      "isRLSEnabled": false
    },
    "public.inventory_alerts": {
      "name": "inventory_alerts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "alert_type": {
          "name": "alert_type",
          "type": "inventory_alert_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "location_id": {
          "name": "location_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "threshold": {
          "name": "threshold",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "notification_channels": {
          "name": "notification_channels",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::text[]"
        },
        "escalation_users": {
          "name": "escalation_users",
          "type": "uuid[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::uuid[]"
        },
        "last_triggered_at": {
          "name": "last_triggered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        }
      },
      "indexes": {
        "idx_alerts_org_type": {
          "name": "idx_alerts_org_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "alert_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_alerts_org_active": {
          "name": "idx_alerts_org_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_alerts_org_created": {
          "name": "idx_alerts_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_alerts_product": {
          "name": "idx_alerts_product",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_alerts_location": {
          "name": "idx_alerts_location",
          "columns": [
            {
              "expression": "location_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_alerts_triggered": {
          "name": "idx_alerts_triggered",
          "columns": [
            {
              "expression": "last_triggered_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "inventory_alerts_organization_id_organizations_id_fk": {
          "name": "inventory_alerts_organization_id_organizations_id_fk",
          "tableFrom": "inventory_alerts",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "inventory_alerts_product_id_products_id_fk": {
          "name": "inventory_alerts_product_id_products_id_fk",
          "tableFrom": "inventory_alerts",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "inventory_alerts_location_id_warehouse_locations_id_fk": {
          "name": "inventory_alerts_location_id_warehouse_locations_id_fk",
          "tableFrom": "inventory_alerts",
          "tableTo": "warehouse_locations",
          "columnsFrom": [
            "location_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "inventory_alerts_select_policy": {
          "name": "inventory_alerts_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "inventory_alerts_insert_policy": {
          "name": "inventory_alerts_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "inventory_alerts_update_policy": {
          "name": "inventory_alerts_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "inventory_alerts_delete_policy": {
          "name": "inventory_alerts_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.inventory_cost_layers": {
      "name": "inventory_cost_layers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "inventory_id": {
          "name": "inventory_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "received_at": {
          "name": "received_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "quantity_received": {
          "name": "quantity_received",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "quantity_remaining": {
          "name": "quantity_remaining",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "unit_cost": {
          "name": "unit_cost",
          "type": "numeric(10, 4)",
          "primaryKey": false,
          "notNull": true
        },
        "reference_type": {
          "name": "reference_type",
          "type": "cost_layer_reference_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "reference_id": {
          "name": "reference_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_cost_layers_org_inventory": {
          "name": "idx_cost_layers_org_inventory",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "inventory_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cost_layers_received": {
          "name": "idx_cost_layers_received",
          "columns": [
            {
              "expression": "received_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cost_layers_remaining": {
          "name": "idx_cost_layers_remaining",
          "columns": [
            {
              "expression": "quantity_remaining",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cost_layers_inventory": {
          "name": "idx_cost_layers_inventory",
          "columns": [
            {
              "expression": "inventory_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "inventory_cost_layers_organization_id_organizations_id_fk": {
          "name": "inventory_cost_layers_organization_id_organizations_id_fk",
          "tableFrom": "inventory_cost_layers",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "inventory_cost_layers_inventory_id_inventory_id_fk": {
          "name": "inventory_cost_layers_inventory_id_inventory_id_fk",
          "tableFrom": "inventory_cost_layers",
          "tableTo": "inventory",
          "columnsFrom": [
            "inventory_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "inventory_cost_layers_select_policy": {
          "name": "inventory_cost_layers_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "inventory_cost_layers_insert_policy": {
          "name": "inventory_cost_layers_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "inventory_cost_layers_update_policy": {
          "name": "inventory_cost_layers_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "inventory_cost_layers_delete_policy": {
          "name": "inventory_cost_layers_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.inventory_forecasts": {
      "name": "inventory_forecasts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "forecast_date": {
          "name": "forecast_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "forecast_period": {
          "name": "forecast_period",
          "type": "forecast_period",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "demand_quantity": {
          "name": "demand_quantity",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "forecast_accuracy": {
          "name": "forecast_accuracy",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "confidence_level": {
          "name": "confidence_level",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "safety_stock_level": {
          "name": "safety_stock_level",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "reorder_point": {
          "name": "reorder_point",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "recommended_order_quantity": {
          "name": "recommended_order_quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "calculated_at": {
          "name": "calculated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_forecasts_unique": {
          "name": "idx_forecasts_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "forecast_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "forecast_period",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_forecasts_org_product": {
          "name": "idx_forecasts_org_product",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_forecasts_date": {
          "name": "idx_forecasts_date",
          "columns": [
            {
              "expression": "forecast_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_forecasts_period": {
          "name": "idx_forecasts_period",
          "columns": [
            {
              "expression": "forecast_period",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "inventory_forecasts_organization_id_organizations_id_fk": {
          "name": "inventory_forecasts_organization_id_organizations_id_fk",
          "tableFrom": "inventory_forecasts",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "inventory_forecasts_product_id_products_id_fk": {
          "name": "inventory_forecasts_product_id_products_id_fk",
          "tableFrom": "inventory_forecasts",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "inventory_forecasts_select_policy": {
          "name": "inventory_forecasts_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "inventory_forecasts_insert_policy": {
          "name": "inventory_forecasts_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "inventory_forecasts_update_policy": {
          "name": "inventory_forecasts_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "inventory_forecasts_delete_policy": {
          "name": "inventory_forecasts_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.inventory_movements": {
      "name": "inventory_movements",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "inventory_id": {
          "name": "inventory_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "location_id": {
          "name": "location_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "movement_type": {
          "name": "movement_type",
          "type": "movement_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "previous_quantity": {
          "name": "previous_quantity",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "new_quantity": {
          "name": "new_quantity",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "unit_cost": {
          "name": "unit_cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_cost": {
          "name": "total_cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "reference_type": {
          "name": "reference_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reference_id": {
          "name": "reference_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_movements_org_product": {
          "name": "idx_movements_org_product",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_movements_org_location": {
          "name": "idx_movements_org_location",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "location_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_movements_org_type": {
          "name": "idx_movements_org_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "movement_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_movements_org_created": {
          "name": "idx_movements_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_movements_reference": {
          "name": "idx_movements_reference",
          "columns": [
            {
              "expression": "reference_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "reference_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "inventory_movements_organization_id_organizations_id_fk": {
          "name": "inventory_movements_organization_id_organizations_id_fk",
          "tableFrom": "inventory_movements",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "inventory_movements_inventory_id_inventory_id_fk": {
          "name": "inventory_movements_inventory_id_inventory_id_fk",
          "tableFrom": "inventory_movements",
          "tableTo": "inventory",
          "columnsFrom": [
            "inventory_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "inventory_movements_product_id_products_id_fk": {
          "name": "inventory_movements_product_id_products_id_fk",
          "tableFrom": "inventory_movements",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "inventory_movements_location_id_warehouse_locations_id_fk": {
          "name": "inventory_movements_location_id_warehouse_locations_id_fk",
          "tableFrom": "inventory_movements",
          "tableTo": "warehouse_locations",
          "columnsFrom": [
            "location_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "inventory_movements_select_policy": {
          "name": "inventory_movements_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "inventory_movements_insert_policy": {
          "name": "inventory_movements_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.quality_inspections": {
      "name": "quality_inspections",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "inventory_id": {
          "name": "inventory_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "inspection_date": {
          "name": "inspection_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "inspector_name": {
          "name": "inspector_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "result": {
          "name": "result",
          "type": "quality_inspection_result",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "defects": {
          "name": "defects",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_quality_inspections_org": {
          "name": "idx_quality_inspections_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_quality_inspections_inventory": {
          "name": "idx_quality_inspections_inventory",
          "columns": [
            {
              "expression": "inventory_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_quality_inspections_product": {
          "name": "idx_quality_inspections_product",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_quality_inspections_date": {
          "name": "idx_quality_inspections_date",
          "columns": [
            {
              "expression": "inspection_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "quality_inspections_organization_id_organizations_id_fk": {
          "name": "quality_inspections_organization_id_organizations_id_fk",
          "tableFrom": "quality_inspections",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "quality_inspections_inventory_id_inventory_id_fk": {
          "name": "quality_inspections_inventory_id_inventory_id_fk",
          "tableFrom": "quality_inspections",
          "tableTo": "inventory",
          "columnsFrom": [
            "inventory_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "quality_inspections_product_id_products_id_fk": {
          "name": "quality_inspections_product_id_products_id_fk",
          "tableFrom": "quality_inspections",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.stock_count_items": {
      "name": "stock_count_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "stock_count_id": {
          "name": "stock_count_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "inventory_id": {
          "name": "inventory_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "expected_quantity": {
          "name": "expected_quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "counted_quantity": {
          "name": "counted_quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "variance_reason": {
          "name": "variance_reason",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "counted_by": {
          "name": "counted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "counted_at": {
          "name": "counted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "reviewed_by": {
          "name": "reviewed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "reviewed_at": {
          "name": "reviewed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_stock_count_items_unique": {
          "name": "idx_stock_count_items_unique",
          "columns": [
            {
              "expression": "stock_count_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "inventory_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_stock_count_items_count": {
          "name": "idx_stock_count_items_count",
          "columns": [
            {
              "expression": "stock_count_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_stock_count_items_inventory": {
          "name": "idx_stock_count_items_inventory",
          "columns": [
            {
              "expression": "inventory_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_stock_count_items_counted_by": {
          "name": "idx_stock_count_items_counted_by",
          "columns": [
            {
              "expression": "counted_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "stock_count_items_stock_count_id_stock_counts_id_fk": {
          "name": "stock_count_items_stock_count_id_stock_counts_id_fk",
          "tableFrom": "stock_count_items",
          "tableTo": "stock_counts",
          "columnsFrom": [
            "stock_count_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "stock_count_items_inventory_id_inventory_id_fk": {
          "name": "stock_count_items_inventory_id_inventory_id_fk",
          "tableFrom": "stock_count_items",
          "tableTo": "inventory",
          "columnsFrom": [
            "inventory_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.stock_counts": {
      "name": "stock_counts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "count_code": {
          "name": "count_code",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "stock_count_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "count_type": {
          "name": "count_type",
          "type": "stock_count_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'cycle'"
        },
        "location_id": {
          "name": "location_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "assigned_to": {
          "name": "assigned_to",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "approved_by": {
          "name": "approved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "variance_threshold": {
          "name": "variance_threshold",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'5.00'"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        }
      },
      "indexes": {
        "idx_stock_counts_code_org": {
          "name": "idx_stock_counts_code_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "count_code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_stock_counts_org_status": {
          "name": "idx_stock_counts_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_stock_counts_org_type": {
          "name": "idx_stock_counts_org_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "count_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_stock_counts_org_created": {
          "name": "idx_stock_counts_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_stock_counts_assigned": {
          "name": "idx_stock_counts_assigned",
          "columns": [
            {
              "expression": "assigned_to",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_stock_counts_location": {
          "name": "idx_stock_counts_location",
          "columns": [
            {
              "expression": "location_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "stock_counts_organization_id_organizations_id_fk": {
          "name": "stock_counts_organization_id_organizations_id_fk",
          "tableFrom": "stock_counts",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "stock_counts_location_id_warehouse_locations_id_fk": {
          "name": "stock_counts_location_id_warehouse_locations_id_fk",
          "tableFrom": "stock_counts",
          "tableTo": "warehouse_locations",
          "columnsFrom": [
            "location_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "stock_counts_select_policy": {
          "name": "stock_counts_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "stock_counts_insert_policy": {
          "name": "stock_counts_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "stock_counts_update_policy": {
          "name": "stock_counts_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "stock_counts_delete_policy": {
          "name": "stock_counts_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.warehouse_locations": {
      "name": "warehouse_locations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "location_code": {
          "name": "location_code",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "location_type": {
          "name": "location_type",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "parent_id": {
          "name": "parent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "capacity": {
          "name": "capacity",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "is_pickable": {
          "name": "is_pickable",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "is_receivable": {
          "name": "is_receivable",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "attributes": {
          "name": "attributes",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        }
      },
      "indexes": {
        "idx_warehouse_locations_code_org": {
          "name": "idx_warehouse_locations_code_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "location_code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warehouse_locations_parent_fk": {
          "name": "idx_warehouse_locations_parent_fk",
          "columns": [
            {
              "expression": "parent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warehouse_locations_org_type_fk": {
          "name": "idx_warehouse_locations_org_type_fk",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "location_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warehouse_locations_org_created": {
          "name": "idx_warehouse_locations_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "warehouse_locations_select_policy": {
          "name": "warehouse_locations_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warehouse_locations_insert_policy": {
          "name": "warehouse_locations_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warehouse_locations_update_policy": {
          "name": "warehouse_locations_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warehouse_locations_delete_policy": {
          "name": "warehouse_locations_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.organizations": {
      "name": "organizations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "domain": {
          "name": "domain",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "abn": {
          "name": "abn",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "website": {
          "name": "website",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address": {
          "name": "address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'Australia/Sydney'"
        },
        "locale": {
          "name": "locale",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'en-AU'"
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'AUD'"
        },
        "date_format": {
          "name": "date_format",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'DD/MM/YYYY'"
        },
        "time_format": {
          "name": "time_format",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'12h'"
        },
        "number_format": {
          "name": "number_format",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'1,234.56'"
        },
        "fiscal_year_start": {
          "name": "fiscal_year_start",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 7
        },
        "week_start_day": {
          "name": "week_start_day",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "default_tax_rate": {
          "name": "default_tax_rate",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 10
        },
        "default_payment_terms": {
          "name": "default_payment_terms",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 30
        },
        "settings": {
          "name": "settings",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"portalBranding\":{}}'::jsonb"
        },
        "branding": {
          "name": "branding",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "plan": {
          "name": "plan",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'free'"
        },
        "stripe_customer_id": {
          "name": "stripe_customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_organizations_slug_unique": {
          "name": "idx_organizations_slug_unique",
          "columns": [
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_organizations_domain_unique": {
          "name": "idx_organizations_domain_unique",
          "columns": [
            {
              "expression": "domain",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"organizations\".\"domain\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_organizations_abn_unique": {
          "name": "idx_organizations_abn_unique",
          "columns": [
            {
              "expression": "abn",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"organizations\".\"abn\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_organizations_active": {
          "name": "idx_organizations_active",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "organizations_select_policy": {
          "name": "organizations_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "organizations_insert_policy": {
          "name": "organizations_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "organizations_update_policy": {
          "name": "organizations_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "organizations_delete_policy": {
          "name": "organizations_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.system_settings": {
      "name": "system_settings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "key": {
          "name": "key",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "setting_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'string'"
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_public": {
          "name": "is_public",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_system_settings_unique": {
          "name": "idx_system_settings_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "category",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_system_settings_org": {
          "name": "idx_system_settings_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_system_settings_org_category": {
          "name": "idx_system_settings_org_category",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "category",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_system_settings_public": {
          "name": "idx_system_settings_public",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_public",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"system_settings\".\"is_public\" = true",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "system_settings_organization_id_organizations_id_fk": {
          "name": "system_settings_organization_id_organizations_id_fk",
          "tableFrom": "system_settings",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "system_settings_created_by_users_id_fk": {
          "name": "system_settings_created_by_users_id_fk",
          "tableFrom": "system_settings",
          "tableTo": "users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "system_settings_updated_by_users_id_fk": {
          "name": "system_settings_updated_by_users_id_fk",
          "tableFrom": "system_settings",
          "tableTo": "users",
          "columnsFrom": [
            "updated_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "system_settings_select_policy": {
          "name": "system_settings_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "system_settings_insert_policy": {
          "name": "system_settings_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "system_settings_update_policy": {
          "name": "system_settings_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "system_settings_delete_policy": {
          "name": "system_settings_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.custom_fields": {
      "name": "custom_fields",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "custom_field_entity_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "label": {
          "name": "label",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "field_type": {
          "name": "field_type",
          "type": "custom_field_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "options": {
          "name": "options",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "is_required": {
          "name": "is_required",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "validation_rules": {
          "name": "validation_rules",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "default_value": {
          "name": "default_value",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_custom_fields_unique": {
          "name": "idx_custom_fields_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_custom_fields_org": {
          "name": "idx_custom_fields_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_custom_fields_org_entity": {
          "name": "idx_custom_fields_org_entity",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_custom_fields_org_entity_active": {
          "name": "idx_custom_fields_org_entity_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_custom_fields_sort": {
          "name": "idx_custom_fields_sort",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "sort_order",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "custom_fields_organization_id_organizations_id_fk": {
          "name": "custom_fields_organization_id_organizations_id_fk",
          "tableFrom": "custom_fields",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "custom_fields_created_by_users_id_fk": {
          "name": "custom_fields_created_by_users_id_fk",
          "tableFrom": "custom_fields",
          "tableTo": "users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "custom_fields_updated_by_users_id_fk": {
          "name": "custom_fields_updated_by_users_id_fk",
          "tableFrom": "custom_fields",
          "tableTo": "users",
          "columnsFrom": [
            "updated_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "custom_fields_select_policy": {
          "name": "custom_fields_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "custom_fields_insert_policy": {
          "name": "custom_fields_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "custom_fields_update_policy": {
          "name": "custom_fields_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "custom_fields_delete_policy": {
          "name": "custom_fields_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.custom_field_values": {
      "name": "custom_field_values",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "custom_field_id": {
          "name": "custom_field_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_custom_field_values_unique": {
          "name": "idx_custom_field_values_unique",
          "columns": [
            {
              "expression": "custom_field_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_custom_field_values_field": {
          "name": "idx_custom_field_values_field",
          "columns": [
            {
              "expression": "custom_field_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_custom_field_values_entity": {
          "name": "idx_custom_field_values_entity",
          "columns": [
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_custom_field_values_field_entity": {
          "name": "idx_custom_field_values_field_entity",
          "columns": [
            {
              "expression": "custom_field_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "custom_field_values_custom_field_id_custom_fields_id_fk": {
          "name": "custom_field_values_custom_field_id_custom_fields_id_fk",
          "tableFrom": "custom_field_values",
          "tableTo": "custom_fields",
          "columnsFrom": [
            "custom_field_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "custom_field_values_created_by_users_id_fk": {
          "name": "custom_field_values_created_by_users_id_fk",
          "tableFrom": "custom_field_values",
          "tableTo": "users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "custom_field_values_updated_by_users_id_fk": {
          "name": "custom_field_values_updated_by_users_id_fk",
          "tableFrom": "custom_field_values",
          "tableTo": "users",
          "columnsFrom": [
            "updated_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "custom_field_values_select_policy": {
          "name": "custom_field_values_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "EXISTS (\n        SELECT 1 FROM custom_fields cf\n        WHERE cf.id = custom_field_id\n        AND cf.organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )"
        },
        "custom_field_values_insert_policy": {
          "name": "custom_field_values_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "EXISTS (\n        SELECT 1 FROM custom_fields cf\n        WHERE cf.id = custom_field_id\n        AND cf.organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )"
        },
        "custom_field_values_update_policy": {
          "name": "custom_field_values_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "EXISTS (\n        SELECT 1 FROM custom_fields cf\n        WHERE cf.id = custom_field_id\n        AND cf.organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )",
          "withCheck": "EXISTS (\n        SELECT 1 FROM custom_fields cf\n        WHERE cf.id = custom_field_id\n        AND cf.organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )"
        },
        "custom_field_values_delete_policy": {
          "name": "custom_field_values_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "EXISTS (\n        SELECT 1 FROM custom_fields cf\n        WHERE cf.id = custom_field_id\n        AND cf.organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.data_exports": {
      "name": "data_exports",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "requested_by": {
          "name": "requested_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "entities": {
          "name": "entities",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "format": {
          "name": "format",
          "type": "export_format",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "export_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "file_url": {
          "name": "file_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "file_name": {
          "name": "file_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "file_size": {
          "name": "file_size",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "record_count": {
          "name": "record_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_data_exports_org": {
          "name": "idx_data_exports_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_data_exports_user": {
          "name": "idx_data_exports_user",
          "columns": [
            {
              "expression": "requested_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_data_exports_org_user": {
          "name": "idx_data_exports_org_user",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "requested_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_data_exports_status": {
          "name": "idx_data_exports_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_data_exports_org_status": {
          "name": "idx_data_exports_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_data_exports_expires": {
          "name": "idx_data_exports_expires",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_data_exports_created": {
          "name": "idx_data_exports_created",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "data_exports_organization_id_organizations_id_fk": {
          "name": "data_exports_organization_id_organizations_id_fk",
          "tableFrom": "data_exports",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "data_exports_requested_by_users_id_fk": {
          "name": "data_exports_requested_by_users_id_fk",
          "tableFrom": "data_exports",
          "tableTo": "users",
          "columnsFrom": [
            "requested_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "data_exports_select_policy": {
          "name": "data_exports_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "data_exports_insert_policy": {
          "name": "data_exports_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "data_exports_update_policy": {
          "name": "data_exports_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "data_exports_delete_policy": {
          "name": "data_exports_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "data_exports_entities_nonempty": {
          "name": "data_exports_entities_nonempty",
          "value": "array_length(\"data_exports\".\"entities\", 1) > 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.business_hours_config": {
      "name": "business_hours_config",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'Standard Hours'"
        },
        "weekly_schedule": {
          "name": "weekly_schedule",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'Australia/Sydney'"
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_business_hours_org_default": {
          "name": "idx_business_hours_org_default",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_default",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"business_hours_config\".\"is_default\" = true",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "business_hours_config_organization_id_organizations_id_fk": {
          "name": "business_hours_config_organization_id_organizations_id_fk",
          "tableFrom": "business_hours_config",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "business_hours_config_select_policy": {
          "name": "business_hours_config_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "business_hours_config_insert_policy": {
          "name": "business_hours_config_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "business_hours_config_update_policy": {
          "name": "business_hours_config_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "business_hours_config_delete_policy": {
          "name": "business_hours_config_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.organization_holidays": {
      "name": "organization_holidays",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "date": {
          "name": "date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "is_recurring": {
          "name": "is_recurring",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_holidays_org_date": {
          "name": "idx_holidays_org_date",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "organization_holidays_organization_id_organizations_id_fk": {
          "name": "organization_holidays_organization_id_organizations_id_fk",
          "tableFrom": "organization_holidays",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "organization_holidays_select_policy": {
          "name": "organization_holidays_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "organization_holidays_insert_policy": {
          "name": "organization_holidays_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "organization_holidays_update_policy": {
          "name": "organization_holidays_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "organization_holidays_delete_policy": {
          "name": "organization_holidays_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_sessions": {
      "name": "user_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "session_token": {
          "name": "session_token",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "last_active_at": {
          "name": "last_active_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        }
      },
      "indexes": {
        "idx_sessions_token_unique": {
          "name": "idx_sessions_token_unique",
          "columns": [
            {
              "expression": "session_token",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_sessions_user": {
          "name": "idx_sessions_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_sessions_user_expires": {
          "name": "idx_sessions_user_expires",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_sessions_expires": {
          "name": "idx_sessions_expires",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_sessions_user_id_users_id_fk": {
          "name": "user_sessions_user_id_users_id_fk",
          "tableFrom": "user_sessions",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "user_sessions_select_policy": {
          "name": "user_sessions_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "user_id IN (\n        SELECT id FROM users\n        WHERE organization_id = current_setting('app.organization_id', true)::uuid\n      )"
        },
        "user_sessions_delete_policy": {
          "name": "user_sessions_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "user_id IN (\n        SELECT id FROM users\n        WHERE organization_id = current_setting('app.organization_id', true)::uuid\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "auth_id": {
          "name": "auth_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "profile": {
          "name": "profile",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "role": {
          "name": "role",
          "type": "user_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'viewer'"
        },
        "status": {
          "name": "status",
          "type": "user_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'invited'"
        },
        "type": {
          "name": "type",
          "type": "user_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "preferences": {
          "name": "preferences",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"theme\":\"system\",\"notifications\":{\"email\":true,\"push\":true}}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_users_auth_id_unique": {
          "name": "idx_users_auth_id_unique",
          "columns": [
            {
              "expression": "auth_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_email_org_unique": {
          "name": "idx_users_email_org_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_org_role": {
          "name": "idx_users_org_role",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "role",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_org_status": {
          "name": "idx_users_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_email": {
          "name": "idx_users_email",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "users_auth_id_users_id_fk": {
          "name": "users_auth_id_users_id_fk",
          "tableFrom": "users",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "auth_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "users_organization_id_organizations_id_fk": {
          "name": "users_organization_id_organizations_id_fk",
          "tableFrom": "users",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "users_select_policy": {
          "name": "users_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "users_insert_policy": {
          "name": "users_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "users_update_policy": {
          "name": "users_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "users_delete_policy": {
          "name": "users_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_delegations": {
      "name": "user_delegations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "delegator_id": {
          "name": "delegator_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "delegate_id": {
          "name": "delegate_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_user_delegations_org": {
          "name": "idx_user_delegations_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_delegations_delegator": {
          "name": "idx_user_delegations_delegator",
          "columns": [
            {
              "expression": "delegator_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_delegations_delegate": {
          "name": "idx_user_delegations_delegate",
          "columns": [
            {
              "expression": "delegate_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_delegations_active_dates": {
          "name": "idx_user_delegations_active_dates",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "start_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "end_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_delegations_delegator_active": {
          "name": "idx_user_delegations_delegator_active",
          "columns": [
            {
              "expression": "delegator_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_delegations_organization_id_organizations_id_fk": {
          "name": "user_delegations_organization_id_organizations_id_fk",
          "tableFrom": "user_delegations",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_delegations_delegator_id_users_id_fk": {
          "name": "user_delegations_delegator_id_users_id_fk",
          "tableFrom": "user_delegations",
          "tableTo": "users",
          "columnsFrom": [
            "delegator_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_delegations_delegate_id_users_id_fk": {
          "name": "user_delegations_delegate_id_users_id_fk",
          "tableFrom": "user_delegations",
          "tableTo": "users",
          "columnsFrom": [
            "delegate_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "user_delegations_select_policy": {
          "name": "user_delegations_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_delegations_insert_policy": {
          "name": "user_delegations_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_delegations_update_policy": {
          "name": "user_delegations_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_delegations_delete_policy": {
          "name": "user_delegations_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "user_delegations_valid_dates": {
          "name": "user_delegations_valid_dates",
          "value": "start_date < end_date"
        },
        "user_delegations_different_users": {
          "name": "user_delegations_different_users",
          "value": "delegator_id != delegate_id"
        }
      },
      "isRLSEnabled": false
    },
    "public.user_group_members": {
      "name": "user_group_members",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "group_id": {
          "name": "group_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "group_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'member'"
        },
        "joined_at": {
          "name": "joined_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "added_by": {
          "name": "added_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_user_group_members_unique": {
          "name": "idx_user_group_members_unique",
          "columns": [
            {
              "expression": "group_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_group_members_org": {
          "name": "idx_user_group_members_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_group_members_group": {
          "name": "idx_user_group_members_group",
          "columns": [
            {
              "expression": "group_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_group_members_user": {
          "name": "idx_user_group_members_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_group_members_group_role": {
          "name": "idx_user_group_members_group_role",
          "columns": [
            {
              "expression": "group_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "role",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_group_members_organization_id_organizations_id_fk": {
          "name": "user_group_members_organization_id_organizations_id_fk",
          "tableFrom": "user_group_members",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_group_members_group_id_user_groups_id_fk": {
          "name": "user_group_members_group_id_user_groups_id_fk",
          "tableFrom": "user_group_members",
          "tableTo": "user_groups",
          "columnsFrom": [
            "group_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_group_members_user_id_users_id_fk": {
          "name": "user_group_members_user_id_users_id_fk",
          "tableFrom": "user_group_members",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_group_members_added_by_users_id_fk": {
          "name": "user_group_members_added_by_users_id_fk",
          "tableFrom": "user_group_members",
          "tableTo": "users",
          "columnsFrom": [
            "added_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "user_group_members_select_policy": {
          "name": "user_group_members_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_group_members_insert_policy": {
          "name": "user_group_members_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_group_members_update_policy": {
          "name": "user_group_members_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_group_members_delete_policy": {
          "name": "user_group_members_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_groups": {
      "name": "user_groups",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "color": {
          "name": "color",
          "type": "varchar(7)",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_user_groups_name_org_unique": {
          "name": "idx_user_groups_name_org_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_groups_org": {
          "name": "idx_user_groups_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_groups_org_active": {
          "name": "idx_user_groups_org_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_groups_organization_id_organizations_id_fk": {
          "name": "user_groups_organization_id_organizations_id_fk",
          "tableFrom": "user_groups",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "user_groups_select_policy": {
          "name": "user_groups_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_groups_insert_policy": {
          "name": "user_groups_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_groups_update_policy": {
          "name": "user_groups_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_groups_delete_policy": {
          "name": "user_groups_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_invitations": {
      "name": "user_invitations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "user_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "invited_by": {
          "name": "invited_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "invited_at": {
          "name": "invited_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "accepted_at": {
          "name": "accepted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "personal_message": {
          "name": "personal_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "token": {
          "name": "token",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "invitation_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_user_invitations_token_unique": {
          "name": "idx_user_invitations_token_unique",
          "columns": [
            {
              "expression": "token",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_invitations_org": {
          "name": "idx_user_invitations_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_invitations_email": {
          "name": "idx_user_invitations_email",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_invitations_org_status": {
          "name": "idx_user_invitations_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_invitations_expires": {
          "name": "idx_user_invitations_expires",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_invitations_invited_by": {
          "name": "idx_user_invitations_invited_by",
          "columns": [
            {
              "expression": "invited_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_invitations_organization_id_organizations_id_fk": {
          "name": "user_invitations_organization_id_organizations_id_fk",
          "tableFrom": "user_invitations",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_invitations_invited_by_users_id_fk": {
          "name": "user_invitations_invited_by_users_id_fk",
          "tableFrom": "user_invitations",
          "tableTo": "users",
          "columnsFrom": [
            "invited_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "user_invitations_select_policy": {
          "name": "user_invitations_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_invitations_insert_policy": {
          "name": "user_invitations_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_invitations_update_policy": {
          "name": "user_invitations_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_invitations_delete_policy": {
          "name": "user_invitations_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "user_invitations_valid_expiry": {
          "name": "user_invitations_valid_expiry",
          "value": "expires_at > invited_at"
        }
      },
      "isRLSEnabled": false
    },
    "public.user_onboarding": {
      "name": "user_onboarding",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "step_key": {
          "name": "step_key",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "step_name": {
          "name": "step_name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "is_completed": {
          "name": "is_completed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "dismissed_at": {
          "name": "dismissed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_user_onboarding_user_step_unique": {
          "name": "idx_user_onboarding_user_step_unique",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "step_key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_onboarding_org": {
          "name": "idx_user_onboarding_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_onboarding_user": {
          "name": "idx_user_onboarding_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_onboarding_user_completed": {
          "name": "idx_user_onboarding_user_completed",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_completed",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_onboarding_step_key": {
          "name": "idx_user_onboarding_step_key",
          "columns": [
            {
              "expression": "step_key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_onboarding_user_id_users_id_fk": {
          "name": "user_onboarding_user_id_users_id_fk",
          "tableFrom": "user_onboarding",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "user_onboarding_select_policy": {
          "name": "user_onboarding_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_onboarding_insert_policy": {
          "name": "user_onboarding_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_onboarding_update_policy": {
          "name": "user_onboarding_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_onboarding_delete_policy": {
          "name": "user_onboarding_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_preferences": {
      "name": "user_preferences",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "key": {
          "name": "key",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_user_preferences_unique": {
          "name": "idx_user_preferences_unique",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "category",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_preferences_org": {
          "name": "idx_user_preferences_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_preferences_user": {
          "name": "idx_user_preferences_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_preferences_user_category": {
          "name": "idx_user_preferences_user_category",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "category",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_preferences_user_id_users_id_fk": {
          "name": "user_preferences_user_id_users_id_fk",
          "tableFrom": "user_preferences",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "user_preferences_select_policy": {
          "name": "user_preferences_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_preferences_insert_policy": {
          "name": "user_preferences_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_preferences_update_policy": {
          "name": "user_preferences_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "user_preferences_delete_policy": {
          "name": "user_preferences_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.api_tokens": {
      "name": "api_tokens",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "hashed_token": {
          "name": "hashed_token",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "token_prefix": {
          "name": "token_prefix",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "scopes": {
          "name": "scopes",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[\"read\"]'::jsonb"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_used_at": {
          "name": "last_used_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_used_ip": {
          "name": "last_used_ip",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "revoked_at": {
          "name": "revoked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "revoked_by": {
          "name": "revoked_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "revoked_reason": {
          "name": "revoked_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "api_tokens_hashed_token_idx": {
          "name": "api_tokens_hashed_token_idx",
          "columns": [
            {
              "expression": "hashed_token",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "api_tokens_user_id_idx": {
          "name": "api_tokens_user_id_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "api_tokens_organization_id_idx": {
          "name": "api_tokens_organization_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "api_tokens_active_idx": {
          "name": "api_tokens_active_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "revoked_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "api_tokens_prefix_idx": {
          "name": "api_tokens_prefix_idx",
          "columns": [
            {
              "expression": "token_prefix",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "api_tokens_user_id_users_id_fk": {
          "name": "api_tokens_user_id_users_id_fk",
          "tableFrom": "api_tokens",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "api_tokens_organization_id_organizations_id_fk": {
          "name": "api_tokens_organization_id_organizations_id_fk",
          "tableFrom": "api_tokens",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "api_tokens_revoked_by_users_id_fk": {
          "name": "api_tokens_revoked_by_users_id_fk",
          "tableFrom": "api_tokens",
          "tableTo": "users",
          "columnsFrom": [
            "revoked_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "api_tokens_org_isolation": {
          "name": "api_tokens_org_isolation",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (\n        SELECT organization_id FROM users WHERE auth_id = auth.uid()\n      )",
          "withCheck": "organization_id = (\n        SELECT organization_id FROM users WHERE auth_id = auth.uid()\n      )"
        },
        "api_tokens_owner_access": {
          "name": "api_tokens_owner_access",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "\n        user_id = (SELECT id FROM users WHERE auth_id = auth.uid())\n        OR EXISTS (\n          SELECT 1 FROM users\n          WHERE auth_id = auth.uid()\n          AND role IN ('owner', 'admin')\n          AND organization_id = api_tokens.organization_id\n        )\n      "
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.activities": {
      "name": "activities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "entity_type": {
          "name": "entity_type",
          "type": "activity_entity_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "activity_action",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "changes": {
          "name": "changes",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "ip_address": {
          "name": "ip_address",
          "type": "inet",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "entity_name": {
          "name": "entity_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_id_from_metadata": {
          "name": "customer_id_from_metadata",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "movement_id_from_metadata": {
          "name": "movement_id_from_metadata",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "source": {
          "name": "source",
          "type": "activity_source",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'manual'"
        },
        "source_ref": {
          "name": "source_ref",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_activities_org_entity": {
          "name": "idx_activities_org_entity",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_activities_org_created": {
          "name": "idx_activities_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_activities_user": {
          "name": "idx_activities_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_activities_action": {
          "name": "idx_activities_action",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_activities_entity_type": {
          "name": "idx_activities_entity_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_activities_source": {
          "name": "idx_activities_source",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "source",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "activities_organization_id_organizations_id_fk": {
          "name": "activities_organization_id_organizations_id_fk",
          "tableFrom": "activities",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "activities_user_id_users_id_fk": {
          "name": "activities_user_id_users_id_fk",
          "tableFrom": "activities",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "activities_created_by_users_id_fk": {
          "name": "activities_created_by_users_id_fk",
          "tableFrom": "activities",
          "tableTo": "users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "activities_select_policy": {
          "name": "activities_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "activities_insert_policy": {
          "name": "activities_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.campaign_recipients": {
      "name": "campaign_recipients",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "campaign_id": {
          "name": "campaign_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "contact_id": {
          "name": "contact_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "recipient_data": {
          "name": "recipient_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "status": {
          "name": "status",
          "type": "campaign_recipient_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "delivered_at": {
          "name": "delivered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "opened_at": {
          "name": "opened_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "clicked_at": {
          "name": "clicked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "bounced_at": {
          "name": "bounced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "failed_at": {
          "name": "failed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "unsubscribed_at": {
          "name": "unsubscribed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email_history_id": {
          "name": "email_history_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_campaign_recipients_campaign": {
          "name": "idx_campaign_recipients_campaign",
          "columns": [
            {
              "expression": "campaign_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_campaign_recipients_campaign_status": {
          "name": "idx_campaign_recipients_campaign_status",
          "columns": [
            {
              "expression": "campaign_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_campaign_recipients_contact": {
          "name": "idx_campaign_recipients_contact",
          "columns": [
            {
              "expression": "contact_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_campaign_recipients_campaign_email_unique": {
          "name": "idx_campaign_recipients_campaign_email_unique",
          "columns": [
            {
              "expression": "campaign_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_campaign_recipients_campaign_email": {
          "name": "idx_campaign_recipients_campaign_email",
          "columns": [
            {
              "expression": "campaign_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_campaign_recipients_org": {
          "name": "idx_campaign_recipients_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "campaign_recipients_organization_id_organizations_id_fk": {
          "name": "campaign_recipients_organization_id_organizations_id_fk",
          "tableFrom": "campaign_recipients",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "campaign_recipients_campaign_id_email_campaigns_id_fk": {
          "name": "campaign_recipients_campaign_id_email_campaigns_id_fk",
          "tableFrom": "campaign_recipients",
          "tableTo": "email_campaigns",
          "columnsFrom": [
            "campaign_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "campaign_recipients_contact_id_contacts_id_fk": {
          "name": "campaign_recipients_contact_id_contacts_id_fk",
          "tableFrom": "campaign_recipients",
          "tableTo": "contacts",
          "columnsFrom": [
            "contact_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "campaign_recipients_select_policy": {
          "name": "campaign_recipients_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "campaign_recipients_insert_policy": {
          "name": "campaign_recipients_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "campaign_recipients_update_policy": {
          "name": "campaign_recipients_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "campaign_recipients_delete_policy": {
          "name": "campaign_recipients_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.email_campaigns": {
      "name": "email_campaigns",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "template_type": {
          "name": "template_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "template_data": {
          "name": "template_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "recipient_criteria": {
          "name": "recipient_criteria",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "scheduled_at": {
          "name": "scheduled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "campaign_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "recipient_count": {
          "name": "recipient_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "sent_count": {
          "name": "sent_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "delivered_count": {
          "name": "delivered_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "open_count": {
          "name": "open_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "click_count": {
          "name": "click_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "bounce_count": {
          "name": "bounce_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "failed_count": {
          "name": "failed_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "unsubscribe_count": {
          "name": "unsubscribe_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_by_id": {
          "name": "created_by_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_email_campaigns_org_status": {
          "name": "idx_email_campaigns_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_campaigns_scheduled_at": {
          "name": "idx_email_campaigns_scheduled_at",
          "columns": [
            {
              "expression": "scheduled_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_campaigns_creator": {
          "name": "idx_email_campaigns_creator",
          "columns": [
            {
              "expression": "created_by_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "email_campaigns_organization_id_organizations_id_fk": {
          "name": "email_campaigns_organization_id_organizations_id_fk",
          "tableFrom": "email_campaigns",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "email_campaigns_created_by_id_users_id_fk": {
          "name": "email_campaigns_created_by_id_users_id_fk",
          "tableFrom": "email_campaigns",
          "tableTo": "users",
          "columnsFrom": [
            "created_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "email_campaigns_select_policy": {
          "name": "email_campaigns_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "email_campaigns_insert_policy": {
          "name": "email_campaigns_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "email_campaigns_update_policy": {
          "name": "email_campaigns_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "email_campaigns_delete_policy": {
          "name": "email_campaigns_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.email_history": {
      "name": "email_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "sender_id": {
          "name": "sender_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "from_address": {
          "name": "from_address",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "to_address": {
          "name": "to_address",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "body_html": {
          "name": "body_html",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "body_text": {
          "name": "body_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "email_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "resend_message_id": {
          "name": "resend_message_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "campaign_id": {
          "name": "campaign_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "template_id": {
          "name": "template_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "opened_at": {
          "name": "opened_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "clicked_at": {
          "name": "clicked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "link_clicks": {
          "name": "link_clicks",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "delivered_at": {
          "name": "delivered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "bounced_at": {
          "name": "bounced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "bounce_reason": {
          "name": "bounce_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "bounce_type": {
          "name": "bounce_type",
          "type": "bounce_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "complained_at": {
          "name": "complained_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_email_history_campaign": {
          "name": "idx_email_history_campaign",
          "columns": [
            {
              "expression": "campaign_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_history_template": {
          "name": "idx_email_history_template",
          "columns": [
            {
              "expression": "template_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_history_org_status": {
          "name": "idx_email_history_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_history_org_created_id": {
          "name": "idx_email_history_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_history_customer": {
          "name": "idx_email_history_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_history_sender": {
          "name": "idx_email_history_sender",
          "columns": [
            {
              "expression": "sender_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_history_resend_message": {
          "name": "idx_email_history_resend_message",
          "columns": [
            {
              "expression": "resend_message_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "email_history_organization_id_organizations_id_fk": {
          "name": "email_history_organization_id_organizations_id_fk",
          "tableFrom": "email_history",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "email_history_sender_id_users_id_fk": {
          "name": "email_history_sender_id_users_id_fk",
          "tableFrom": "email_history",
          "tableTo": "users",
          "columnsFrom": [
            "sender_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "email_history_customer_id_customers_id_fk": {
          "name": "email_history_customer_id_customers_id_fk",
          "tableFrom": "email_history",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "email_history_campaign_id_email_campaigns_id_fk": {
          "name": "email_history_campaign_id_email_campaigns_id_fk",
          "tableFrom": "email_history",
          "tableTo": "email_campaigns",
          "columnsFrom": [
            "campaign_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "email_history_template_id_email_templates_id_fk": {
          "name": "email_history_template_id_email_templates_id_fk",
          "tableFrom": "email_history",
          "tableTo": "email_templates",
          "columnsFrom": [
            "template_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "email_history_select_policy": {
          "name": "email_history_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "email_history_insert_policy": {
          "name": "email_history_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.email_signatures": {
      "name": "email_signatures",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_company_wide": {
          "name": "is_company_wide",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_email_signatures_user": {
          "name": "idx_email_signatures_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_signatures_org": {
          "name": "idx_email_signatures_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_signatures_default": {
          "name": "idx_email_signatures_default",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_default",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "email_signatures_organization_id_organizations_id_fk": {
          "name": "email_signatures_organization_id_organizations_id_fk",
          "tableFrom": "email_signatures",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "email_signatures_user_id_users_id_fk": {
          "name": "email_signatures_user_id_users_id_fk",
          "tableFrom": "email_signatures",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "email_signatures_select_policy": {
          "name": "email_signatures_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "email_signatures_insert_policy": {
          "name": "email_signatures_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "email_signatures_update_policy": {
          "name": "email_signatures_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "email_signatures_delete_policy": {
          "name": "email_signatures_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.email_suppression": {
      "name": "email_suppression",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "suppression_reason",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "bounce_type": {
          "name": "bounce_type",
          "type": "bounce_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "bounce_count": {
          "name": "bounce_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "resend_event_id": {
          "name": "resend_event_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_reason": {
          "name": "deleted_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "email_suppression_unique_idx": {
          "name": "email_suppression_unique_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"email_suppression\".\"deleted_at\" IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "email_suppression_email_idx": {
          "name": "email_suppression_email_idx",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "email_suppression_reason_idx": {
          "name": "email_suppression_reason_idx",
          "columns": [
            {
              "expression": "reason",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "email_suppression_org_reason_idx": {
          "name": "email_suppression_org_reason_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "reason",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "email_suppression_org_created_id_idx": {
          "name": "email_suppression_org_created_id_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "email_suppression_organization_id_organizations_id_fk": {
          "name": "email_suppression_organization_id_organizations_id_fk",
          "tableFrom": "email_suppression",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "email_suppression_deleted_by_users_id_fk": {
          "name": "email_suppression_deleted_by_users_id_fk",
          "tableFrom": "email_suppression",
          "tableTo": "users",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "email_suppression_select_policy": {
          "name": "email_suppression_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "email_suppression_insert_policy": {
          "name": "email_suppression_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "email_suppression_update_policy": {
          "name": "email_suppression_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "email_suppression_delete_policy": {
          "name": "email_suppression_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.email_template_versions": {
      "name": "email_template_versions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "template_id": {
          "name": "template_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category": {
          "name": "category",
          "type": "template_category",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'custom'"
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "body_html": {
          "name": "body_html",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "variables": {
          "name": "variables",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_email_template_versions_template_version": {
          "name": "idx_email_template_versions_template_version",
          "columns": [
            {
              "expression": "template_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "version",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_template_versions_org_template": {
          "name": "idx_email_template_versions_org_template",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "template_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_template_versions_template": {
          "name": "idx_email_template_versions_template",
          "columns": [
            {
              "expression": "template_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_template_versions_org_created": {
          "name": "idx_email_template_versions_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "email_template_versions_organization_id_organizations_id_fk": {
          "name": "email_template_versions_organization_id_organizations_id_fk",
          "tableFrom": "email_template_versions",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "email_template_versions_template_id_email_templates_id_fk": {
          "name": "email_template_versions_template_id_email_templates_id_fk",
          "tableFrom": "email_template_versions",
          "tableTo": "email_templates",
          "columnsFrom": [
            "template_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "email_template_versions_select_policy": {
          "name": "email_template_versions_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "email_template_versions_insert_policy": {
          "name": "email_template_versions_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "email_template_versions_delete_policy": {
          "name": "email_template_versions_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.email_templates": {
      "name": "email_templates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category": {
          "name": "category",
          "type": "template_category",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'custom'"
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "body_html": {
          "name": "body_html",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "variables": {
          "name": "variables",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "parent_template_id": {
          "name": "parent_template_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_email_templates_org": {
          "name": "idx_email_templates_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_templates_category": {
          "name": "idx_email_templates_category",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "category",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_templates_active": {
          "name": "idx_email_templates_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_templates_parent": {
          "name": "idx_email_templates_parent",
          "columns": [
            {
              "expression": "parent_template_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "email_templates_organization_id_organizations_id_fk": {
          "name": "email_templates_organization_id_organizations_id_fk",
          "tableFrom": "email_templates",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "email_templates_select_policy": {
          "name": "email_templates_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "email_templates_insert_policy": {
          "name": "email_templates_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "email_templates_update_policy": {
          "name": "email_templates_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "email_templates_delete_policy": {
          "name": "email_templates_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.scheduled_calls": {
      "name": "scheduled_calls",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "assignee_id": {
          "name": "assignee_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "scheduled_at": {
          "name": "scheduled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "reminder_at": {
          "name": "reminder_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "purpose": {
          "name": "purpose",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'general'"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "scheduled_call_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "cancelled_at": {
          "name": "cancelled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "cancel_reason": {
          "name": "cancel_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "outcome": {
          "name": "outcome",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "outcome_notes": {
          "name": "outcome_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "rescheduled_to_id": {
          "name": "rescheduled_to_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_scheduled_calls_assignee": {
          "name": "idx_scheduled_calls_assignee",
          "columns": [
            {
              "expression": "assignee_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_scheduled_calls_scheduled_at": {
          "name": "idx_scheduled_calls_scheduled_at",
          "columns": [
            {
              "expression": "scheduled_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_scheduled_calls_status": {
          "name": "idx_scheduled_calls_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_scheduled_calls_assignee_status": {
          "name": "idx_scheduled_calls_assignee_status",
          "columns": [
            {
              "expression": "assignee_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_scheduled_calls_customer": {
          "name": "idx_scheduled_calls_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_scheduled_calls_org_status": {
          "name": "idx_scheduled_calls_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "scheduled_calls_organization_id_organizations_id_fk": {
          "name": "scheduled_calls_organization_id_organizations_id_fk",
          "tableFrom": "scheduled_calls",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "scheduled_calls_customer_id_customers_id_fk": {
          "name": "scheduled_calls_customer_id_customers_id_fk",
          "tableFrom": "scheduled_calls",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "scheduled_calls_assignee_id_users_id_fk": {
          "name": "scheduled_calls_assignee_id_users_id_fk",
          "tableFrom": "scheduled_calls",
          "tableTo": "users",
          "columnsFrom": [
            "assignee_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "scheduled_calls_select_policy": {
          "name": "scheduled_calls_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "scheduled_calls_insert_policy": {
          "name": "scheduled_calls_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "scheduled_calls_update_policy": {
          "name": "scheduled_calls_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "scheduled_calls_delete_policy": {
          "name": "scheduled_calls_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.scheduled_emails": {
      "name": "scheduled_emails",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "recipient_email": {
          "name": "recipient_email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "recipient_name": {
          "name": "recipient_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "template_type": {
          "name": "template_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "template_data": {
          "name": "template_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "scheduled_at": {
          "name": "scheduled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'UTC'"
        },
        "status": {
          "name": "status",
          "type": "scheduled_email_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "cancelled_at": {
          "name": "cancelled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "cancel_reason": {
          "name": "cancel_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email_history_id": {
          "name": "email_history_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_scheduled_emails_org_status": {
          "name": "idx_scheduled_emails_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_scheduled_emails_scheduled_at": {
          "name": "idx_scheduled_emails_scheduled_at",
          "columns": [
            {
              "expression": "scheduled_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_scheduled_emails_user": {
          "name": "idx_scheduled_emails_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_scheduled_emails_customer": {
          "name": "idx_scheduled_emails_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_scheduled_emails_org_created": {
          "name": "idx_scheduled_emails_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "scheduled_emails_organization_id_organizations_id_fk": {
          "name": "scheduled_emails_organization_id_organizations_id_fk",
          "tableFrom": "scheduled_emails",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "scheduled_emails_user_id_users_id_fk": {
          "name": "scheduled_emails_user_id_users_id_fk",
          "tableFrom": "scheduled_emails",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "scheduled_emails_customer_id_customers_id_fk": {
          "name": "scheduled_emails_customer_id_customers_id_fk",
          "tableFrom": "scheduled_emails",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "scheduled_emails_select_policy": {
          "name": "scheduled_emails_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "scheduled_emails_insert_policy": {
          "name": "scheduled_emails_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "scheduled_emails_update_policy": {
          "name": "scheduled_emails_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "scheduled_emails_delete_policy": {
          "name": "scheduled_emails_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.webhook_events": {
      "name": "webhook_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "event_id": {
          "name": "event_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email_id": {
          "name": "email_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "processed_at": {
          "name": "processed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "payload": {
          "name": "payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "result": {
          "name": "result",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "webhook_events_unique_idx": {
          "name": "webhook_events_unique_idx",
          "columns": [
            {
              "expression": "event_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "event_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "webhook_events_email_idx": {
          "name": "webhook_events_email_idx",
          "columns": [
            {
              "expression": "email_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "webhook_events_processed_at_idx": {
          "name": "webhook_events_processed_at_idx",
          "columns": [
            {
              "expression": "processed_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.oauth_connections": {
      "name": "oauth_connections",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "service_type": {
          "name": "service_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "external_account_id": {
          "name": "external_account_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "access_token": {
          "name": "access_token",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "refresh_token": {
          "name": "refresh_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "token_expires_at": {
          "name": "token_expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "scopes": {
          "name": "scopes",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "last_synced_at": {
          "name": "last_synced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_oauth_connections_org_user_provider_service": {
          "name": "idx_oauth_connections_org_user_provider_service",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "provider",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "service_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_oauth_connections_last_synced": {
          "name": "idx_oauth_connections_last_synced",
          "columns": [
            {
              "expression": "last_synced_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "oauth_connections_organization_id_organizations_id_fk": {
          "name": "oauth_connections_organization_id_organizations_id_fk",
          "tableFrom": "oauth_connections",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "oauth_connections_user_id_users_id_fk": {
          "name": "oauth_connections_user_id_users_id_fk",
          "tableFrom": "oauth_connections",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "oauth_connections_select_policy": {
          "name": "oauth_connections_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_connections_insert_policy": {
          "name": "oauth_connections_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_connections_update_policy": {
          "name": "oauth_connections_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_connections_delete_policy": {
          "name": "oauth_connections_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.oauth_service_permissions": {
      "name": "oauth_service_permissions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "connection_id": {
          "name": "connection_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "service_type": {
          "name": "service_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "scope": {
          "name": "scope",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_granted": {
          "name": "is_granted",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "granted_at": {
          "name": "granted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "revoked_at": {
          "name": "revoked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_oauth_service_permissions_org_connection_service": {
          "name": "idx_oauth_service_permissions_org_connection_service",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "connection_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "service_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "oauth_service_permissions_organization_id_organizations_id_fk": {
          "name": "oauth_service_permissions_organization_id_organizations_id_fk",
          "tableFrom": "oauth_service_permissions",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "oauth_service_permissions_connection_id_oauth_connections_id_fk": {
          "name": "oauth_service_permissions_connection_id_oauth_connections_id_fk",
          "tableFrom": "oauth_service_permissions",
          "tableTo": "oauth_connections",
          "columnsFrom": [
            "connection_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "oauth_service_permissions_select_policy": {
          "name": "oauth_service_permissions_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_service_permissions_insert_policy": {
          "name": "oauth_service_permissions_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_service_permissions_update_policy": {
          "name": "oauth_service_permissions_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_service_permissions_delete_policy": {
          "name": "oauth_service_permissions_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.oauth_sync_logs": {
      "name": "oauth_sync_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "connection_id": {
          "name": "connection_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "service_type": {
          "name": "service_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "operation": {
          "name": "operation",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "record_count": {
          "name": "record_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_oauth_sync_logs_org_connection_service": {
          "name": "idx_oauth_sync_logs_org_connection_service",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "connection_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "service_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_oauth_sync_logs_org_started": {
          "name": "idx_oauth_sync_logs_org_started",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "started_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_oauth_sync_logs_status": {
          "name": "idx_oauth_sync_logs_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "oauth_sync_logs_organization_id_organizations_id_fk": {
          "name": "oauth_sync_logs_organization_id_organizations_id_fk",
          "tableFrom": "oauth_sync_logs",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "oauth_sync_logs_connection_id_oauth_connections_id_fk": {
          "name": "oauth_sync_logs_connection_id_oauth_connections_id_fk",
          "tableFrom": "oauth_sync_logs",
          "tableTo": "oauth_connections",
          "columnsFrom": [
            "connection_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "oauth_sync_logs_select_policy": {
          "name": "oauth_sync_logs_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_sync_logs_insert_policy": {
          "name": "oauth_sync_logs_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_sync_logs_update_policy": {
          "name": "oauth_sync_logs_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_sync_logs_delete_policy": {
          "name": "oauth_sync_logs_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.oauth_states": {
      "name": "oauth_states",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "services": {
          "name": "services",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "redirect_url": {
          "name": "redirect_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "state": {
          "name": "state",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pkce_verifier": {
          "name": "pkce_verifier",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pkce_challenge": {
          "name": "pkce_challenge",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pkce_method": {
          "name": "pkce_method",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'S256'"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "is_consumed": {
          "name": "is_consumed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_oauth_states_org_provider": {
          "name": "idx_oauth_states_org_provider",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "provider",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_oauth_states_state": {
          "name": "idx_oauth_states_state",
          "columns": [
            {
              "expression": "state",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_oauth_states_expires": {
          "name": "idx_oauth_states_expires",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "oauth_states_organization_id_organizations_id_fk": {
          "name": "oauth_states_organization_id_organizations_id_fk",
          "tableFrom": "oauth_states",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "oauth_states_user_id_users_id_fk": {
          "name": "oauth_states_user_id_users_id_fk",
          "tableFrom": "oauth_states",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "oauth_states_select_policy": {
          "name": "oauth_states_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_states_insert_policy": {
          "name": "oauth_states_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_states_update_policy": {
          "name": "oauth_states_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_states_delete_policy": {
          "name": "oauth_states_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.oauth_email_messages": {
      "name": "oauth_email_messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "connection_id": {
          "name": "connection_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "thread_id": {
          "name": "thread_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "from": {
          "name": "from",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "to": {
          "name": "to",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "received_at": {
          "name": "received_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "raw": {
          "name": "raw",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_oauth_email_messages_org_conn": {
          "name": "idx_oauth_email_messages_org_conn",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "connection_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_oauth_email_messages_external": {
          "name": "idx_oauth_email_messages_external",
          "columns": [
            {
              "expression": "connection_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "oauth_email_messages_organization_id_organizations_id_fk": {
          "name": "oauth_email_messages_organization_id_organizations_id_fk",
          "tableFrom": "oauth_email_messages",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "oauth_email_messages_connection_id_oauth_connections_id_fk": {
          "name": "oauth_email_messages_connection_id_oauth_connections_id_fk",
          "tableFrom": "oauth_email_messages",
          "tableTo": "oauth_connections",
          "columnsFrom": [
            "connection_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "oauth_email_messages_select_policy": {
          "name": "oauth_email_messages_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_email_messages_insert_policy": {
          "name": "oauth_email_messages_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_email_messages_update_policy": {
          "name": "oauth_email_messages_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_email_messages_delete_policy": {
          "name": "oauth_email_messages_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.oauth_contacts": {
      "name": "oauth_contacts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "connection_id": {
          "name": "connection_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "full_name": {
          "name": "full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "emails": {
          "name": "emails",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "phones": {
          "name": "phones",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "raw": {
          "name": "raw",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_oauth_contacts_org_conn": {
          "name": "idx_oauth_contacts_org_conn",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "connection_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_oauth_contacts_external": {
          "name": "idx_oauth_contacts_external",
          "columns": [
            {
              "expression": "connection_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "oauth_contacts_organization_id_organizations_id_fk": {
          "name": "oauth_contacts_organization_id_organizations_id_fk",
          "tableFrom": "oauth_contacts",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "oauth_contacts_connection_id_oauth_connections_id_fk": {
          "name": "oauth_contacts_connection_id_oauth_connections_id_fk",
          "tableFrom": "oauth_contacts",
          "tableTo": "oauth_connections",
          "columnsFrom": [
            "connection_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "oauth_contacts_select_policy": {
          "name": "oauth_contacts_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_contacts_insert_policy": {
          "name": "oauth_contacts_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_contacts_update_policy": {
          "name": "oauth_contacts_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_contacts_delete_policy": {
          "name": "oauth_contacts_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.oauth_calendar_events": {
      "name": "oauth_calendar_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "connection_id": {
          "name": "connection_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "start_time": {
          "name": "start_time",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "end_time": {
          "name": "end_time",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "location": {
          "name": "location",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_all_day": {
          "name": "is_all_day",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "raw": {
          "name": "raw",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "last_synced_at": {
          "name": "last_synced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_oauth_calendar_events_org_conn": {
          "name": "idx_oauth_calendar_events_org_conn",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "connection_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_oauth_calendar_events_external": {
          "name": "idx_oauth_calendar_events_external",
          "columns": [
            {
              "expression": "connection_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "oauth_calendar_events_organization_id_organizations_id_fk": {
          "name": "oauth_calendar_events_organization_id_organizations_id_fk",
          "tableFrom": "oauth_calendar_events",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "oauth_calendar_events_connection_id_oauth_connections_id_fk": {
          "name": "oauth_calendar_events_connection_id_oauth_connections_id_fk",
          "tableFrom": "oauth_calendar_events",
          "tableTo": "oauth_connections",
          "columnsFrom": [
            "connection_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "oauth_calendar_events_select_policy": {
          "name": "oauth_calendar_events_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_calendar_events_insert_policy": {
          "name": "oauth_calendar_events_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_calendar_events_update_policy": {
          "name": "oauth_calendar_events_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_calendar_events_delete_policy": {
          "name": "oauth_calendar_events_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.oauth_sync_states": {
      "name": "oauth_sync_states",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "connection_id": {
          "name": "connection_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "service_type": {
          "name": "service_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sync_token": {
          "name": "sync_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_synced_at": {
          "name": "last_synced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_oauth_sync_states_org_conn": {
          "name": "idx_oauth_sync_states_org_conn",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "connection_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_oauth_sync_states_conn_service_unique": {
          "name": "idx_oauth_sync_states_conn_service_unique",
          "columns": [
            {
              "expression": "connection_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "service_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "oauth_sync_states_organization_id_organizations_id_fk": {
          "name": "oauth_sync_states_organization_id_organizations_id_fk",
          "tableFrom": "oauth_sync_states",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "oauth_sync_states_connection_id_oauth_connections_id_fk": {
          "name": "oauth_sync_states_connection_id_oauth_connections_id_fk",
          "tableFrom": "oauth_sync_states",
          "tableTo": "oauth_connections",
          "columnsFrom": [
            "connection_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "oauth_sync_states_select_policy": {
          "name": "oauth_sync_states_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_sync_states_insert_policy": {
          "name": "oauth_sync_states_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_sync_states_update_policy": {
          "name": "oauth_sync_states_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "oauth_sync_states_delete_policy": {
          "name": "oauth_sync_states_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.job_assignments": {
      "name": "job_assignments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "installer_id": {
          "name": "installer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_type": {
          "name": "job_type",
          "type": "job_assignment_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'installation'"
        },
        "job_number": {
          "name": "job_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "scheduled_date": {
          "name": "scheduled_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "scheduled_time": {
          "name": "scheduled_time",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "estimated_duration": {
          "name": "estimated_duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "job_assignment_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'scheduled'"
        },
        "started_at": {
          "name": "started_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "start_location": {
          "name": "start_location",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "complete_location": {
          "name": "complete_location",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "signature_url": {
          "name": "signature_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "signed_by_name": {
          "name": "signed_by_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sign_off_token": {
          "name": "sign_off_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sign_off_token_expires_at": {
          "name": "sign_off_token_expires_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "confirmation_status": {
          "name": "confirmation_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "confirmation_token": {
          "name": "confirmation_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "internal_notes": {
          "name": "internal_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "sla_tracking_id": {
          "name": "sla_tracking_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "migrated_to_project_id": {
          "name": "migrated_to_project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_job_assignments_org_status": {
          "name": "idx_job_assignments_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_assignments_org_installer": {
          "name": "idx_job_assignments_org_installer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "installer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_assignments_org_scheduled": {
          "name": "idx_job_assignments_org_scheduled",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "scheduled_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_assignments_org_customer": {
          "name": "idx_job_assignments_org_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_assignments_installer_date": {
          "name": "idx_job_assignments_installer_date",
          "columns": [
            {
              "expression": "installer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "scheduled_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_assignments_order": {
          "name": "idx_job_assignments_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "job_assignments_organization_id_organizations_id_fk": {
          "name": "job_assignments_organization_id_organizations_id_fk",
          "tableFrom": "job_assignments",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_assignments_order_id_orders_id_fk": {
          "name": "job_assignments_order_id_orders_id_fk",
          "tableFrom": "job_assignments",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "job_assignments_customer_id_customers_id_fk": {
          "name": "job_assignments_customer_id_customers_id_fk",
          "tableFrom": "job_assignments",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "job_assignments_installer_id_users_id_fk": {
          "name": "job_assignments_installer_id_users_id_fk",
          "tableFrom": "job_assignments",
          "tableTo": "users",
          "columnsFrom": [
            "installer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "job_assignments_sla_tracking_id_sla_tracking_id_fk": {
          "name": "job_assignments_sla_tracking_id_sla_tracking_id_fk",
          "tableFrom": "job_assignments",
          "tableTo": "sla_tracking",
          "columnsFrom": [
            "sla_tracking_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "job_assignments_migrated_to_project_id_projects_id_fk": {
          "name": "job_assignments_migrated_to_project_id_projects_id_fk",
          "tableFrom": "job_assignments",
          "tableTo": "projects",
          "columnsFrom": [
            "migrated_to_project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "job_assignments_portal_select_policy": {
          "name": "job_assignments_portal_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(\n        \"job_assignments\".\"organization_id\" = (SELECT current_setting('app.organization_id', true)::uuid)\n        OR EXISTS (\n          SELECT 1 FROM portal_identities pi\n          WHERE pi.auth_user_id = auth.uid()\n            AND pi.status = 'active'\n            AND pi.organization_id = \"job_assignments\".\"organization_id\"\n            AND pi.scope = 'customer'\n            AND pi.customer_id = \"job_assignments\".\"customer_id\"\n        )\n        OR EXISTS (\n          SELECT 1 FROM portal_identities pi\n          WHERE pi.auth_user_id = auth.uid()\n            AND pi.status = 'active'\n            AND pi.organization_id = \"job_assignments\".\"organization_id\"\n            AND pi.scope = 'subcontractor'\n            AND pi.job_assignment_id = \"job_assignments\".\"id\"\n        )\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.job_photos": {
      "name": "job_photos",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_assignment_id": {
          "name": "job_assignment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "job_photo_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "photo_url": {
          "name": "photo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "caption": {
          "name": "caption",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "location": {
          "name": "location",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_job_photos_job": {
          "name": "idx_job_photos_job",
          "columns": [
            {
              "expression": "job_assignment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_photos_org_job": {
          "name": "idx_job_photos_org_job",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "job_assignment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "job_photos_organization_id_organizations_id_fk": {
          "name": "job_photos_organization_id_organizations_id_fk",
          "tableFrom": "job_photos",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_photos_job_assignment_id_job_assignments_id_fk": {
          "name": "job_photos_job_assignment_id_job_assignments_id_fk",
          "tableFrom": "job_photos",
          "tableTo": "job_assignments",
          "columnsFrom": [
            "job_assignment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.job_materials": {
      "name": "job_materials",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "task_id": {
          "name": "task_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "quantity_required": {
          "name": "quantity_required",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "quantity_used": {
          "name": "quantity_used",
          "type": "numeric(10, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "unit_cost": {
          "name": "unit_cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "serial_numbers": {
          "name": "serial_numbers",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "installed_location": {
          "name": "installed_location",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "installed_at": {
          "name": "installed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "photos": {
          "name": "photos",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "is_installed": {
          "name": "is_installed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "installed_by": {
          "name": "installed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_job_materials_org_job": {
          "name": "idx_job_materials_org_job",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_materials_org_product": {
          "name": "idx_job_materials_org_product",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_materials_org_created": {
          "name": "idx_job_materials_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_materials_project": {
          "name": "idx_job_materials_project",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_materials_task": {
          "name": "idx_job_materials_task",
          "columns": [
            {
              "expression": "task_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "job_materials_organization_id_organizations_id_fk": {
          "name": "job_materials_organization_id_organizations_id_fk",
          "tableFrom": "job_materials",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_materials_job_id_job_assignments_id_fk": {
          "name": "job_materials_job_id_job_assignments_id_fk",
          "tableFrom": "job_materials",
          "tableTo": "job_assignments",
          "columnsFrom": [
            "job_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_materials_project_id_projects_id_fk": {
          "name": "job_materials_project_id_projects_id_fk",
          "tableFrom": "job_materials",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_materials_task_id_job_tasks_id_fk": {
          "name": "job_materials_task_id_job_tasks_id_fk",
          "tableFrom": "job_materials",
          "tableTo": "job_tasks",
          "columnsFrom": [
            "task_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "job_materials_product_id_products_id_fk": {
          "name": "job_materials_product_id_products_id_fk",
          "tableFrom": "job_materials",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "job_materials_installed_by_users_id_fk": {
          "name": "job_materials_installed_by_users_id_fk",
          "tableFrom": "job_materials",
          "tableTo": "users",
          "columnsFrom": [
            "installed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "job_materials_select_policy": {
          "name": "job_materials_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_materials_insert_policy": {
          "name": "job_materials_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_materials_update_policy": {
          "name": "job_materials_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_materials_delete_policy": {
          "name": "job_materials_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.job_material_reservations": {
      "name": "job_material_reservations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_material_id": {
          "name": "job_material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "inventory_id": {
          "name": "inventory_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "quantity_reserved": {
          "name": "quantity_reserved",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "job_material_reservation_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_job_material_reservations_org_job_material": {
          "name": "idx_job_material_reservations_org_job_material",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "job_material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_material_reservations_org_inventory": {
          "name": "idx_job_material_reservations_org_inventory",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "inventory_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_material_reservations_status": {
          "name": "idx_job_material_reservations_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "job_material_reservations_organization_id_organizations_id_fk": {
          "name": "job_material_reservations_organization_id_organizations_id_fk",
          "tableFrom": "job_material_reservations",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_material_reservations_job_material_id_job_materials_id_fk": {
          "name": "job_material_reservations_job_material_id_job_materials_id_fk",
          "tableFrom": "job_material_reservations",
          "tableTo": "job_materials",
          "columnsFrom": [
            "job_material_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_material_reservations_inventory_id_inventory_id_fk": {
          "name": "job_material_reservations_inventory_id_inventory_id_fk",
          "tableFrom": "job_material_reservations",
          "tableTo": "inventory",
          "columnsFrom": [
            "inventory_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "job_material_reservations_select_policy": {
          "name": "job_material_reservations_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_material_reservations_insert_policy": {
          "name": "job_material_reservations_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_material_reservations_update_policy": {
          "name": "job_material_reservations_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_material_reservations_delete_policy": {
          "name": "job_material_reservations_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.job_material_serial_numbers": {
      "name": "job_material_serial_numbers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_material_id": {
          "name": "job_material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "serial_number": {
          "name": "serial_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "installed_at": {
          "name": "installed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_job_material_serial_numbers_org_job_material": {
          "name": "idx_job_material_serial_numbers_org_job_material",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "job_material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_material_serial_numbers_org_serial": {
          "name": "idx_job_material_serial_numbers_org_serial",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "serial_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "job_material_serial_numbers_organization_id_organizations_id_fk": {
          "name": "job_material_serial_numbers_organization_id_organizations_id_fk",
          "tableFrom": "job_material_serial_numbers",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_material_serial_numbers_job_material_id_job_materials_id_fk": {
          "name": "job_material_serial_numbers_job_material_id_job_materials_id_fk",
          "tableFrom": "job_material_serial_numbers",
          "tableTo": "job_materials",
          "columnsFrom": [
            "job_material_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_material_serial_numbers_product_id_products_id_fk": {
          "name": "job_material_serial_numbers_product_id_products_id_fk",
          "tableFrom": "job_material_serial_numbers",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "job_material_serial_numbers_select_policy": {
          "name": "job_material_serial_numbers_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_material_serial_numbers_insert_policy": {
          "name": "job_material_serial_numbers_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_material_serial_numbers_update_policy": {
          "name": "job_material_serial_numbers_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_material_serial_numbers_delete_policy": {
          "name": "job_material_serial_numbers_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.job_material_photos": {
      "name": "job_material_photos",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_material_id": {
          "name": "job_material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "storage_path": {
          "name": "storage_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "caption": {
          "name": "caption",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "taken_at": {
          "name": "taken_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_job_material_photos_org_job_material": {
          "name": "idx_job_material_photos_org_job_material",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "job_material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "job_material_photos_organization_id_organizations_id_fk": {
          "name": "job_material_photos_organization_id_organizations_id_fk",
          "tableFrom": "job_material_photos",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_material_photos_job_material_id_job_materials_id_fk": {
          "name": "job_material_photos_job_material_id_job_materials_id_fk",
          "tableFrom": "job_material_photos",
          "tableTo": "job_materials",
          "columnsFrom": [
            "job_material_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "job_material_photos_select_policy": {
          "name": "job_material_photos_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_material_photos_insert_policy": {
          "name": "job_material_photos_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_material_photos_update_policy": {
          "name": "job_material_photos_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_material_photos_delete_policy": {
          "name": "job_material_photos_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.job_tasks": {
      "name": "job_tasks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "site_visit_id": {
          "name": "site_visit_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "workstream_id": {
          "name": "workstream_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "job_task_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "assignee_id": {
          "name": "assignee_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "due_date": {
          "name": "due_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "priority": {
          "name": "priority",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'normal'"
        },
        "estimated_hours": {
          "name": "estimated_hours",
          "type": "numeric(8, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "actual_hours": {
          "name": "actual_hours",
          "type": "numeric(8, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "position": {
          "name": "position",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_job_tasks_org_job": {
          "name": "idx_job_tasks_org_job",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_tasks_org_status": {
          "name": "idx_job_tasks_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_tasks_org_created": {
          "name": "idx_job_tasks_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_tasks_job_position": {
          "name": "idx_job_tasks_job_position",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "position",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_tasks_site_visit": {
          "name": "idx_job_tasks_site_visit",
          "columns": [
            {
              "expression": "site_visit_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_tasks_project": {
          "name": "idx_job_tasks_project",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_tasks_workstream": {
          "name": "idx_job_tasks_workstream",
          "columns": [
            {
              "expression": "workstream_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_tasks_project_status": {
          "name": "idx_job_tasks_project_status",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "job_tasks_organization_id_organizations_id_fk": {
          "name": "job_tasks_organization_id_organizations_id_fk",
          "tableFrom": "job_tasks",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_tasks_job_id_job_assignments_id_fk": {
          "name": "job_tasks_job_id_job_assignments_id_fk",
          "tableFrom": "job_tasks",
          "tableTo": "job_assignments",
          "columnsFrom": [
            "job_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_tasks_site_visit_id_site_visits_id_fk": {
          "name": "job_tasks_site_visit_id_site_visits_id_fk",
          "tableFrom": "job_tasks",
          "tableTo": "site_visits",
          "columnsFrom": [
            "site_visit_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "job_tasks_project_id_projects_id_fk": {
          "name": "job_tasks_project_id_projects_id_fk",
          "tableFrom": "job_tasks",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_tasks_workstream_id_project_workstreams_id_fk": {
          "name": "job_tasks_workstream_id_project_workstreams_id_fk",
          "tableFrom": "job_tasks",
          "tableTo": "project_workstreams",
          "columnsFrom": [
            "workstream_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "job_tasks_assignee_id_users_id_fk": {
          "name": "job_tasks_assignee_id_users_id_fk",
          "tableFrom": "job_tasks",
          "tableTo": "users",
          "columnsFrom": [
            "assignee_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "job_tasks_select_policy": {
          "name": "job_tasks_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_tasks_insert_policy": {
          "name": "job_tasks_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_tasks_update_policy": {
          "name": "job_tasks_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_tasks_delete_policy": {
          "name": "job_tasks_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.job_templates": {
      "name": "job_templates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "default_tasks": {
          "name": "default_tasks",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "default_bom": {
          "name": "default_bom",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "checklist_template_id": {
          "name": "checklist_template_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "estimated_duration": {
          "name": "estimated_duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 120
        },
        "sla_configuration_id": {
          "name": "sla_configuration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_job_templates_org_name": {
          "name": "idx_job_templates_org_name",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_templates_org_active": {
          "name": "idx_job_templates_org_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_templates_org_created": {
          "name": "idx_job_templates_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "job_templates_organization_id_organizations_id_fk": {
          "name": "job_templates_organization_id_organizations_id_fk",
          "tableFrom": "job_templates",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_templates_checklist_template_id_checklist_templates_id_fk": {
          "name": "job_templates_checklist_template_id_checklist_templates_id_fk",
          "tableFrom": "job_templates",
          "tableTo": "checklist_templates",
          "columnsFrom": [
            "checklist_template_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "job_templates_sla_configuration_id_sla_configurations_id_fk": {
          "name": "job_templates_sla_configuration_id_sla_configurations_id_fk",
          "tableFrom": "job_templates",
          "tableTo": "sla_configurations",
          "columnsFrom": [
            "sla_configuration_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "job_templates_select_policy": {
          "name": "job_templates_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_templates_insert_policy": {
          "name": "job_templates_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_templates_update_policy": {
          "name": "job_templates_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_templates_delete_policy": {
          "name": "job_templates_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.job_time_entries": {
      "name": "job_time_entries",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "site_visit_id": {
          "name": "site_visit_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "start_time": {
          "name": "start_time",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "end_time": {
          "name": "end_time",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category": {
          "name": "category",
          "type": "job_time_category",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'work'"
        },
        "is_billable": {
          "name": "is_billable",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_job_time_entries_org_job": {
          "name": "idx_job_time_entries_org_job",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_time_entries_org_user": {
          "name": "idx_job_time_entries_org_user",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_time_entries_org_start_time": {
          "name": "idx_job_time_entries_org_start_time",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "start_time",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_time_entries_org_category": {
          "name": "idx_job_time_entries_org_category",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "category",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_time_entries_project": {
          "name": "idx_job_time_entries_project",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_time_entries_site_visit": {
          "name": "idx_job_time_entries_site_visit",
          "columns": [
            {
              "expression": "site_visit_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "job_time_entries_organization_id_organizations_id_fk": {
          "name": "job_time_entries_organization_id_organizations_id_fk",
          "tableFrom": "job_time_entries",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_time_entries_job_id_job_assignments_id_fk": {
          "name": "job_time_entries_job_id_job_assignments_id_fk",
          "tableFrom": "job_time_entries",
          "tableTo": "job_assignments",
          "columnsFrom": [
            "job_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_time_entries_project_id_projects_id_fk": {
          "name": "job_time_entries_project_id_projects_id_fk",
          "tableFrom": "job_time_entries",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_time_entries_site_visit_id_site_visits_id_fk": {
          "name": "job_time_entries_site_visit_id_site_visits_id_fk",
          "tableFrom": "job_time_entries",
          "tableTo": "site_visits",
          "columnsFrom": [
            "site_visit_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "job_time_entries_user_id_users_id_fk": {
          "name": "job_time_entries_user_id_users_id_fk",
          "tableFrom": "job_time_entries",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "job_time_entries_select_policy": {
          "name": "job_time_entries_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_time_entries_insert_policy": {
          "name": "job_time_entries_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_time_entries_update_policy": {
          "name": "job_time_entries_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_time_entries_delete_policy": {
          "name": "job_time_entries_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.checklist_templates": {
      "name": "checklist_templates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "items": {
          "name": "items",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_checklist_templates_org_name": {
          "name": "idx_checklist_templates_org_name",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_checklist_templates_org_active": {
          "name": "idx_checklist_templates_org_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "checklist_templates_organization_id_organizations_id_fk": {
          "name": "checklist_templates_organization_id_organizations_id_fk",
          "tableFrom": "checklist_templates",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "checklist_templates_select_policy": {
          "name": "checklist_templates_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "checklist_templates_insert_policy": {
          "name": "checklist_templates_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "checklist_templates_update_policy": {
          "name": "checklist_templates_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "checklist_templates_delete_policy": {
          "name": "checklist_templates_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.job_checklist_items": {
      "name": "job_checklist_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "checklist_id": {
          "name": "checklist_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "item_text": {
          "name": "item_text",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": true
        },
        "item_description": {
          "name": "item_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "requires_photo": {
          "name": "requires_photo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "position": {
          "name": "position",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_completed": {
          "name": "is_completed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_by": {
          "name": "completed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "photo_url": {
          "name": "photo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_job_checklist_items_org_checklist": {
          "name": "idx_job_checklist_items_org_checklist",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "checklist_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_checklist_items_org_completed": {
          "name": "idx_job_checklist_items_org_completed",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_completed",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "job_checklist_items_organization_id_organizations_id_fk": {
          "name": "job_checklist_items_organization_id_organizations_id_fk",
          "tableFrom": "job_checklist_items",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_checklist_items_checklist_id_job_checklists_id_fk": {
          "name": "job_checklist_items_checklist_id_job_checklists_id_fk",
          "tableFrom": "job_checklist_items",
          "tableTo": "job_checklists",
          "columnsFrom": [
            "checklist_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_checklist_items_completed_by_users_id_fk": {
          "name": "job_checklist_items_completed_by_users_id_fk",
          "tableFrom": "job_checklist_items",
          "tableTo": "users",
          "columnsFrom": [
            "completed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "job_checklist_items_select_policy": {
          "name": "job_checklist_items_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_checklist_items_insert_policy": {
          "name": "job_checklist_items_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_checklist_items_update_policy": {
          "name": "job_checklist_items_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_checklist_items_delete_policy": {
          "name": "job_checklist_items_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.job_checklists": {
      "name": "job_checklists",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "template_id": {
          "name": "template_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "template_name": {
          "name": "template_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_job_checklists_org_job": {
          "name": "idx_job_checklists_org_job",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_checklists_org_template": {
          "name": "idx_job_checklists_org_template",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "template_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_checklists_org_created": {
          "name": "idx_job_checklists_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "job_checklists_organization_id_organizations_id_fk": {
          "name": "job_checklists_organization_id_organizations_id_fk",
          "tableFrom": "job_checklists",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_checklists_job_id_job_assignments_id_fk": {
          "name": "job_checklists_job_id_job_assignments_id_fk",
          "tableFrom": "job_checklists",
          "tableTo": "job_assignments",
          "columnsFrom": [
            "job_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "job_checklists_template_id_checklist_templates_id_fk": {
          "name": "job_checklists_template_id_checklist_templates_id_fk",
          "tableFrom": "job_checklists",
          "tableTo": "checklist_templates",
          "columnsFrom": [
            "template_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "job_checklists_select_policy": {
          "name": "job_checklists_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_checklists_insert_policy": {
          "name": "job_checklists_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_checklists_update_policy": {
          "name": "job_checklists_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "job_checklists_delete_policy": {
          "name": "job_checklists_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.project_members": {
      "name": "project_members",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'member'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_project_members_project_user": {
          "name": "idx_project_members_project_user",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_project_members_org_project": {
          "name": "idx_project_members_org_project",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "project_members_organization_id_organizations_id_fk": {
          "name": "project_members_organization_id_organizations_id_fk",
          "tableFrom": "project_members",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "project_members_project_id_projects_id_fk": {
          "name": "project_members_project_id_projects_id_fk",
          "tableFrom": "project_members",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "project_members_user_id_users_id_fk": {
          "name": "project_members_user_id_users_id_fk",
          "tableFrom": "project_members",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.projects": {
      "name": "projects",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "project_number": {
          "name": "project_number",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "project_type": {
          "name": "project_type",
          "type": "project_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'solar_battery'"
        },
        "status": {
          "name": "status",
          "type": "project_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'quoting'"
        },
        "priority": {
          "name": "priority",
          "type": "project_priority",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'medium'"
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "site_address": {
          "name": "site_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "scope": {
          "name": "scope",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"inScope\":[],\"outOfScope\":[]}'::jsonb"
        },
        "outcomes": {
          "name": "outcomes",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "key_features": {
          "name": "key_features",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"p0\":[],\"p1\":[],\"p2\":[]}'::jsonb"
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "target_completion_date": {
          "name": "target_completion_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "actual_completion_date": {
          "name": "actual_completion_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "progress_percent": {
          "name": "progress_percent",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "estimated_total_value": {
          "name": "estimated_total_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "actual_total_cost": {
          "name": "actual_total_cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "customer_satisfaction_rating": {
          "name": "customer_satisfaction_rating",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "customer_feedback": {
          "name": "customer_feedback",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "handover_pack_url": {
          "name": "handover_pack_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_projects_org_status": {
          "name": "idx_projects_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_projects_org_customer": {
          "name": "idx_projects_org_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_projects_org_type": {
          "name": "idx_projects_org_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "project_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_projects_org_priority": {
          "name": "idx_projects_org_priority",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "priority",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_projects_org_number": {
          "name": "idx_projects_org_number",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "project_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "deleted_at IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_projects_org_created": {
          "name": "idx_projects_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "projects_organization_id_organizations_id_fk": {
          "name": "projects_organization_id_organizations_id_fk",
          "tableFrom": "projects",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "projects_customer_id_customers_id_fk": {
          "name": "projects_customer_id_customers_id_fk",
          "tableFrom": "projects",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "projects_order_id_orders_id_fk": {
          "name": "projects_order_id_orders_id_fk",
          "tableFrom": "projects",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "projects_select_policy": {
          "name": "projects_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "projects_insert_policy": {
          "name": "projects_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "projects_update_policy": {
          "name": "projects_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "projects_delete_policy": {
          "name": "projects_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.site_visit_photos": {
      "name": "site_visit_photos",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "site_visit_id": {
          "name": "site_visit_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "site_visit_photo_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "photo_url": {
          "name": "photo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "thumbnail_url": {
          "name": "thumbnail_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "caption": {
          "name": "caption",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "location": {
          "name": "location",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_site_visit_photos_visit": {
          "name": "idx_site_visit_photos_visit",
          "columns": [
            {
              "expression": "site_visit_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_site_visit_photos_project": {
          "name": "idx_site_visit_photos_project",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_site_visit_photos_org_visit": {
          "name": "idx_site_visit_photos_org_visit",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "site_visit_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "site_visit_photos_organization_id_organizations_id_fk": {
          "name": "site_visit_photos_organization_id_organizations_id_fk",
          "tableFrom": "site_visit_photos",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "site_visit_photos_site_visit_id_site_visits_id_fk": {
          "name": "site_visit_photos_site_visit_id_site_visits_id_fk",
          "tableFrom": "site_visit_photos",
          "tableTo": "site_visits",
          "columnsFrom": [
            "site_visit_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "site_visit_photos_project_id_projects_id_fk": {
          "name": "site_visit_photos_project_id_projects_id_fk",
          "tableFrom": "site_visit_photos",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.site_visits": {
      "name": "site_visits",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "visit_number": {
          "name": "visit_number",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "visit_type": {
          "name": "visit_type",
          "type": "site_visit_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'installation'"
        },
        "status": {
          "name": "status",
          "type": "site_visit_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'scheduled'"
        },
        "scheduled_date": {
          "name": "scheduled_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "scheduled_time": {
          "name": "scheduled_time",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "estimated_duration": {
          "name": "estimated_duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "actual_start_time": {
          "name": "actual_start_time",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "actual_end_time": {
          "name": "actual_end_time",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "installer_id": {
          "name": "installer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "start_location": {
          "name": "start_location",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "complete_location": {
          "name": "complete_location",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "internal_notes": {
          "name": "internal_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "signature_url": {
          "name": "signature_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "signed_by_name": {
          "name": "signed_by_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sign_off_token": {
          "name": "sign_off_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sign_off_token_expires_at": {
          "name": "sign_off_token_expires_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "confirmation_status": {
          "name": "confirmation_status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "confirmation_token": {
          "name": "confirmation_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "confirmed_at": {
          "name": "confirmed_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_sign_off_name": {
          "name": "customer_sign_off_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_sign_off_date": {
          "name": "customer_sign_off_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "customer_sign_off_confirmed": {
          "name": "customer_sign_off_confirmed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "customer_rating": {
          "name": "customer_rating",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "customer_feedback": {
          "name": "customer_feedback",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_site_visits_org_status": {
          "name": "idx_site_visits_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_site_visits_org_project": {
          "name": "idx_site_visits_org_project",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_site_visits_installer_date": {
          "name": "idx_site_visits_installer_date",
          "columns": [
            {
              "expression": "installer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "scheduled_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_site_visits_org_date": {
          "name": "idx_site_visits_org_date",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "scheduled_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_site_visits_project_number": {
          "name": "idx_site_visits_project_number",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "visit_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "site_visits_organization_id_organizations_id_fk": {
          "name": "site_visits_organization_id_organizations_id_fk",
          "tableFrom": "site_visits",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "site_visits_project_id_projects_id_fk": {
          "name": "site_visits_project_id_projects_id_fk",
          "tableFrom": "site_visits",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "site_visits_installer_id_users_id_fk": {
          "name": "site_visits_installer_id_users_id_fk",
          "tableFrom": "site_visits",
          "tableTo": "users",
          "columnsFrom": [
            "installer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "site_visits_select_policy": {
          "name": "site_visits_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "site_visits_insert_policy": {
          "name": "site_visits_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "site_visits_update_policy": {
          "name": "site_visits_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "site_visits_delete_policy": {
          "name": "site_visits_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.project_files": {
      "name": "project_files",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "file_url": {
          "name": "file_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "file_name": {
          "name": "file_name",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": true
        },
        "file_size": {
          "name": "file_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "mime_type": {
          "name": "mime_type",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "file_type": {
          "name": "file_type",
          "type": "project_file_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'other'"
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "site_visit_id": {
          "name": "site_visit_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "position": {
          "name": "position",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_project_files_org_project": {
          "name": "idx_project_files_org_project",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_project_files_site_visit": {
          "name": "idx_project_files_site_visit",
          "columns": [
            {
              "expression": "site_visit_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "project_files_organization_id_organizations_id_fk": {
          "name": "project_files_organization_id_organizations_id_fk",
          "tableFrom": "project_files",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "project_files_project_id_projects_id_fk": {
          "name": "project_files_project_id_projects_id_fk",
          "tableFrom": "project_files",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "project_files_select_policy": {
          "name": "project_files_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "project_files_insert_policy": {
          "name": "project_files_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "project_files_update_policy": {
          "name": "project_files_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "project_files_delete_policy": {
          "name": "project_files_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.project_notes": {
      "name": "project_notes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "site_visit_id": {
          "name": "site_visit_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "note_type": {
          "name": "note_type",
          "type": "project_note_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'general'"
        },
        "status": {
          "name": "status",
          "type": "project_note_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'completed'"
        },
        "audio_data": {
          "name": "audio_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_project_notes_org_project": {
          "name": "idx_project_notes_org_project",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_project_notes_project_created": {
          "name": "idx_project_notes_project_created",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_project_notes_site_visit": {
          "name": "idx_project_notes_site_visit",
          "columns": [
            {
              "expression": "site_visit_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "project_notes_organization_id_organizations_id_fk": {
          "name": "project_notes_organization_id_organizations_id_fk",
          "tableFrom": "project_notes",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "project_notes_project_id_projects_id_fk": {
          "name": "project_notes_project_id_projects_id_fk",
          "tableFrom": "project_notes",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "project_notes_select_policy": {
          "name": "project_notes_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "project_notes_insert_policy": {
          "name": "project_notes_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "project_notes_update_policy": {
          "name": "project_notes_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "project_notes_delete_policy": {
          "name": "project_notes_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.project_workstreams": {
      "name": "project_workstreams",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "position": {
          "name": "position",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "default_visit_type": {
          "name": "default_visit_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_workstreams_org_project": {
          "name": "idx_workstreams_org_project",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_workstreams_project_position": {
          "name": "idx_workstreams_project_position",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "position",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "project_workstreams_organization_id_organizations_id_fk": {
          "name": "project_workstreams_organization_id_organizations_id_fk",
          "tableFrom": "project_workstreams",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "project_workstreams_project_id_projects_id_fk": {
          "name": "project_workstreams_project_id_projects_id_fk",
          "tableFrom": "project_workstreams",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "workstreams_select_policy": {
          "name": "workstreams_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "workstreams_insert_policy": {
          "name": "workstreams_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "workstreams_update_policy": {
          "name": "workstreams_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "workstreams_delete_policy": {
          "name": "workstreams_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.installer_blockouts": {
      "name": "installer_blockouts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "installer_id": {
          "name": "installer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "blockout_type": {
          "name": "blockout_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_installer_blockouts_installer_date": {
          "name": "idx_installer_blockouts_installer_date",
          "columns": [
            {
              "expression": "installer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "start_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_installer_blockouts_org_installer": {
          "name": "idx_installer_blockouts_org_installer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "installer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "installer_blockouts_organization_id_organizations_id_fk": {
          "name": "installer_blockouts_organization_id_organizations_id_fk",
          "tableFrom": "installer_blockouts",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "installer_blockouts_installer_id_installer_profiles_id_fk": {
          "name": "installer_blockouts_installer_id_installer_profiles_id_fk",
          "tableFrom": "installer_blockouts",
          "tableTo": "installer_profiles",
          "columnsFrom": [
            "installer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "installer_blockouts_select_policy": {
          "name": "installer_blockouts_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "installer_blockouts_insert_policy": {
          "name": "installer_blockouts_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "installer_blockouts_update_policy": {
          "name": "installer_blockouts_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "installer_blockouts_delete_policy": {
          "name": "installer_blockouts_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.installer_certifications": {
      "name": "installer_certifications",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "installer_id": {
          "name": "installer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "certification_type": {
          "name": "certification_type",
          "type": "certification_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "license_number": {
          "name": "license_number",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "issuing_authority": {
          "name": "issuing_authority",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "issue_date": {
          "name": "issue_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "is_verified": {
          "name": "is_verified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "verified_by": {
          "name": "verified_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "verified_at": {
          "name": "verified_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "document_url": {
          "name": "document_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_installer_certifications_installer": {
          "name": "idx_installer_certifications_installer",
          "columns": [
            {
              "expression": "installer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_installer_certifications_org_installer": {
          "name": "idx_installer_certifications_org_installer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "installer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_installer_certifications_type": {
          "name": "idx_installer_certifications_type",
          "columns": [
            {
              "expression": "certification_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_installer_certifications_expiry": {
          "name": "idx_installer_certifications_expiry",
          "columns": [
            {
              "expression": "expiry_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "installer_certifications_organization_id_organizations_id_fk": {
          "name": "installer_certifications_organization_id_organizations_id_fk",
          "tableFrom": "installer_certifications",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "installer_certifications_installer_id_installer_profiles_id_fk": {
          "name": "installer_certifications_installer_id_installer_profiles_id_fk",
          "tableFrom": "installer_certifications",
          "tableTo": "installer_profiles",
          "columnsFrom": [
            "installer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "installer_certifications_verified_by_users_id_fk": {
          "name": "installer_certifications_verified_by_users_id_fk",
          "tableFrom": "installer_certifications",
          "tableTo": "users",
          "columnsFrom": [
            "verified_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "installer_certifications_select_policy": {
          "name": "installer_certifications_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "installer_certifications_insert_policy": {
          "name": "installer_certifications_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "installer_certifications_update_policy": {
          "name": "installer_certifications_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "installer_certifications_delete_policy": {
          "name": "installer_certifications_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.installer_profiles": {
      "name": "installer_profiles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "installer_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "years_experience": {
          "name": "years_experience",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "vehicle_type": {
          "name": "vehicle_type",
          "type": "vehicle_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'none'"
        },
        "vehicle_reg": {
          "name": "vehicle_reg",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "equipment": {
          "name": "equipment",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "max_jobs_per_day": {
          "name": "max_jobs_per_day",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 2
        },
        "max_travel_km": {
          "name": "max_travel_km",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "working_hours": {
          "name": "working_hours",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"monday\":{\"start\":\"08:00\",\"end\":\"17:00\",\"working\":true},\"tuesday\":{\"start\":\"08:00\",\"end\":\"17:00\",\"working\":true},\"wednesday\":{\"start\":\"08:00\",\"end\":\"17:00\",\"working\":true},\"thursday\":{\"start\":\"08:00\",\"end\":\"17:00\",\"working\":true},\"friday\":{\"start\":\"08:00\",\"end\":\"17:00\",\"working\":true},\"saturday\":{\"start\":\"08:00\",\"end\":\"12:00\",\"working\":false},\"sunday\":{\"start\":\"08:00\",\"end\":\"12:00\",\"working\":false}}'::jsonb"
        },
        "emergency_contact_name": {
          "name": "emergency_contact_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "emergency_contact_phone": {
          "name": "emergency_contact_phone",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "emergency_contact_relationship": {
          "name": "emergency_contact_relationship",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_installer_profiles_org_user": {
          "name": "idx_installer_profiles_org_user",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_installer_profiles_org_status": {
          "name": "idx_installer_profiles_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_installer_profiles_user": {
          "name": "idx_installer_profiles_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "installer_profiles_organization_id_organizations_id_fk": {
          "name": "installer_profiles_organization_id_organizations_id_fk",
          "tableFrom": "installer_profiles",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "installer_profiles_user_id_users_id_fk": {
          "name": "installer_profiles_user_id_users_id_fk",
          "tableFrom": "installer_profiles",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "installer_profiles_select_policy": {
          "name": "installer_profiles_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "installer_profiles_insert_policy": {
          "name": "installer_profiles_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "installer_profiles_update_policy": {
          "name": "installer_profiles_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "installer_profiles_delete_policy": {
          "name": "installer_profiles_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.installer_skills": {
      "name": "installer_skills",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "installer_id": {
          "name": "installer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "skill": {
          "name": "skill",
          "type": "installer_skill",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "proficiency_level": {
          "name": "proficiency_level",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 3
        },
        "years_experience": {
          "name": "years_experience",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "projects_completed": {
          "name": "projects_completed",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "is_verified": {
          "name": "is_verified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_installer_skills_installer_skill": {
          "name": "idx_installer_skills_installer_skill",
          "columns": [
            {
              "expression": "installer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "skill",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_installer_skills_org_installer": {
          "name": "idx_installer_skills_org_installer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "installer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "installer_skills_organization_id_organizations_id_fk": {
          "name": "installer_skills_organization_id_organizations_id_fk",
          "tableFrom": "installer_skills",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "installer_skills_installer_id_installer_profiles_id_fk": {
          "name": "installer_skills_installer_id_installer_profiles_id_fk",
          "tableFrom": "installer_skills",
          "tableTo": "installer_profiles",
          "columnsFrom": [
            "installer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "installer_skills_select_policy": {
          "name": "installer_skills_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "installer_skills_insert_policy": {
          "name": "installer_skills_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "installer_skills_update_policy": {
          "name": "installer_skills_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "installer_skills_delete_policy": {
          "name": "installer_skills_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.installer_territories": {
      "name": "installer_territories",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "installer_id": {
          "name": "installer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "postcode": {
          "name": "postcode",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "suburb": {
          "name": "suburb",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "state": {
          "name": "state",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_installer_territories_installer_postcode": {
          "name": "idx_installer_territories_installer_postcode",
          "columns": [
            {
              "expression": "installer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "postcode",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_installer_territories_postcode": {
          "name": "idx_installer_territories_postcode",
          "columns": [
            {
              "expression": "postcode",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_installer_territories_org_postcode": {
          "name": "idx_installer_territories_org_postcode",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "postcode",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "installer_territories_organization_id_organizations_id_fk": {
          "name": "installer_territories_organization_id_organizations_id_fk",
          "tableFrom": "installer_territories",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "installer_territories_installer_id_installer_profiles_id_fk": {
          "name": "installer_territories_installer_id_installer_profiles_id_fk",
          "tableFrom": "installer_territories",
          "tableTo": "installer_profiles",
          "columnsFrom": [
            "installer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "installer_territories_select_policy": {
          "name": "installer_territories_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "installer_territories_insert_policy": {
          "name": "installer_territories_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "installer_territories_update_policy": {
          "name": "installer_territories_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "installer_territories_delete_policy": {
          "name": "installer_territories_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.project_bom": {
      "name": "project_bom",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "bom_number": {
          "name": "bom_number",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "revision": {
          "name": "revision",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "status": {
          "name": "status",
          "type": "bom_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "title": {
          "name": "title",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "estimated_material_cost": {
          "name": "estimated_material_cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "actual_material_cost": {
          "name": "actual_material_cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "approved_by": {
          "name": "approved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_project_bom_org_project": {
          "name": "idx_project_bom_org_project",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_project_bom_org_number": {
          "name": "idx_project_bom_org_number",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "bom_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_project_bom_org_status": {
          "name": "idx_project_bom_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "project_bom_organization_id_organizations_id_fk": {
          "name": "project_bom_organization_id_organizations_id_fk",
          "tableFrom": "project_bom",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "project_bom_project_id_projects_id_fk": {
          "name": "project_bom_project_id_projects_id_fk",
          "tableFrom": "project_bom",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "project_bom_approved_by_users_id_fk": {
          "name": "project_bom_approved_by_users_id_fk",
          "tableFrom": "project_bom",
          "tableTo": "users",
          "columnsFrom": [
            "approved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "project_bom_select_policy": {
          "name": "project_bom_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "project_bom_insert_policy": {
          "name": "project_bom_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "project_bom_update_policy": {
          "name": "project_bom_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "project_bom_delete_policy": {
          "name": "project_bom_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.project_bom_items": {
      "name": "project_bom_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "bom_id": {
          "name": "bom_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "quantity_estimated": {
          "name": "quantity_estimated",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": true
        },
        "quantity_ordered": {
          "name": "quantity_ordered",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "quantity_received": {
          "name": "quantity_received",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "quantity_installed": {
          "name": "quantity_installed",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "unit_cost_estimated": {
          "name": "unit_cost_estimated",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "unit_cost_actual": {
          "name": "unit_cost_actual",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "bom_item_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'planned'"
        },
        "specifications": {
          "name": "specifications",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "site_visit_id": {
          "name": "site_visit_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_project_bom_items_org_bom": {
          "name": "idx_project_bom_items_org_bom",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "bom_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_project_bom_items_org_project": {
          "name": "idx_project_bom_items_org_project",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_project_bom_items_org_product": {
          "name": "idx_project_bom_items_org_product",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_project_bom_items_org_status": {
          "name": "idx_project_bom_items_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_project_bom_items_site_visit": {
          "name": "idx_project_bom_items_site_visit",
          "columns": [
            {
              "expression": "site_visit_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "project_bom_items_organization_id_organizations_id_fk": {
          "name": "project_bom_items_organization_id_organizations_id_fk",
          "tableFrom": "project_bom_items",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "project_bom_items_bom_id_project_bom_id_fk": {
          "name": "project_bom_items_bom_id_project_bom_id_fk",
          "tableFrom": "project_bom_items",
          "tableTo": "project_bom",
          "columnsFrom": [
            "bom_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "project_bom_items_project_id_projects_id_fk": {
          "name": "project_bom_items_project_id_projects_id_fk",
          "tableFrom": "project_bom_items",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "project_bom_items_product_id_products_id_fk": {
          "name": "project_bom_items_product_id_products_id_fk",
          "tableFrom": "project_bom_items",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "project_bom_items_select_policy": {
          "name": "project_bom_items_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "project_bom_items_insert_policy": {
          "name": "project_bom_items_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "project_bom_items_update_policy": {
          "name": "project_bom_items_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "project_bom_items_delete_policy": {
          "name": "project_bom_items_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.attachments": {
      "name": "attachments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "uploaded_by": {
          "name": "uploaded_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "filename": {
          "name": "filename",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "original_filename": {
          "name": "original_filename",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "mime_type": {
          "name": "mime_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "size_bytes": {
          "name": "size_bytes",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "storage_key": {
          "name": "storage_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "bucket": {
          "name": "bucket",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'attachments'"
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_attachments_storage_key_unique": {
          "name": "idx_attachments_storage_key_unique",
          "columns": [
            {
              "expression": "storage_key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_attachments_org": {
          "name": "idx_attachments_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_attachments_entity": {
          "name": "idx_attachments_entity",
          "columns": [
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_attachments_uploader": {
          "name": "idx_attachments_uploader",
          "columns": [
            {
              "expression": "uploaded_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "attachments_organization_id_organizations_id_fk": {
          "name": "attachments_organization_id_organizations_id_fk",
          "tableFrom": "attachments",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "attachments_uploaded_by_users_id_fk": {
          "name": "attachments_uploaded_by_users_id_fk",
          "tableFrom": "attachments",
          "tableTo": "users",
          "columnsFrom": [
            "uploaded_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "attachments_select_policy": {
          "name": "attachments_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "attachments_insert_policy": {
          "name": "attachments_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "attachments_update_policy": {
          "name": "attachments_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "attachments_delete_policy": {
          "name": "attachments_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.sla_configurations": {
      "name": "sla_configurations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "domain": {
          "name": "domain",
          "type": "sla_domain",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "response_target_value": {
          "name": "response_target_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "response_target_unit": {
          "name": "response_target_unit",
          "type": "sla_target_unit",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "resolution_target_value": {
          "name": "resolution_target_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "resolution_target_unit": {
          "name": "resolution_target_unit",
          "type": "sla_target_unit",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "at_risk_threshold_percent": {
          "name": "at_risk_threshold_percent",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 25
        },
        "escalate_on_breach": {
          "name": "escalate_on_breach",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "escalate_to_user_id": {
          "name": "escalate_to_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "business_hours_config_id": {
          "name": "business_hours_config_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "priority_order": {
          "name": "priority_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 100
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_sla_config_org_domain_name": {
          "name": "idx_sla_config_org_domain_name",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "domain",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_sla_config_org_domain": {
          "name": "idx_sla_config_org_domain",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "domain",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_sla_config_default": {
          "name": "idx_sla_config_default",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "domain",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_default",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "sla_configurations_organization_id_organizations_id_fk": {
          "name": "sla_configurations_organization_id_organizations_id_fk",
          "tableFrom": "sla_configurations",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "sla_configurations_select_policy": {
          "name": "sla_configurations_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "sla_configurations_insert_policy": {
          "name": "sla_configurations_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "sla_configurations_update_policy": {
          "name": "sla_configurations_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "sla_configurations_delete_policy": {
          "name": "sla_configurations_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.sla_tracking": {
      "name": "sla_tracking",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "domain": {
          "name": "domain",
          "type": "sla_domain",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "sla_configuration_id": {
          "name": "sla_configuration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "response_due_at": {
          "name": "response_due_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "responded_at": {
          "name": "responded_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "response_breached": {
          "name": "response_breached",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "resolution_due_at": {
          "name": "resolution_due_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "resolution_breached": {
          "name": "resolution_breached",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "response_time_seconds": {
          "name": "response_time_seconds",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "resolution_time_seconds": {
          "name": "resolution_time_seconds",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "is_paused": {
          "name": "is_paused",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "paused_at": {
          "name": "paused_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "pause_reason": {
          "name": "pause_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "total_paused_duration_seconds": {
          "name": "total_paused_duration_seconds",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "status": {
          "name": "status",
          "type": "sla_tracking_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_sla_tracking_entity": {
          "name": "idx_sla_tracking_entity",
          "columns": [
            {
              "expression": "domain",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_sla_tracking_due_dates": {
          "name": "idx_sla_tracking_due_dates",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "response_due_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "resolution_due_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_sla_tracking_status": {
          "name": "idx_sla_tracking_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_sla_tracking_config": {
          "name": "idx_sla_tracking_config",
          "columns": [
            {
              "expression": "sla_configuration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "sla_tracking_organization_id_organizations_id_fk": {
          "name": "sla_tracking_organization_id_organizations_id_fk",
          "tableFrom": "sla_tracking",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "sla_tracking_select_policy": {
          "name": "sla_tracking_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "sla_tracking_insert_policy": {
          "name": "sla_tracking_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "sla_tracking_update_policy": {
          "name": "sla_tracking_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "sla_tracking_delete_policy": {
          "name": "sla_tracking_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "sla_tracking_entity_type_check": {
          "name": "sla_tracking_entity_type_check",
          "value": "\"sla_tracking\".\"entity_type\" IN ('issue','warranty_claim','job_assignment')"
        }
      },
      "isRLSEnabled": false
    },
    "public.sla_events": {
      "name": "sla_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "sla_tracking_id": {
          "name": "sla_tracking_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "sla_event_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "event_data": {
          "name": "event_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "triggered_by_user_id": {
          "name": "triggered_by_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "triggered_at": {
          "name": "triggered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_sla_events_tracking": {
          "name": "idx_sla_events_tracking",
          "columns": [
            {
              "expression": "sla_tracking_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "triggered_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_sla_events_org_type": {
          "name": "idx_sla_events_org_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "event_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "triggered_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "sla_events_organization_id_organizations_id_fk": {
          "name": "sla_events_organization_id_organizations_id_fk",
          "tableFrom": "sla_events",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "sla_events_select_policy": {
          "name": "sla_events_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "sla_events_insert_policy": {
          "name": "sla_events_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "sla_events_update_policy": {
          "name": "sla_events_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "sla_events_delete_policy": {
          "name": "sla_events_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.issues": {
      "name": "issues",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "issue_number": {
          "name": "issue_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'ISS-' || substr(gen_random_uuid()::text, 1, 8)"
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "issue_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'other'"
        },
        "priority": {
          "name": "priority",
          "type": "issue_priority",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'medium'"
        },
        "status": {
          "name": "status",
          "type": "issue_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'open'"
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "assigned_to_user_id": {
          "name": "assigned_to_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "sla_tracking_id": {
          "name": "sla_tracking_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "hold_reason": {
          "name": "hold_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "escalated_at": {
          "name": "escalated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "escalated_by": {
          "name": "escalated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "escalation_reason": {
          "name": "escalation_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "resolution_notes": {
          "name": "resolution_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_issues_customer": {
          "name": "idx_issues_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_issues_assignee": {
          "name": "idx_issues_assignee",
          "columns": [
            {
              "expression": "assigned_to_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_issues_status": {
          "name": "idx_issues_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_issues_priority": {
          "name": "idx_issues_priority",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "priority",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_issues_sla_tracking": {
          "name": "idx_issues_sla_tracking",
          "columns": [
            {
              "expression": "sla_tracking_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_issues_escalated": {
          "name": "idx_issues_escalated",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "escalated_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_issues_org_created": {
          "name": "idx_issues_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "issues_organization_id_organizations_id_fk": {
          "name": "issues_organization_id_organizations_id_fk",
          "tableFrom": "issues",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "issues_customer_id_customers_id_fk": {
          "name": "issues_customer_id_customers_id_fk",
          "tableFrom": "issues",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "issues_assigned_to_user_id_users_id_fk": {
          "name": "issues_assigned_to_user_id_users_id_fk",
          "tableFrom": "issues",
          "tableTo": "users",
          "columnsFrom": [
            "assigned_to_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "issues_sla_tracking_id_sla_tracking_id_fk": {
          "name": "issues_sla_tracking_id_sla_tracking_id_fk",
          "tableFrom": "issues",
          "tableTo": "sla_tracking",
          "columnsFrom": [
            "sla_tracking_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "issues_select_policy": {
          "name": "issues_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "issues_insert_policy": {
          "name": "issues_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "issues_update_policy": {
          "name": "issues_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "issues_delete_policy": {
          "name": "issues_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.escalation_history": {
      "name": "escalation_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "issue_id": {
          "name": "issue_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "performed_by_user_id": {
          "name": "performed_by_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "escalation_rule_id": {
          "name": "escalation_rule_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "escalated_to_user_id": {
          "name": "escalated_to_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "previous_assignee_id": {
          "name": "previous_assignee_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_escalation_history_issue": {
          "name": "idx_escalation_history_issue",
          "columns": [
            {
              "expression": "issue_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_escalation_history_performed_by": {
          "name": "idx_escalation_history_performed_by",
          "columns": [
            {
              "expression": "performed_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "escalation_history_organization_id_organizations_id_fk": {
          "name": "escalation_history_organization_id_organizations_id_fk",
          "tableFrom": "escalation_history",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "escalation_history_select_policy": {
          "name": "escalation_history_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "escalation_history_insert_policy": {
          "name": "escalation_history_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "escalation_history_update_policy": {
          "name": "escalation_history_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "escalation_history_delete_policy": {
          "name": "escalation_history_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.escalation_rules": {
      "name": "escalation_rules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "condition": {
          "name": "condition",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "escalate_to_user_id": {
          "name": "escalate_to_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_escalation_rules_org_active": {
          "name": "idx_escalation_rules_org_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "priority",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "escalation_rules_organization_id_organizations_id_fk": {
          "name": "escalation_rules_organization_id_organizations_id_fk",
          "tableFrom": "escalation_rules",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "escalation_rules_select_policy": {
          "name": "escalation_rules_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "escalation_rules_insert_policy": {
          "name": "escalation_rules_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "escalation_rules_update_policy": {
          "name": "escalation_rules_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "escalation_rules_delete_policy": {
          "name": "escalation_rules_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.return_authorizations": {
      "name": "return_authorizations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "rma_number": {
          "name": "rma_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "issue_id": {
          "name": "issue_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "rma_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'requested'"
        },
        "reason": {
          "name": "reason",
          "type": "rma_reason",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "reason_details": {
          "name": "reason_details",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "resolution": {
          "name": "resolution",
          "type": "rma_resolution",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "resolution_details": {
          "name": "resolution_details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "inspection_notes": {
          "name": "inspection_notes",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "internal_notes": {
          "name": "internal_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_notes": {
          "name": "customer_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "approved_by": {
          "name": "approved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "received_at": {
          "name": "received_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "received_by": {
          "name": "received_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "processed_at": {
          "name": "processed_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "processed_by": {
          "name": "processed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "rejected_at": {
          "name": "rejected_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "rejected_by": {
          "name": "rejected_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "rejection_reason": {
          "name": "rejection_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sequence_number": {
          "name": "sequence_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_rma_number_org_unique": {
          "name": "idx_rma_number_org_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "rma_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_rma_issue": {
          "name": "idx_rma_issue",
          "columns": [
            {
              "expression": "issue_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_rma_customer": {
          "name": "idx_rma_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_rma_order": {
          "name": "idx_rma_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_rma_org_status": {
          "name": "idx_rma_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_rma_org_created": {
          "name": "idx_rma_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "return_authorizations_organization_id_organizations_id_fk": {
          "name": "return_authorizations_organization_id_organizations_id_fk",
          "tableFrom": "return_authorizations",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "return_authorizations_issue_id_issues_id_fk": {
          "name": "return_authorizations_issue_id_issues_id_fk",
          "tableFrom": "return_authorizations",
          "tableTo": "issues",
          "columnsFrom": [
            "issue_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "return_authorizations_customer_id_customers_id_fk": {
          "name": "return_authorizations_customer_id_customers_id_fk",
          "tableFrom": "return_authorizations",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "return_authorizations_order_id_orders_id_fk": {
          "name": "return_authorizations_order_id_orders_id_fk",
          "tableFrom": "return_authorizations",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "return_authorizations_approved_by_users_id_fk": {
          "name": "return_authorizations_approved_by_users_id_fk",
          "tableFrom": "return_authorizations",
          "tableTo": "users",
          "columnsFrom": [
            "approved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "return_authorizations_received_by_users_id_fk": {
          "name": "return_authorizations_received_by_users_id_fk",
          "tableFrom": "return_authorizations",
          "tableTo": "users",
          "columnsFrom": [
            "received_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "return_authorizations_processed_by_users_id_fk": {
          "name": "return_authorizations_processed_by_users_id_fk",
          "tableFrom": "return_authorizations",
          "tableTo": "users",
          "columnsFrom": [
            "processed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "return_authorizations_rejected_by_users_id_fk": {
          "name": "return_authorizations_rejected_by_users_id_fk",
          "tableFrom": "return_authorizations",
          "tableTo": "users",
          "columnsFrom": [
            "rejected_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "return_authorizations_select_policy": {
          "name": "return_authorizations_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "return_authorizations_insert_policy": {
          "name": "return_authorizations_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "return_authorizations_update_policy": {
          "name": "return_authorizations_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "return_authorizations_delete_policy": {
          "name": "return_authorizations_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.rma_line_items": {
      "name": "rma_line_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "rma_id": {
          "name": "rma_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_line_item_id": {
          "name": "order_line_item_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "quantity_returned": {
          "name": "quantity_returned",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "item_reason": {
          "name": "item_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "item_condition": {
          "name": "item_condition",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "serial_number": {
          "name": "serial_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_rma_line_items_rma": {
          "name": "idx_rma_line_items_rma",
          "columns": [
            {
              "expression": "rma_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_rma_line_items_order_line": {
          "name": "idx_rma_line_items_order_line",
          "columns": [
            {
              "expression": "order_line_item_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "rma_line_items_rma_id_return_authorizations_id_fk": {
          "name": "rma_line_items_rma_id_return_authorizations_id_fk",
          "tableFrom": "rma_line_items",
          "tableTo": "return_authorizations",
          "columnsFrom": [
            "rma_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "rma_line_items_order_line_item_id_order_line_items_id_fk": {
          "name": "rma_line_items_order_line_item_id_order_line_items_id_fk",
          "tableFrom": "rma_line_items",
          "tableTo": "order_line_items",
          "columnsFrom": [
            "order_line_item_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "rma_line_items_select_policy": {
          "name": "rma_line_items_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "EXISTS (\n        SELECT 1 FROM return_authorizations ra\n        WHERE ra.id = rma_id\n        AND ra.organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )"
        },
        "rma_line_items_insert_policy": {
          "name": "rma_line_items_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "EXISTS (\n        SELECT 1 FROM return_authorizations ra\n        WHERE ra.id = rma_id\n        AND ra.organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )"
        },
        "rma_line_items_update_policy": {
          "name": "rma_line_items_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "EXISTS (\n        SELECT 1 FROM return_authorizations ra\n        WHERE ra.id = rma_id\n        AND ra.organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )",
          "withCheck": "EXISTS (\n        SELECT 1 FROM return_authorizations ra\n        WHERE ra.id = rma_id\n        AND ra.organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )"
        },
        "rma_line_items_delete_policy": {
          "name": "rma_line_items_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "EXISTS (\n        SELECT 1 FROM return_authorizations ra\n        WHERE ra.id = rma_id\n        AND ra.organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.issue_templates": {
      "name": "issue_templates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "issue_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "default_priority": {
          "name": "default_priority",
          "type": "issue_priority",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'medium'"
        },
        "default_assignee_id": {
          "name": "default_assignee_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "title_template": {
          "name": "title_template",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description_prompt": {
          "name": "description_prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "required_fields": {
          "name": "required_fields",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "defaults": {
          "name": "defaults",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "usage_count": {
          "name": "usage_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "issue_templates_organization_idx": {
          "name": "issue_templates_organization_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "issue_templates_type_idx": {
          "name": "issue_templates_type_idx",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "issue_templates_usage_idx": {
          "name": "issue_templates_usage_idx",
          "columns": [
            {
              "expression": "usage_count",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "issue_templates_active_idx": {
          "name": "issue_templates_active_idx",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "issue_templates_organization_id_organizations_id_fk": {
          "name": "issue_templates_organization_id_organizations_id_fk",
          "tableFrom": "issue_templates",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "issue_templates_default_assignee_id_users_id_fk": {
          "name": "issue_templates_default_assignee_id_users_id_fk",
          "tableFrom": "issue_templates",
          "tableTo": "users",
          "columnsFrom": [
            "default_assignee_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "issue_templates_select_policy": {
          "name": "issue_templates_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "issue_templates_insert_policy": {
          "name": "issue_templates_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "issue_templates_update_policy": {
          "name": "issue_templates_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "issue_templates_delete_policy": {
          "name": "issue_templates_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.csat_responses": {
      "name": "csat_responses",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "issue_id": {
          "name": "issue_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "rating": {
          "name": "rating",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "comment": {
          "name": "comment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source": {
          "name": "source",
          "type": "csat_source",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "submitted_at": {
          "name": "submitted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "submitted_by_user_id": {
          "name": "submitted_by_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "submitted_by_customer_id": {
          "name": "submitted_by_customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "submitted_by_email": {
          "name": "submitted_by_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "token": {
          "name": "token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "token_expires_at": {
          "name": "token_expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "token_used_at": {
          "name": "token_used_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "csat_responses_organization_idx": {
          "name": "csat_responses_organization_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "csat_responses_issue_idx": {
          "name": "csat_responses_issue_idx",
          "columns": [
            {
              "expression": "issue_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "csat_responses_rating_idx": {
          "name": "csat_responses_rating_idx",
          "columns": [
            {
              "expression": "rating",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "csat_responses_source_idx": {
          "name": "csat_responses_source_idx",
          "columns": [
            {
              "expression": "source",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "csat_responses_submitted_at_idx": {
          "name": "csat_responses_submitted_at_idx",
          "columns": [
            {
              "expression": "submitted_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "csat_responses_token_idx": {
          "name": "csat_responses_token_idx",
          "columns": [
            {
              "expression": "token",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "csat_responses_organization_id_organizations_id_fk": {
          "name": "csat_responses_organization_id_organizations_id_fk",
          "tableFrom": "csat_responses",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "csat_responses_issue_id_issues_id_fk": {
          "name": "csat_responses_issue_id_issues_id_fk",
          "tableFrom": "csat_responses",
          "tableTo": "issues",
          "columnsFrom": [
            "issue_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "csat_responses_submitted_by_user_id_users_id_fk": {
          "name": "csat_responses_submitted_by_user_id_users_id_fk",
          "tableFrom": "csat_responses",
          "tableTo": "users",
          "columnsFrom": [
            "submitted_by_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "csat_responses_submitted_by_customer_id_customers_id_fk": {
          "name": "csat_responses_submitted_by_customer_id_customers_id_fk",
          "tableFrom": "csat_responses",
          "tableTo": "customers",
          "columnsFrom": [
            "submitted_by_customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "csat_responses_token_unique": {
          "name": "csat_responses_token_unique",
          "nullsNotDistinct": false,
          "columns": [
            "token"
          ]
        }
      },
      "policies": {
        "csat_responses_select_policy": {
          "name": "csat_responses_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "csat_responses_insert_policy": {
          "name": "csat_responses_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "csat_responses_update_policy": {
          "name": "csat_responses_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "csat_responses_delete_policy": {
          "name": "csat_responses_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.kb_articles": {
      "name": "kb_articles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "summary": {
          "name": "summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "category_id": {
          "name": "category_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "tags": {
          "name": "tags",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "status": {
          "name": "status",
          "type": "kb_article_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "published_at": {
          "name": "published_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "view_count": {
          "name": "view_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "helpful_count": {
          "name": "helpful_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "not_helpful_count": {
          "name": "not_helpful_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "meta_title": {
          "name": "meta_title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "meta_description": {
          "name": "meta_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "kb_articles_organization_idx": {
          "name": "kb_articles_organization_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "kb_articles_category_idx": {
          "name": "kb_articles_category_idx",
          "columns": [
            {
              "expression": "category_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "kb_articles_status_idx": {
          "name": "kb_articles_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "kb_articles_slug_idx": {
          "name": "kb_articles_slug_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "kb_articles_search_idx": {
          "name": "kb_articles_search_idx",
          "columns": [
            {
              "expression": "title",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "content",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "kb_articles_organization_id_organizations_id_fk": {
          "name": "kb_articles_organization_id_organizations_id_fk",
          "tableFrom": "kb_articles",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "kb_articles_category_id_kb_categories_id_fk": {
          "name": "kb_articles_category_id_kb_categories_id_fk",
          "tableFrom": "kb_articles",
          "tableTo": "kb_categories",
          "columnsFrom": [
            "category_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "kb_articles_select_policy": {
          "name": "kb_articles_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "kb_articles_insert_policy": {
          "name": "kb_articles_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "kb_articles_update_policy": {
          "name": "kb_articles_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "kb_articles_delete_policy": {
          "name": "kb_articles_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.kb_categories": {
      "name": "kb_categories",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "parent_id": {
          "name": "parent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "kb_categories_organization_idx": {
          "name": "kb_categories_organization_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "kb_categories_parent_idx": {
          "name": "kb_categories_parent_idx",
          "columns": [
            {
              "expression": "parent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "kb_categories_slug_idx": {
          "name": "kb_categories_slug_idx",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "kb_categories_organization_id_organizations_id_fk": {
          "name": "kb_categories_organization_id_organizations_id_fk",
          "tableFrom": "kb_categories",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "kb_categories_parent_id_kb_categories_id_fk": {
          "name": "kb_categories_parent_id_kb_categories_id_fk",
          "tableFrom": "kb_categories",
          "tableTo": "kb_categories",
          "columnsFrom": [
            "parent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "kb_categories_select_policy": {
          "name": "kb_categories_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "kb_categories_insert_policy": {
          "name": "kb_categories_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "kb_categories_update_policy": {
          "name": "kb_categories_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "kb_categories_delete_policy": {
          "name": "kb_categories_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.warranties": {
      "name": "warranties",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "warranty_number": {
          "name": "warranty_number",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_serial": {
          "name": "product_serial",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "warranty_policy_id": {
          "name": "warranty_policy_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "registration_date": {
          "name": "registration_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "current_cycle_count": {
          "name": "current_cycle_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "last_cycle_update": {
          "name": "last_cycle_update",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "warranty_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "assigned_user_id": {
          "name": "assigned_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "original_customer_id": {
          "name": "original_customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "transferred_at": {
          "name": "transferred_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "expiry_alert_opt_out": {
          "name": "expiry_alert_opt_out",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "last_expiry_alert_sent": {
          "name": "last_expiry_alert_sent",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "certificate_url": {
          "name": "certificate_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_warranties_number_org": {
          "name": "idx_warranties_number_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "warranty_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "deleted_at IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranties_serial_org": {
          "name": "idx_warranties_serial_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_serial",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "product_serial IS NOT NULL AND deleted_at IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranties_org": {
          "name": "idx_warranties_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranties_customer": {
          "name": "idx_warranties_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranties_product": {
          "name": "idx_warranties_product",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranties_policy": {
          "name": "idx_warranties_policy",
          "columns": [
            {
              "expression": "warranty_policy_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranties_order": {
          "name": "idx_warranties_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranties_status": {
          "name": "idx_warranties_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranties_expiry": {
          "name": "idx_warranties_expiry",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "expiry_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "expiry_alert_opt_out",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranties_assigned": {
          "name": "idx_warranties_assigned",
          "columns": [
            {
              "expression": "assigned_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "warranties_organization_id_organizations_id_fk": {
          "name": "warranties_organization_id_organizations_id_fk",
          "tableFrom": "warranties",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "warranties_project_id_projects_id_fk": {
          "name": "warranties_project_id_projects_id_fk",
          "tableFrom": "warranties",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "warranties_select_policy": {
          "name": "warranties_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warranties_insert_policy": {
          "name": "warranties_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warranties_update_policy": {
          "name": "warranties_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warranties_delete_policy": {
          "name": "warranties_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.warranty_items": {
      "name": "warranty_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "warranty_id": {
          "name": "warranty_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_serial": {
          "name": "product_serial",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "inventory_id": {
          "name": "inventory_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "warranty_start_date": {
          "name": "warranty_start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "warranty_end_date": {
          "name": "warranty_end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "warranty_period_months": {
          "name": "warranty_period_months",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "installation_notes": {
          "name": "installation_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_warranty_items_org_warranty": {
          "name": "idx_warranty_items_org_warranty",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "warranty_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_items_org_product": {
          "name": "idx_warranty_items_org_product",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_items_org_serial": {
          "name": "idx_warranty_items_org_serial",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_serial",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_items_warranty": {
          "name": "idx_warranty_items_warranty",
          "columns": [
            {
              "expression": "warranty_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "warranty_items_organization_id_organizations_id_fk": {
          "name": "warranty_items_organization_id_organizations_id_fk",
          "tableFrom": "warranty_items",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "warranty_items_warranty_id_warranties_id_fk": {
          "name": "warranty_items_warranty_id_warranties_id_fk",
          "tableFrom": "warranty_items",
          "tableTo": "warranties",
          "columnsFrom": [
            "warranty_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "warranty_items_product_id_products_id_fk": {
          "name": "warranty_items_product_id_products_id_fk",
          "tableFrom": "warranty_items",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "warranty_items_inventory_id_inventory_id_fk": {
          "name": "warranty_items_inventory_id_inventory_id_fk",
          "tableFrom": "warranty_items",
          "tableTo": "inventory",
          "columnsFrom": [
            "inventory_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "warranty_items_select_policy": {
          "name": "warranty_items_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warranty_items_insert_policy": {
          "name": "warranty_items_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warranty_items_update_policy": {
          "name": "warranty_items_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warranty_items_delete_policy": {
          "name": "warranty_items_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.warranty_claims": {
      "name": "warranty_claims",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "claim_number": {
          "name": "claim_number",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "warranty_id": {
          "name": "warranty_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "issue_id": {
          "name": "issue_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "claim_type": {
          "name": "claim_type",
          "type": "warranty_claim_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "warranty_claim_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'submitted'"
        },
        "resolution_type": {
          "name": "resolution_type",
          "type": "warranty_claim_resolution_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "resolution_notes": {
          "name": "resolution_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "approved_by_user_id": {
          "name": "approved_by_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "denial_reason": {
          "name": "denial_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cost": {
          "name": "cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "cycle_count_at_claim": {
          "name": "cycle_count_at_claim",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "submitted_at": {
          "name": "submitted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "assigned_user_id": {
          "name": "assigned_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "sla_tracking_id": {
          "name": "sla_tracking_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_warranty_claims_number_org": {
          "name": "idx_warranty_claims_number_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "claim_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_claims_org": {
          "name": "idx_warranty_claims_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_claims_warranty": {
          "name": "idx_warranty_claims_warranty",
          "columns": [
            {
              "expression": "warranty_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_claims_customer": {
          "name": "idx_warranty_claims_customer",
          "columns": [
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_claims_issue": {
          "name": "idx_warranty_claims_issue",
          "columns": [
            {
              "expression": "issue_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_claims_status": {
          "name": "idx_warranty_claims_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_claims_type": {
          "name": "idx_warranty_claims_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "claim_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_claims_sla": {
          "name": "idx_warranty_claims_sla",
          "columns": [
            {
              "expression": "sla_tracking_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_claims_assigned": {
          "name": "idx_warranty_claims_assigned",
          "columns": [
            {
              "expression": "assigned_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_claims_org_created": {
          "name": "idx_warranty_claims_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_claims_submitted": {
          "name": "idx_warranty_claims_submitted",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "submitted_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "warranty_claims_organization_id_organizations_id_fk": {
          "name": "warranty_claims_organization_id_organizations_id_fk",
          "tableFrom": "warranty_claims",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "warranty_claims_warranty_id_warranties_id_fk": {
          "name": "warranty_claims_warranty_id_warranties_id_fk",
          "tableFrom": "warranty_claims",
          "tableTo": "warranties",
          "columnsFrom": [
            "warranty_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "warranty_claims_customer_id_customers_id_fk": {
          "name": "warranty_claims_customer_id_customers_id_fk",
          "tableFrom": "warranty_claims",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "warranty_claims_issue_id_issues_id_fk": {
          "name": "warranty_claims_issue_id_issues_id_fk",
          "tableFrom": "warranty_claims",
          "tableTo": "issues",
          "columnsFrom": [
            "issue_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "warranty_claims_approved_by_user_id_users_id_fk": {
          "name": "warranty_claims_approved_by_user_id_users_id_fk",
          "tableFrom": "warranty_claims",
          "tableTo": "users",
          "columnsFrom": [
            "approved_by_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "warranty_claims_assigned_user_id_users_id_fk": {
          "name": "warranty_claims_assigned_user_id_users_id_fk",
          "tableFrom": "warranty_claims",
          "tableTo": "users",
          "columnsFrom": [
            "assigned_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "warranty_claims_sla_tracking_id_sla_tracking_id_fk": {
          "name": "warranty_claims_sla_tracking_id_sla_tracking_id_fk",
          "tableFrom": "warranty_claims",
          "tableTo": "sla_tracking",
          "columnsFrom": [
            "sla_tracking_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "warranty_claims_select_policy": {
          "name": "warranty_claims_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warranty_claims_insert_policy": {
          "name": "warranty_claims_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warranty_claims_update_policy": {
          "name": "warranty_claims_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warranty_claims_delete_policy": {
          "name": "warranty_claims_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.warranty_extensions": {
      "name": "warranty_extensions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "warranty_id": {
          "name": "warranty_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "extension_type": {
          "name": "extension_type",
          "type": "warranty_extension_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "extension_months": {
          "name": "extension_months",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "previous_expiry_date": {
          "name": "previous_expiry_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "new_expiry_date": {
          "name": "new_expiry_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "price": {
          "name": "price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "approved_by_id": {
          "name": "approved_by_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_warranty_extensions_warranty": {
          "name": "idx_warranty_extensions_warranty",
          "columns": [
            {
              "expression": "warranty_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_extensions_org": {
          "name": "idx_warranty_extensions_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_extensions_type": {
          "name": "idx_warranty_extensions_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "extension_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_extensions_approver": {
          "name": "idx_warranty_extensions_approver",
          "columns": [
            {
              "expression": "approved_by_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_extensions_created": {
          "name": "idx_warranty_extensions_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "warranty_extensions_organization_id_organizations_id_fk": {
          "name": "warranty_extensions_organization_id_organizations_id_fk",
          "tableFrom": "warranty_extensions",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "warranty_extensions_select_policy": {
          "name": "warranty_extensions_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warranty_extensions_insert_policy": {
          "name": "warranty_extensions_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warranty_extensions_update_policy": {
          "name": "warranty_extensions_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warranty_extensions_delete_policy": {
          "name": "warranty_extensions_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.warranty_policies": {
      "name": "warranty_policies",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "warranty_policy_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "duration_months": {
          "name": "duration_months",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "cycle_limit": {
          "name": "cycle_limit",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "terms": {
          "name": "terms",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "sla_configuration_id": {
          "name": "sla_configuration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_warranty_policies_name_org": {
          "name": "idx_warranty_policies_name_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_policies_org": {
          "name": "idx_warranty_policies_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_policies_type": {
          "name": "idx_warranty_policies_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_policies_default": {
          "name": "idx_warranty_policies_default",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_default",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_warranty_policies_sla": {
          "name": "idx_warranty_policies_sla",
          "columns": [
            {
              "expression": "sla_configuration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "warranty_policies_organization_id_organizations_id_fk": {
          "name": "warranty_policies_organization_id_organizations_id_fk",
          "tableFrom": "warranty_policies",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "warranty_policies_select_policy": {
          "name": "warranty_policies_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warranty_policies_insert_policy": {
          "name": "warranty_policies_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warranty_policies_update_policy": {
          "name": "warranty_policies_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "warranty_policies_delete_policy": {
          "name": "warranty_policies_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.supplier_price_lists": {
      "name": "supplier_price_lists",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "supplier_id": {
          "name": "supplier_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "supplier_name": {
          "name": "supplier_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "product_name": {
          "name": "product_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "product_sku": {
          "name": "product_sku",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "base_price": {
          "name": "base_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "price": {
          "name": "price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "effective_price": {
          "name": "effective_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'AUD'"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "min_quantity": {
          "name": "min_quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "max_quantity": {
          "name": "max_quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "min_order_qty": {
          "name": "min_order_qty",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "max_order_qty": {
          "name": "max_order_qty",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "last_updated": {
          "name": "last_updated",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "discount_percent": {
          "name": "discount_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "discount_type": {
          "name": "discount_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "discount_value": {
          "name": "discount_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "effective_date": {
          "name": "effective_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_DATE"
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "is_preferred_price": {
          "name": "is_preferred_price",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "supplier_product_code": {
          "name": "supplier_product_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "supplier_product_name": {
          "name": "supplier_product_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "lead_time_days": {
          "name": "lead_time_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_supplier_price_lists_supplier_product_qty_unique": {
          "name": "idx_supplier_price_lists_supplier_product_qty_unique",
          "columns": [
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "min_quantity",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"supplier_price_lists\".\"is_active\" = true",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_lists_supplier": {
          "name": "idx_supplier_price_lists_supplier",
          "columns": [
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_lists_org_supplier": {
          "name": "idx_supplier_price_lists_org_supplier",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_lists_product": {
          "name": "idx_supplier_price_lists_product",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_lists_org_product": {
          "name": "idx_supplier_price_lists_org_product",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_lists_supplier_product": {
          "name": "idx_supplier_price_lists_supplier_product",
          "columns": [
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_lists_org_active": {
          "name": "idx_supplier_price_lists_org_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_lists_preferred": {
          "name": "idx_supplier_price_lists_preferred",
          "columns": [
            {
              "expression": "is_preferred_price",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_lists_effective_date": {
          "name": "idx_supplier_price_lists_effective_date",
          "columns": [
            {
              "expression": "effective_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_lists_expiry_date": {
          "name": "idx_supplier_price_lists_expiry_date",
          "columns": [
            {
              "expression": "expiry_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_lists_org_created_id": {
          "name": "idx_supplier_price_lists_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "supplier_price_lists_organization_id_organizations_id_fk": {
          "name": "supplier_price_lists_organization_id_organizations_id_fk",
          "tableFrom": "supplier_price_lists",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "supplier_price_lists_supplier_id_suppliers_id_fk": {
          "name": "supplier_price_lists_supplier_id_suppliers_id_fk",
          "tableFrom": "supplier_price_lists",
          "tableTo": "suppliers",
          "columnsFrom": [
            "supplier_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "supplier_price_lists_product_id_products_id_fk": {
          "name": "supplier_price_lists_product_id_products_id_fk",
          "tableFrom": "supplier_price_lists",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "supplier_price_lists_select_policy": {
          "name": "supplier_price_lists_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "supplier_price_lists_insert_policy": {
          "name": "supplier_price_lists_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "supplier_price_lists_update_policy": {
          "name": "supplier_price_lists_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "supplier_price_lists_delete_policy": {
          "name": "supplier_price_lists_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "supplier_price_lists_price_non_negative": {
          "name": "supplier_price_lists_price_non_negative",
          "value": "\"supplier_price_lists\".\"price\" >= 0"
        },
        "supplier_price_lists_min_quantity_positive": {
          "name": "supplier_price_lists_min_quantity_positive",
          "value": "\"supplier_price_lists\".\"min_quantity\" > 0"
        },
        "supplier_price_lists_quantity_range": {
          "name": "supplier_price_lists_quantity_range",
          "value": "\"supplier_price_lists\".\"max_quantity\" IS NULL OR \"supplier_price_lists\".\"min_quantity\" IS NULL OR \"supplier_price_lists\".\"max_quantity\" >= \"supplier_price_lists\".\"min_quantity\""
        },
        "supplier_price_lists_date_range": {
          "name": "supplier_price_lists_date_range",
          "value": "\"supplier_price_lists\".\"expiry_date\" IS NULL OR \"supplier_price_lists\".\"effective_date\" IS NULL OR \"supplier_price_lists\".\"expiry_date\" > \"supplier_price_lists\".\"effective_date\""
        },
        "supplier_price_lists_discount_range": {
          "name": "supplier_price_lists_discount_range",
          "value": "\"supplier_price_lists\".\"discount_percent\" IS NULL OR (\"supplier_price_lists\".\"discount_percent\" >= $1 AND \"supplier_price_lists\".\"discount_percent\" <= $2)"
        },
        "supplier_price_lists_lead_time_non_negative": {
          "name": "supplier_price_lists_lead_time_non_negative",
          "value": "\"supplier_price_lists\".\"lead_time_days\" IS NULL OR \"supplier_price_lists\".\"lead_time_days\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.supplier_performance_metrics": {
      "name": "supplier_performance_metrics",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "supplier_id": {
          "name": "supplier_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "metric_month": {
          "name": "metric_month",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "total_orders_delivered": {
          "name": "total_orders_delivered",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "on_time_deliveries": {
          "name": "on_time_deliveries",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "late_deliveries": {
          "name": "late_deliveries",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "average_delivery_days": {
          "name": "average_delivery_days",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "total_items_received": {
          "name": "total_items_received",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "accepted_items": {
          "name": "accepted_items",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "rejected_items": {
          "name": "rejected_items",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "defect_rate": {
          "name": "defect_rate",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "total_spend": {
          "name": "total_spend",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "average_order_value": {
          "name": "average_order_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "average_response_time_hours": {
          "name": "average_response_time_hours",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "delivery_score": {
          "name": "delivery_score",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "quality_score": {
          "name": "quality_score",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "overall_score": {
          "name": "overall_score",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_supplier_performance_metrics_unique": {
          "name": "idx_supplier_performance_metrics_unique",
          "columns": [
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "metric_month",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_performance_metrics_supplier": {
          "name": "idx_supplier_performance_metrics_supplier",
          "columns": [
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_performance_metrics_org_supplier": {
          "name": "idx_supplier_performance_metrics_org_supplier",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_performance_metrics_month": {
          "name": "idx_supplier_performance_metrics_month",
          "columns": [
            {
              "expression": "metric_month",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_performance_metrics_overall": {
          "name": "idx_supplier_performance_metrics_overall",
          "columns": [
            {
              "expression": "overall_score",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "supplier_performance_metrics_organization_id_organizations_id_fk": {
          "name": "supplier_performance_metrics_organization_id_organizations_id_fk",
          "tableFrom": "supplier_performance_metrics",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "supplier_performance_metrics_supplier_id_suppliers_id_fk": {
          "name": "supplier_performance_metrics_supplier_id_suppliers_id_fk",
          "tableFrom": "supplier_performance_metrics",
          "tableTo": "suppliers",
          "columnsFrom": [
            "supplier_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "supplier_performance_metrics_select_policy": {
          "name": "supplier_performance_metrics_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "supplier_performance_metrics_insert_policy": {
          "name": "supplier_performance_metrics_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "supplier_performance_metrics_update_policy": {
          "name": "supplier_performance_metrics_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "supplier_performance_metrics_delete_policy": {
          "name": "supplier_performance_metrics_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "supplier_metrics_delivery_score_range": {
          "name": "supplier_metrics_delivery_score_range",
          "value": "\"supplier_performance_metrics\".\"delivery_score\" IS NULL OR (\"supplier_performance_metrics\".\"delivery_score\" >= 0 AND \"supplier_performance_metrics\".\"delivery_score\" <= 100)"
        },
        "supplier_metrics_quality_score_range": {
          "name": "supplier_metrics_quality_score_range",
          "value": "\"supplier_performance_metrics\".\"quality_score\" IS NULL OR (\"supplier_performance_metrics\".\"quality_score\" >= 0 AND \"supplier_performance_metrics\".\"quality_score\" <= 100)"
        },
        "supplier_metrics_overall_score_range": {
          "name": "supplier_metrics_overall_score_range",
          "value": "\"supplier_performance_metrics\".\"overall_score\" IS NULL OR (\"supplier_performance_metrics\".\"overall_score\" >= 0 AND \"supplier_performance_metrics\".\"overall_score\" <= 100)"
        },
        "supplier_metrics_defect_rate_range": {
          "name": "supplier_metrics_defect_rate_range",
          "value": "\"supplier_performance_metrics\".\"defect_rate\" IS NULL OR (\"supplier_performance_metrics\".\"defect_rate\" >= 0 AND \"supplier_performance_metrics\".\"defect_rate\" <= 100)"
        }
      },
      "isRLSEnabled": false
    },
    "public.suppliers": {
      "name": "suppliers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "supplier_code": {
          "name": "supplier_code",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'SUPP-' || substr(gen_random_uuid()::text, 1, 8)"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "legal_name": {
          "name": "legal_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "website": {
          "name": "website",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "supplier_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "supplier_type": {
          "name": "supplier_type",
          "type": "supplier_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "tax_id": {
          "name": "tax_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "registration_number": {
          "name": "registration_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "primary_contact_name": {
          "name": "primary_contact_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "primary_contact_email": {
          "name": "primary_contact_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "primary_contact_phone": {
          "name": "primary_contact_phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "billing_address": {
          "name": "billing_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "shipping_address": {
          "name": "shipping_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "payment_terms": {
          "name": "payment_terms",
          "type": "payment_terms",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'net_30'"
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'AUD'"
        },
        "lead_time_days": {
          "name": "lead_time_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "minimum_order_value": {
          "name": "minimum_order_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "maximum_order_value": {
          "name": "maximum_order_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "quality_rating": {
          "name": "quality_rating",
          "type": "numeric(3, 1)",
          "primaryKey": false,
          "notNull": false
        },
        "delivery_rating": {
          "name": "delivery_rating",
          "type": "numeric(3, 1)",
          "primaryKey": false,
          "notNull": false
        },
        "communication_rating": {
          "name": "communication_rating",
          "type": "numeric(3, 1)",
          "primaryKey": false,
          "notNull": false
        },
        "overall_rating": {
          "name": "overall_rating",
          "type": "numeric(3, 1)",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "(quality_rating + delivery_rating + communication_rating) / 3",
            "type": "stored"
          }
        },
        "rating_updated_at": {
          "name": "rating_updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "total_purchase_orders": {
          "name": "total_purchase_orders",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_purchase_value": {
          "name": "total_purchase_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "average_order_value": {
          "name": "average_order_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "first_order_date": {
          "name": "first_order_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "last_order_date": {
          "name": "last_order_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "tags": {
          "name": "tags",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "custom_fields": {
          "name": "custom_fields",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_suppliers_code_org_unique": {
          "name": "idx_suppliers_code_org_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "supplier_code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"suppliers\".\"deleted_at\" IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_suppliers_email_org_unique": {
          "name": "idx_suppliers_email_org_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"suppliers\".\"email\" IS NOT NULL AND \"suppliers\".\"deleted_at\" IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_suppliers_org_status": {
          "name": "idx_suppliers_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_suppliers_org_type": {
          "name": "idx_suppliers_org_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "supplier_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_suppliers_org_overall_rating": {
          "name": "idx_suppliers_org_overall_rating",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "overall_rating",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_suppliers_org_last_order": {
          "name": "idx_suppliers_org_last_order",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "last_order_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_suppliers_org_created_id": {
          "name": "idx_suppliers_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_suppliers_name_search": {
          "name": "idx_suppliers_name_search",
          "columns": [
            {
              "expression": "to_tsvector('english', \"name\")",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_suppliers_tags_gin": {
          "name": "idx_suppliers_tags_gin",
          "columns": [
            {
              "expression": "tags",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        }
      },
      "foreignKeys": {
        "suppliers_organization_id_organizations_id_fk": {
          "name": "suppliers_organization_id_organizations_id_fk",
          "tableFrom": "suppliers",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "suppliers_select_policy": {
          "name": "suppliers_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "suppliers_insert_policy": {
          "name": "suppliers_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "suppliers_update_policy": {
          "name": "suppliers_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "suppliers_delete_policy": {
          "name": "suppliers_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "suppliers_quality_rating_range": {
          "name": "suppliers_quality_rating_range",
          "value": "\"suppliers\".\"quality_rating\" IS NULL OR (\"suppliers\".\"quality_rating\" >= $1 AND \"suppliers\".\"quality_rating\" <= $2)"
        },
        "suppliers_delivery_rating_range": {
          "name": "suppliers_delivery_rating_range",
          "value": "\"suppliers\".\"delivery_rating\" IS NULL OR (\"suppliers\".\"delivery_rating\" >= $1 AND \"suppliers\".\"delivery_rating\" <= $2)"
        },
        "suppliers_communication_rating_range": {
          "name": "suppliers_communication_rating_range",
          "value": "\"suppliers\".\"communication_rating\" IS NULL OR (\"suppliers\".\"communication_rating\" >= $1 AND \"suppliers\".\"communication_rating\" <= $2)"
        },
        "suppliers_overall_rating_range": {
          "name": "suppliers_overall_rating_range",
          "value": "\"suppliers\".\"overall_rating\" IS NULL OR (\"suppliers\".\"overall_rating\" >= $1 AND \"suppliers\".\"overall_rating\" <= $2)"
        },
        "suppliers_order_value_range": {
          "name": "suppliers_order_value_range",
          "value": "\"suppliers\".\"maximum_order_value\" IS NULL OR \"suppliers\".\"minimum_order_value\" IS NULL OR \"suppliers\".\"maximum_order_value\" >= \"suppliers\".\"minimum_order_value\""
        }
      },
      "isRLSEnabled": false
    },
    "public.purchase_orders": {
      "name": "purchase_orders",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "po_number": {
          "name": "po_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'PO-' || to_char(NOW(), 'YYYYMMDD') || '-' || substr(gen_random_uuid()::text, 1, 6)"
        },
        "supplier_id": {
          "name": "supplier_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "purchase_order_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "order_date": {
          "name": "order_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_DATE"
        },
        "required_date": {
          "name": "required_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "expected_delivery_date": {
          "name": "expected_delivery_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "actual_delivery_date": {
          "name": "actual_delivery_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "ship_to_address": {
          "name": "ship_to_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "bill_to_address": {
          "name": "bill_to_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "subtotal": {
          "name": "subtotal",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "tax_amount": {
          "name": "tax_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "shipping_amount": {
          "name": "shipping_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "discount_amount": {
          "name": "discount_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_amount": {
          "name": "total_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'AUD'"
        },
        "exchange_rate": {
          "name": "exchange_rate",
          "type": "numeric(12, 6)",
          "primaryKey": false,
          "notNull": false
        },
        "exchange_date": {
          "name": "exchange_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "payment_terms": {
          "name": "payment_terms",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ordered_by": {
          "name": "ordered_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "ordered_at": {
          "name": "ordered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "approved_by": {
          "name": "approved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "approval_notes": {
          "name": "approval_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "closed_by": {
          "name": "closed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "closed_at": {
          "name": "closed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "closed_reason": {
          "name": "closed_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "supplier_reference": {
          "name": "supplier_reference",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "internal_reference": {
          "name": "internal_reference",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "internal_notes": {
          "name": "internal_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_purchase_orders_po_number_org_unique": {
          "name": "idx_purchase_orders_po_number_org_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "po_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"purchase_orders\".\"deleted_at\" IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_orders_org_status": {
          "name": "idx_purchase_orders_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_orders_org_supplier": {
          "name": "idx_purchase_orders_org_supplier",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_orders_supplier": {
          "name": "idx_purchase_orders_supplier",
          "columns": [
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_orders_supplier_status": {
          "name": "idx_purchase_orders_supplier_status",
          "columns": [
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_orders_order_date": {
          "name": "idx_purchase_orders_order_date",
          "columns": [
            {
              "expression": "order_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_orders_required_date": {
          "name": "idx_purchase_orders_required_date",
          "columns": [
            {
              "expression": "required_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_orders_expected_delivery": {
          "name": "idx_purchase_orders_expected_delivery",
          "columns": [
            {
              "expression": "expected_delivery_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_orders_org_status_order_date": {
          "name": "idx_purchase_orders_org_status_order_date",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "order_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_orders_org_created_id": {
          "name": "idx_purchase_orders_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_orders_ordered_by": {
          "name": "idx_purchase_orders_ordered_by",
          "columns": [
            {
              "expression": "ordered_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_orders_approved_by": {
          "name": "idx_purchase_orders_approved_by",
          "columns": [
            {
              "expression": "approved_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "purchase_orders_organization_id_organizations_id_fk": {
          "name": "purchase_orders_organization_id_organizations_id_fk",
          "tableFrom": "purchase_orders",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "purchase_orders_supplier_id_suppliers_id_fk": {
          "name": "purchase_orders_supplier_id_suppliers_id_fk",
          "tableFrom": "purchase_orders",
          "tableTo": "suppliers",
          "columnsFrom": [
            "supplier_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "purchase_orders_ordered_by_users_id_fk": {
          "name": "purchase_orders_ordered_by_users_id_fk",
          "tableFrom": "purchase_orders",
          "tableTo": "users",
          "columnsFrom": [
            "ordered_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "purchase_orders_approved_by_users_id_fk": {
          "name": "purchase_orders_approved_by_users_id_fk",
          "tableFrom": "purchase_orders",
          "tableTo": "users",
          "columnsFrom": [
            "approved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "purchase_orders_closed_by_users_id_fk": {
          "name": "purchase_orders_closed_by_users_id_fk",
          "tableFrom": "purchase_orders",
          "tableTo": "users",
          "columnsFrom": [
            "closed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "purchase_orders_select_policy": {
          "name": "purchase_orders_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_orders_insert_policy": {
          "name": "purchase_orders_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_orders_update_policy": {
          "name": "purchase_orders_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_orders_delete_policy": {
          "name": "purchase_orders_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "purchase_orders_total_calc": {
          "name": "purchase_orders_total_calc",
          "value": "\"purchase_orders\".\"total_amount\" = \"purchase_orders\".\"subtotal\" + \"purchase_orders\".\"tax_amount\" + \"purchase_orders\".\"shipping_amount\" - \"purchase_orders\".\"discount_amount\""
        },
        "purchase_orders_approved_status": {
          "name": "purchase_orders_approved_status",
          "value": "(\"purchase_orders\".\"approved_at\" IS NULL AND \"purchase_orders\".\"approved_by\" IS NULL) OR\n          (\"purchase_orders\".\"approved_at\" IS NOT NULL AND \"purchase_orders\".\"approved_by\" IS NOT NULL)"
        },
        "purchase_orders_closed_status": {
          "name": "purchase_orders_closed_status",
          "value": "(\"purchase_orders\".\"closed_at\" IS NULL AND \"purchase_orders\".\"closed_by\" IS NULL) OR\n          (\"purchase_orders\".\"closed_at\" IS NOT NULL AND \"purchase_orders\".\"closed_by\" IS NOT NULL)"
        },
        "purchase_orders_date_order": {
          "name": "purchase_orders_date_order",
          "value": "\"purchase_orders\".\"required_date\" IS NULL OR \"purchase_orders\".\"required_date\" >= \"purchase_orders\".\"order_date\""
        }
      },
      "isRLSEnabled": false
    },
    "public.purchase_order_items": {
      "name": "purchase_order_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "purchase_order_id": {
          "name": "purchase_order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "line_number": {
          "name": "line_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "product_name": {
          "name": "product_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "product_sku": {
          "name": "product_sku",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "unit_of_measure": {
          "name": "unit_of_measure",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'each'"
        },
        "unit_price": {
          "name": "unit_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "discount_percent": {
          "name": "discount_percent",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "tax_rate": {
          "name": "tax_rate",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 10
        },
        "line_total": {
          "name": "line_total",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "quantity_received": {
          "name": "quantity_received",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "quantity_rejected": {
          "name": "quantity_rejected",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "quantity_pending": {
          "name": "quantity_pending",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "expected_delivery_date": {
          "name": "expected_delivery_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "actual_delivery_date": {
          "name": "actual_delivery_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_purchase_order_items_po": {
          "name": "idx_purchase_order_items_po",
          "columns": [
            {
              "expression": "purchase_order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_items_org_po": {
          "name": "idx_purchase_order_items_org_po",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "purchase_order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_items_product": {
          "name": "idx_purchase_order_items_product",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_items_po_line": {
          "name": "idx_purchase_order_items_po_line",
          "columns": [
            {
              "expression": "purchase_order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "line_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_items_org_receipt": {
          "name": "idx_purchase_order_items_org_receipt",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "quantity_received",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_items_org_created_id": {
          "name": "idx_purchase_order_items_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "purchase_order_items_organization_id_organizations_id_fk": {
          "name": "purchase_order_items_organization_id_organizations_id_fk",
          "tableFrom": "purchase_order_items",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "purchase_order_items_purchase_order_id_purchase_orders_id_fk": {
          "name": "purchase_order_items_purchase_order_id_purchase_orders_id_fk",
          "tableFrom": "purchase_order_items",
          "tableTo": "purchase_orders",
          "columnsFrom": [
            "purchase_order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "purchase_order_items_product_id_products_id_fk": {
          "name": "purchase_order_items_product_id_products_id_fk",
          "tableFrom": "purchase_order_items",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "purchase_order_items_select_policy": {
          "name": "purchase_order_items_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_items_insert_policy": {
          "name": "purchase_order_items_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_items_update_policy": {
          "name": "purchase_order_items_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_items_delete_policy": {
          "name": "purchase_order_items_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "purchase_order_items_quantity_positive": {
          "name": "purchase_order_items_quantity_positive",
          "value": "\"purchase_order_items\".\"quantity\" > 0"
        },
        "purchase_order_items_unit_price_non_negative": {
          "name": "purchase_order_items_unit_price_non_negative",
          "value": "\"purchase_order_items\".\"unit_price\" >= 0"
        },
        "purchase_order_items_received_max": {
          "name": "purchase_order_items_received_max",
          "value": "\"purchase_order_items\".\"quantity_received\" <= \"purchase_order_items\".\"quantity\""
        },
        "purchase_order_items_rejected_max": {
          "name": "purchase_order_items_rejected_max",
          "value": "\"purchase_order_items\".\"quantity_rejected\" <= \"purchase_order_items\".\"quantity_received\""
        },
        "purchase_order_items_pending_calc": {
          "name": "purchase_order_items_pending_calc",
          "value": "\"purchase_order_items\".\"quantity_pending\" = \"purchase_order_items\".\"quantity\" - \"purchase_order_items\".\"quantity_received\""
        },
        "purchase_order_items_discount_range": {
          "name": "purchase_order_items_discount_range",
          "value": "\"purchase_order_items\".\"discount_percent\" >= $1 AND \"purchase_order_items\".\"discount_percent\" <= $2"
        },
        "purchase_order_items_tax_rate_range": {
          "name": "purchase_order_items_tax_rate_range",
          "value": "\"purchase_order_items\".\"tax_rate\" >= $1 AND \"purchase_order_items\".\"tax_rate\" <= $2"
        }
      },
      "isRLSEnabled": false
    },
    "public.purchase_order_approval_rules": {
      "name": "purchase_order_approval_rules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "min_amount": {
          "name": "min_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "max_amount": {
          "name": "max_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "requires_approval": {
          "name": "requires_approval",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "auto_approve_under": {
          "name": "auto_approve_under",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "approver_roles": {
          "name": "approver_roles",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::text[]"
        },
        "escalation_hours": {
          "name": "escalation_hours",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 24
        },
        "escalation_approver_roles": {
          "name": "escalation_approver_roles",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::text[]"
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_purchase_order_approval_rules_org": {
          "name": "idx_purchase_order_approval_rules_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_approval_rules_org_active": {
          "name": "idx_purchase_order_approval_rules_org_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_approval_rules_org_active_priority": {
          "name": "idx_purchase_order_approval_rules_org_active_priority",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "priority",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_approval_rules_min_amount": {
          "name": "idx_purchase_order_approval_rules_min_amount",
          "columns": [
            {
              "expression": "min_amount",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_approval_rules_max_amount": {
          "name": "idx_purchase_order_approval_rules_max_amount",
          "columns": [
            {
              "expression": "max_amount",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_approval_rules_org_created_id": {
          "name": "idx_purchase_order_approval_rules_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "purchase_order_approval_rules_organization_id_organizations_id_fk": {
          "name": "purchase_order_approval_rules_organization_id_organizations_id_fk",
          "tableFrom": "purchase_order_approval_rules",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "purchase_order_approval_rules_select_policy": {
          "name": "purchase_order_approval_rules_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_approval_rules_insert_policy": {
          "name": "purchase_order_approval_rules_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_approval_rules_update_policy": {
          "name": "purchase_order_approval_rules_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_approval_rules_delete_policy": {
          "name": "purchase_order_approval_rules_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "purchase_order_approval_rules_amount_range": {
          "name": "purchase_order_approval_rules_amount_range",
          "value": "\"purchase_order_approval_rules\".\"max_amount\" IS NULL OR \"purchase_order_approval_rules\".\"min_amount\" IS NULL OR \"purchase_order_approval_rules\".\"max_amount\" >= \"purchase_order_approval_rules\".\"min_amount\""
        },
        "purchase_order_approval_rules_escalation_hours_positive": {
          "name": "purchase_order_approval_rules_escalation_hours_positive",
          "value": "\"purchase_order_approval_rules\".\"escalation_hours\" IS NULL OR \"purchase_order_approval_rules\".\"escalation_hours\" > 0"
        },
        "purchase_order_approval_rules_priority_non_negative": {
          "name": "purchase_order_approval_rules_priority_non_negative",
          "value": "\"purchase_order_approval_rules\".\"priority\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.purchase_order_approvals": {
      "name": "purchase_order_approvals",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "purchase_order_id": {
          "name": "purchase_order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "approver_id": {
          "name": "approver_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "level": {
          "name": "level",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "status": {
          "name": "status",
          "type": "approval_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "comments": {
          "name": "comments",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "rejected_at": {
          "name": "rejected_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "escalated_to": {
          "name": "escalated_to",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "escalated_at": {
          "name": "escalated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "escalation_reason": {
          "name": "escalation_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "delegated_from": {
          "name": "delegated_from",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "due_at": {
          "name": "due_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_purchase_order_approvals_po_level_unique": {
          "name": "idx_purchase_order_approvals_po_level_unique",
          "columns": [
            {
              "expression": "purchase_order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "level",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_approvals_po": {
          "name": "idx_purchase_order_approvals_po",
          "columns": [
            {
              "expression": "purchase_order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_approvals_org_po": {
          "name": "idx_purchase_order_approvals_org_po",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "purchase_order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_approvals_approver": {
          "name": "idx_purchase_order_approvals_approver",
          "columns": [
            {
              "expression": "approver_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_approvals_approver_status": {
          "name": "idx_purchase_order_approvals_approver_status",
          "columns": [
            {
              "expression": "approver_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_approvals_org_status": {
          "name": "idx_purchase_order_approvals_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_approvals_due_at": {
          "name": "idx_purchase_order_approvals_due_at",
          "columns": [
            {
              "expression": "due_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_approvals_org_due_pending": {
          "name": "idx_purchase_order_approvals_org_due_pending",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "due_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_approvals_org_created_id": {
          "name": "idx_purchase_order_approvals_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "purchase_order_approvals_organization_id_organizations_id_fk": {
          "name": "purchase_order_approvals_organization_id_organizations_id_fk",
          "tableFrom": "purchase_order_approvals",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "purchase_order_approvals_purchase_order_id_purchase_orders_id_fk": {
          "name": "purchase_order_approvals_purchase_order_id_purchase_orders_id_fk",
          "tableFrom": "purchase_order_approvals",
          "tableTo": "purchase_orders",
          "columnsFrom": [
            "purchase_order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "purchase_order_approvals_approver_id_users_id_fk": {
          "name": "purchase_order_approvals_approver_id_users_id_fk",
          "tableFrom": "purchase_order_approvals",
          "tableTo": "users",
          "columnsFrom": [
            "approver_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "purchase_order_approvals_escalated_to_users_id_fk": {
          "name": "purchase_order_approvals_escalated_to_users_id_fk",
          "tableFrom": "purchase_order_approvals",
          "tableTo": "users",
          "columnsFrom": [
            "escalated_to"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "purchase_order_approvals_delegated_from_users_id_fk": {
          "name": "purchase_order_approvals_delegated_from_users_id_fk",
          "tableFrom": "purchase_order_approvals",
          "tableTo": "users",
          "columnsFrom": [
            "delegated_from"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "purchase_order_approvals_select_policy": {
          "name": "purchase_order_approvals_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_approvals_insert_policy": {
          "name": "purchase_order_approvals_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_approvals_update_policy": {
          "name": "purchase_order_approvals_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_approvals_delete_policy": {
          "name": "purchase_order_approvals_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "purchase_order_approvals_level_positive": {
          "name": "purchase_order_approvals_level_positive",
          "value": "\"purchase_order_approvals\".\"level\" > 0"
        },
        "purchase_order_approvals_approved_status": {
          "name": "purchase_order_approvals_approved_status",
          "value": "(\"purchase_order_approvals\".\"status\" = 'approved' AND \"purchase_order_approvals\".\"approved_at\" IS NOT NULL) OR\n          (\"purchase_order_approvals\".\"status\" != 'approved' AND \"purchase_order_approvals\".\"approved_at\" IS NULL)"
        },
        "purchase_order_approvals_rejected_status": {
          "name": "purchase_order_approvals_rejected_status",
          "value": "(\"purchase_order_approvals\".\"status\" = 'rejected' AND \"purchase_order_approvals\".\"rejected_at\" IS NOT NULL) OR\n          (\"purchase_order_approvals\".\"status\" != 'rejected' AND \"purchase_order_approvals\".\"rejected_at\" IS NULL)"
        },
        "purchase_order_approvals_escalated_consistency": {
          "name": "purchase_order_approvals_escalated_consistency",
          "value": "(\"purchase_order_approvals\".\"escalated_to\" IS NULL AND \"purchase_order_approvals\".\"escalated_at\" IS NULL) OR\n          (\"purchase_order_approvals\".\"escalated_to\" IS NOT NULL AND \"purchase_order_approvals\".\"escalated_at\" IS NOT NULL)"
        }
      },
      "isRLSEnabled": false
    },
    "public.purchase_order_receipt_items": {
      "name": "purchase_order_receipt_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "receipt_id": {
          "name": "receipt_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "purchase_order_item_id": {
          "name": "purchase_order_item_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "line_number": {
          "name": "line_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "quantity_expected": {
          "name": "quantity_expected",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "quantity_received": {
          "name": "quantity_received",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "quantity_accepted": {
          "name": "quantity_accepted",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "quantity_rejected": {
          "name": "quantity_rejected",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "condition": {
          "name": "condition",
          "type": "condition",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'new'"
        },
        "rejection_reason": {
          "name": "rejection_reason",
          "type": "rejection_reason",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "quality_notes": {
          "name": "quality_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "warehouse_location": {
          "name": "warehouse_location",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "bin_number": {
          "name": "bin_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "lot_number": {
          "name": "lot_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "serial_numbers": {
          "name": "serial_numbers",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::text[]"
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_purchase_order_receipt_items_receipt": {
          "name": "idx_purchase_order_receipt_items_receipt",
          "columns": [
            {
              "expression": "receipt_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_receipt_items_org_receipt": {
          "name": "idx_purchase_order_receipt_items_org_receipt",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "receipt_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_receipt_items_po_item": {
          "name": "idx_purchase_order_receipt_items_po_item",
          "columns": [
            {
              "expression": "purchase_order_item_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_receipt_items_receipt_line": {
          "name": "idx_purchase_order_receipt_items_receipt_line",
          "columns": [
            {
              "expression": "receipt_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "line_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_receipt_items_condition": {
          "name": "idx_purchase_order_receipt_items_condition",
          "columns": [
            {
              "expression": "condition",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_receipt_items_warehouse": {
          "name": "idx_purchase_order_receipt_items_warehouse",
          "columns": [
            {
              "expression": "warehouse_location",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_receipt_items_lot": {
          "name": "idx_purchase_order_receipt_items_lot",
          "columns": [
            {
              "expression": "lot_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_receipt_items_org_created_id": {
          "name": "idx_purchase_order_receipt_items_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "purchase_order_receipt_items_organization_id_organizations_id_fk": {
          "name": "purchase_order_receipt_items_organization_id_organizations_id_fk",
          "tableFrom": "purchase_order_receipt_items",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "purchase_order_receipt_items_receipt_id_purchase_order_receipts_id_fk": {
          "name": "purchase_order_receipt_items_receipt_id_purchase_order_receipts_id_fk",
          "tableFrom": "purchase_order_receipt_items",
          "tableTo": "purchase_order_receipts",
          "columnsFrom": [
            "receipt_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "purchase_order_receipt_items_purchase_order_item_id_purchase_order_items_id_fk": {
          "name": "purchase_order_receipt_items_purchase_order_item_id_purchase_order_items_id_fk",
          "tableFrom": "purchase_order_receipt_items",
          "tableTo": "purchase_order_items",
          "columnsFrom": [
            "purchase_order_item_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "purchase_order_receipt_items_select_policy": {
          "name": "purchase_order_receipt_items_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_receipt_items_insert_policy": {
          "name": "purchase_order_receipt_items_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_receipt_items_update_policy": {
          "name": "purchase_order_receipt_items_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_receipt_items_delete_policy": {
          "name": "purchase_order_receipt_items_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "purchase_order_receipt_items_qty_expected_non_negative": {
          "name": "purchase_order_receipt_items_qty_expected_non_negative",
          "value": "\"purchase_order_receipt_items\".\"quantity_expected\" >= 0"
        },
        "purchase_order_receipt_items_qty_received_non_negative": {
          "name": "purchase_order_receipt_items_qty_received_non_negative",
          "value": "\"purchase_order_receipt_items\".\"quantity_received\" >= 0"
        },
        "purchase_order_receipt_items_qty_accepted_non_negative": {
          "name": "purchase_order_receipt_items_qty_accepted_non_negative",
          "value": "\"purchase_order_receipt_items\".\"quantity_accepted\" >= 0"
        },
        "purchase_order_receipt_items_qty_rejected_non_negative": {
          "name": "purchase_order_receipt_items_qty_rejected_non_negative",
          "value": "\"purchase_order_receipt_items\".\"quantity_rejected\" >= 0"
        },
        "purchase_order_receipt_items_qty_balance": {
          "name": "purchase_order_receipt_items_qty_balance",
          "value": "\"purchase_order_receipt_items\".\"quantity_accepted\" + \"purchase_order_receipt_items\".\"quantity_rejected\" = \"purchase_order_receipt_items\".\"quantity_received\""
        },
        "purchase_order_receipt_items_rejection_reason": {
          "name": "purchase_order_receipt_items_rejection_reason",
          "value": "\"purchase_order_receipt_items\".\"quantity_rejected\" = 0 OR \"purchase_order_receipt_items\".\"rejection_reason\" IS NOT NULL"
        }
      },
      "isRLSEnabled": false
    },
    "public.purchase_order_receipts": {
      "name": "purchase_order_receipts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "purchase_order_id": {
          "name": "purchase_order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "receipt_number": {
          "name": "receipt_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'GRN-' || to_char(NOW(), 'YYYYMMDD') || '-' || substr(gen_random_uuid()::text, 1, 6)"
        },
        "received_by": {
          "name": "received_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "received_at": {
          "name": "received_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "carrier": {
          "name": "carrier",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tracking_number": {
          "name": "tracking_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "delivery_reference": {
          "name": "delivery_reference",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "total_items_expected": {
          "name": "total_items_expected",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_items_received": {
          "name": "total_items_received",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_items_accepted": {
          "name": "total_items_accepted",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_items_rejected": {
          "name": "total_items_rejected",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "status": {
          "name": "status",
          "type": "receipt_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending_inspection'"
        },
        "inspection_required": {
          "name": "inspection_required",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'no'"
        },
        "inspection_completed_at": {
          "name": "inspection_completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "inspection_completed_by": {
          "name": "inspection_completed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "quality_notes": {
          "name": "quality_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_purchase_order_receipts_number_org_unique": {
          "name": "idx_purchase_order_receipts_number_org_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "receipt_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_receipts_po": {
          "name": "idx_purchase_order_receipts_po",
          "columns": [
            {
              "expression": "purchase_order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_receipts_org_po": {
          "name": "idx_purchase_order_receipts_org_po",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "purchase_order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_receipts_org_status": {
          "name": "idx_purchase_order_receipts_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_receipts_received_at": {
          "name": "idx_purchase_order_receipts_received_at",
          "columns": [
            {
              "expression": "received_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_receipts_received_by": {
          "name": "idx_purchase_order_receipts_received_by",
          "columns": [
            {
              "expression": "received_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_receipts_inspection_by": {
          "name": "idx_purchase_order_receipts_inspection_by",
          "columns": [
            {
              "expression": "inspection_completed_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_receipts_org_pending_inspection": {
          "name": "idx_purchase_order_receipts_org_pending_inspection",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "inspection_completed_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_receipts_org_created_id": {
          "name": "idx_purchase_order_receipts_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "purchase_order_receipts_organization_id_organizations_id_fk": {
          "name": "purchase_order_receipts_organization_id_organizations_id_fk",
          "tableFrom": "purchase_order_receipts",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "purchase_order_receipts_purchase_order_id_purchase_orders_id_fk": {
          "name": "purchase_order_receipts_purchase_order_id_purchase_orders_id_fk",
          "tableFrom": "purchase_order_receipts",
          "tableTo": "purchase_orders",
          "columnsFrom": [
            "purchase_order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "purchase_order_receipts_received_by_users_id_fk": {
          "name": "purchase_order_receipts_received_by_users_id_fk",
          "tableFrom": "purchase_order_receipts",
          "tableTo": "users",
          "columnsFrom": [
            "received_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "purchase_order_receipts_inspection_completed_by_users_id_fk": {
          "name": "purchase_order_receipts_inspection_completed_by_users_id_fk",
          "tableFrom": "purchase_order_receipts",
          "tableTo": "users",
          "columnsFrom": [
            "inspection_completed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "purchase_order_receipts_select_policy": {
          "name": "purchase_order_receipts_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_receipts_insert_policy": {
          "name": "purchase_order_receipts_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_receipts_update_policy": {
          "name": "purchase_order_receipts_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_receipts_delete_policy": {
          "name": "purchase_order_receipts_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "purchase_order_receipts_items_expected_non_negative": {
          "name": "purchase_order_receipts_items_expected_non_negative",
          "value": "\"purchase_order_receipts\".\"total_items_expected\" >= 0"
        },
        "purchase_order_receipts_items_received_non_negative": {
          "name": "purchase_order_receipts_items_received_non_negative",
          "value": "\"purchase_order_receipts\".\"total_items_received\" >= 0"
        },
        "purchase_order_receipts_items_accepted_non_negative": {
          "name": "purchase_order_receipts_items_accepted_non_negative",
          "value": "\"purchase_order_receipts\".\"total_items_accepted\" >= 0"
        },
        "purchase_order_receipts_items_rejected_non_negative": {
          "name": "purchase_order_receipts_items_rejected_non_negative",
          "value": "\"purchase_order_receipts\".\"total_items_rejected\" >= 0"
        },
        "purchase_order_receipts_items_balance": {
          "name": "purchase_order_receipts_items_balance",
          "value": "\"purchase_order_receipts\".\"total_items_accepted\" + \"purchase_order_receipts\".\"total_items_rejected\" <= \"purchase_order_receipts\".\"total_items_received\""
        },
        "purchase_order_receipts_inspection_consistency": {
          "name": "purchase_order_receipts_inspection_consistency",
          "value": "(\"purchase_order_receipts\".\"inspection_completed_at\" IS NULL AND \"purchase_order_receipts\".\"inspection_completed_by\" IS NULL) OR\n          (\"purchase_order_receipts\".\"inspection_completed_at\" IS NOT NULL AND \"purchase_order_receipts\".\"inspection_completed_by\" IS NOT NULL)"
        }
      },
      "isRLSEnabled": false
    },
    "public.purchase_order_amendments": {
      "name": "purchase_order_amendments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "purchase_order_id": {
          "name": "purchase_order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "amendment_number": {
          "name": "amendment_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "amendment_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'requested'"
        },
        "requested_by": {
          "name": "requested_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "requested_at": {
          "name": "requested_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "approved_by": {
          "name": "approved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "rejected_by": {
          "name": "rejected_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "rejected_at": {
          "name": "rejected_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "rejection_reason": {
          "name": "rejection_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "applied_by": {
          "name": "applied_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "applied_at": {
          "name": "applied_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "changes": {
          "name": "changes",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "original_values": {
          "name": "original_values",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "new_values": {
          "name": "new_values",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "internal_notes": {
          "name": "internal_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_purchase_order_amendments_po_number_unique": {
          "name": "idx_purchase_order_amendments_po_number_unique",
          "columns": [
            {
              "expression": "purchase_order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "amendment_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_amendments_po": {
          "name": "idx_purchase_order_amendments_po",
          "columns": [
            {
              "expression": "purchase_order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_amendments_org_po": {
          "name": "idx_purchase_order_amendments_org_po",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "purchase_order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_amendments_org_status": {
          "name": "idx_purchase_order_amendments_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_amendments_requested_by": {
          "name": "idx_purchase_order_amendments_requested_by",
          "columns": [
            {
              "expression": "requested_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_amendments_requested_at": {
          "name": "idx_purchase_order_amendments_requested_at",
          "columns": [
            {
              "expression": "requested_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_amendments_org_pending": {
          "name": "idx_purchase_order_amendments_org_pending",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "requested_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_amendments_org_created_id": {
          "name": "idx_purchase_order_amendments_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "purchase_order_amendments_organization_id_organizations_id_fk": {
          "name": "purchase_order_amendments_organization_id_organizations_id_fk",
          "tableFrom": "purchase_order_amendments",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "purchase_order_amendments_purchase_order_id_purchase_orders_id_fk": {
          "name": "purchase_order_amendments_purchase_order_id_purchase_orders_id_fk",
          "tableFrom": "purchase_order_amendments",
          "tableTo": "purchase_orders",
          "columnsFrom": [
            "purchase_order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "purchase_order_amendments_requested_by_users_id_fk": {
          "name": "purchase_order_amendments_requested_by_users_id_fk",
          "tableFrom": "purchase_order_amendments",
          "tableTo": "users",
          "columnsFrom": [
            "requested_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "purchase_order_amendments_approved_by_users_id_fk": {
          "name": "purchase_order_amendments_approved_by_users_id_fk",
          "tableFrom": "purchase_order_amendments",
          "tableTo": "users",
          "columnsFrom": [
            "approved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "purchase_order_amendments_rejected_by_users_id_fk": {
          "name": "purchase_order_amendments_rejected_by_users_id_fk",
          "tableFrom": "purchase_order_amendments",
          "tableTo": "users",
          "columnsFrom": [
            "rejected_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "purchase_order_amendments_applied_by_users_id_fk": {
          "name": "purchase_order_amendments_applied_by_users_id_fk",
          "tableFrom": "purchase_order_amendments",
          "tableTo": "users",
          "columnsFrom": [
            "applied_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "purchase_order_amendments_select_policy": {
          "name": "purchase_order_amendments_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_amendments_insert_policy": {
          "name": "purchase_order_amendments_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_amendments_update_policy": {
          "name": "purchase_order_amendments_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_amendments_delete_policy": {
          "name": "purchase_order_amendments_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "purchase_order_amendments_number_positive": {
          "name": "purchase_order_amendments_number_positive",
          "value": "\"purchase_order_amendments\".\"amendment_number\" > 0"
        },
        "purchase_order_amendments_approved_status": {
          "name": "purchase_order_amendments_approved_status",
          "value": "(\"purchase_order_amendments\".\"status\" = 'approved' AND \"purchase_order_amendments\".\"approved_at\" IS NOT NULL AND \"purchase_order_amendments\".\"approved_by\" IS NOT NULL) OR\n          (\"purchase_order_amendments\".\"status\" != 'approved' AND \"purchase_order_amendments\".\"approved_at\" IS NULL AND \"purchase_order_amendments\".\"approved_by\" IS NULL)"
        },
        "purchase_order_amendments_rejected_status": {
          "name": "purchase_order_amendments_rejected_status",
          "value": "(\"purchase_order_amendments\".\"status\" = 'rejected' AND \"purchase_order_amendments\".\"rejected_at\" IS NOT NULL AND \"purchase_order_amendments\".\"rejected_by\" IS NOT NULL) OR\n          (\"purchase_order_amendments\".\"status\" != 'rejected' AND \"purchase_order_amendments\".\"rejected_at\" IS NULL AND \"purchase_order_amendments\".\"rejected_by\" IS NULL)"
        },
        "purchase_order_amendments_applied_status": {
          "name": "purchase_order_amendments_applied_status",
          "value": "(\"purchase_order_amendments\".\"status\" = 'applied' AND \"purchase_order_amendments\".\"applied_at\" IS NOT NULL AND \"purchase_order_amendments\".\"applied_by\" IS NOT NULL) OR\n          (\"purchase_order_amendments\".\"status\" != 'applied' AND \"purchase_order_amendments\".\"applied_at\" IS NULL AND \"purchase_order_amendments\".\"applied_by\" IS NULL)"
        }
      },
      "isRLSEnabled": false
    },
    "public.purchase_order_costs": {
      "name": "purchase_order_costs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "purchase_order_id": {
          "name": "purchase_order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "cost_type": {
          "name": "cost_type",
          "type": "cost_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "amount": {
          "name": "amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'AUD'"
        },
        "allocation_method": {
          "name": "allocation_method",
          "type": "allocation_method",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'equal'"
        },
        "is_included_in_total": {
          "name": "is_included_in_total",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "supplier_invoice_number": {
          "name": "supplier_invoice_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reference_number": {
          "name": "reference_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_purchase_order_costs_po": {
          "name": "idx_purchase_order_costs_po",
          "columns": [
            {
              "expression": "purchase_order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_costs_org_po": {
          "name": "idx_purchase_order_costs_org_po",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "purchase_order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_costs_type": {
          "name": "idx_purchase_order_costs_type",
          "columns": [
            {
              "expression": "cost_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_costs_org_type": {
          "name": "idx_purchase_order_costs_org_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "cost_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_costs_supplier_invoice": {
          "name": "idx_purchase_order_costs_supplier_invoice",
          "columns": [
            {
              "expression": "supplier_invoice_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_purchase_order_costs_org_created_id": {
          "name": "idx_purchase_order_costs_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "purchase_order_costs_organization_id_organizations_id_fk": {
          "name": "purchase_order_costs_organization_id_organizations_id_fk",
          "tableFrom": "purchase_order_costs",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "purchase_order_costs_purchase_order_id_purchase_orders_id_fk": {
          "name": "purchase_order_costs_purchase_order_id_purchase_orders_id_fk",
          "tableFrom": "purchase_order_costs",
          "tableTo": "purchase_orders",
          "columnsFrom": [
            "purchase_order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "purchase_order_costs_select_policy": {
          "name": "purchase_order_costs_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_costs_insert_policy": {
          "name": "purchase_order_costs_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_costs_update_policy": {
          "name": "purchase_order_costs_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "purchase_order_costs_delete_policy": {
          "name": "purchase_order_costs_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "purchase_order_costs_amount_non_negative": {
          "name": "purchase_order_costs_amount_non_negative",
          "value": "\"purchase_order_costs\".\"amount\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.supplier_price_history": {
      "name": "supplier_price_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "supplier_id": {
          "name": "supplier_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "price_list_id": {
          "name": "price_list_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "previous_price": {
          "name": "previous_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "new_price": {
          "name": "new_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "price_change": {
          "name": "price_change",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "change_percent": {
          "name": "change_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "change_reason": {
          "name": "change_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "effective_date": {
          "name": "effective_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "changed_by": {
          "name": "changed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "changed_at": {
          "name": "changed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_supplier_price_history_supplier_product": {
          "name": "idx_supplier_price_history_supplier_product",
          "columns": [
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_history_effective_date": {
          "name": "idx_supplier_price_history_effective_date",
          "columns": [
            {
              "expression": "effective_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_history_changed_at": {
          "name": "idx_supplier_price_history_changed_at",
          "columns": [
            {
              "expression": "changed_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_history_price_list": {
          "name": "idx_supplier_price_history_price_list",
          "columns": [
            {
              "expression": "price_list_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_history_org_supplier": {
          "name": "idx_supplier_price_history_org_supplier",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_history_org_product": {
          "name": "idx_supplier_price_history_org_product",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_supplier_price_history_org_created_id": {
          "name": "idx_supplier_price_history_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "changed_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "supplier_price_history_organization_id_organizations_id_fk": {
          "name": "supplier_price_history_organization_id_organizations_id_fk",
          "tableFrom": "supplier_price_history",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "supplier_price_history_supplier_id_suppliers_id_fk": {
          "name": "supplier_price_history_supplier_id_suppliers_id_fk",
          "tableFrom": "supplier_price_history",
          "tableTo": "suppliers",
          "columnsFrom": [
            "supplier_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "supplier_price_history_product_id_products_id_fk": {
          "name": "supplier_price_history_product_id_products_id_fk",
          "tableFrom": "supplier_price_history",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "supplier_price_history_price_list_id_supplier_price_lists_id_fk": {
          "name": "supplier_price_history_price_list_id_supplier_price_lists_id_fk",
          "tableFrom": "supplier_price_history",
          "tableTo": "supplier_price_lists",
          "columnsFrom": [
            "price_list_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "supplier_price_history_select_policy": {
          "name": "supplier_price_history_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "supplier_price_history_insert_policy": {
          "name": "supplier_price_history_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "supplier_price_history_update_policy": {
          "name": "supplier_price_history_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "supplier_price_history_delete_policy": {
          "name": "supplier_price_history_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.price_agreements": {
      "name": "price_agreements",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "supplier_id": {
          "name": "supplier_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "supplier_name": {
          "name": "supplier_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "agreement_number": {
          "name": "agreement_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'PA-' || to_char(NOW(), 'YYYYMMDD') || '-' || substr(gen_random_uuid()::text, 1, 6)"
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "effective_date": {
          "name": "effective_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "price_agreement_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'AUD'"
        },
        "discount_percent": {
          "name": "discount_percent",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "minimum_order_value": {
          "name": "minimum_order_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "total_items": {
          "name": "total_items",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "approved_by": {
          "name": "approved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "rejected_by": {
          "name": "rejected_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "rejected_at": {
          "name": "rejected_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "rejection_reason": {
          "name": "rejection_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "terms_and_conditions": {
          "name": "terms_and_conditions",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_price_agreements_number_org_unique": {
          "name": "idx_price_agreements_number_org_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "agreement_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"price_agreements\".\"deleted_at\" IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_agreements_supplier": {
          "name": "idx_price_agreements_supplier",
          "columns": [
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_agreements_org_supplier": {
          "name": "idx_price_agreements_org_supplier",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_agreements_org_status": {
          "name": "idx_price_agreements_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_agreements_effective_date": {
          "name": "idx_price_agreements_effective_date",
          "columns": [
            {
              "expression": "effective_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_agreements_expiry_date": {
          "name": "idx_price_agreements_expiry_date",
          "columns": [
            {
              "expression": "expiry_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_agreements_org_active": {
          "name": "idx_price_agreements_org_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "expiry_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_agreements_created_by": {
          "name": "idx_price_agreements_created_by",
          "columns": [
            {
              "expression": "created_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_agreements_approved_by": {
          "name": "idx_price_agreements_approved_by",
          "columns": [
            {
              "expression": "approved_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_agreements_org_created_id": {
          "name": "idx_price_agreements_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "price_agreements_organization_id_organizations_id_fk": {
          "name": "price_agreements_organization_id_organizations_id_fk",
          "tableFrom": "price_agreements",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "price_agreements_supplier_id_suppliers_id_fk": {
          "name": "price_agreements_supplier_id_suppliers_id_fk",
          "tableFrom": "price_agreements",
          "tableTo": "suppliers",
          "columnsFrom": [
            "supplier_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "price_agreements_created_by_users_id_fk": {
          "name": "price_agreements_created_by_users_id_fk",
          "tableFrom": "price_agreements",
          "tableTo": "users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "price_agreements_approved_by_users_id_fk": {
          "name": "price_agreements_approved_by_users_id_fk",
          "tableFrom": "price_agreements",
          "tableTo": "users",
          "columnsFrom": [
            "approved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "price_agreements_rejected_by_users_id_fk": {
          "name": "price_agreements_rejected_by_users_id_fk",
          "tableFrom": "price_agreements",
          "tableTo": "users",
          "columnsFrom": [
            "rejected_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "price_agreements_select_policy": {
          "name": "price_agreements_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "price_agreements_insert_policy": {
          "name": "price_agreements_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "price_agreements_update_policy": {
          "name": "price_agreements_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "price_agreements_delete_policy": {
          "name": "price_agreements_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "price_agreements_date_range": {
          "name": "price_agreements_date_range",
          "value": "\"price_agreements\".\"expiry_date\" IS NULL OR \"price_agreements\".\"effective_date\" IS NULL OR \"price_agreements\".\"expiry_date\" > \"price_agreements\".\"effective_date\""
        },
        "price_agreements_discount_range": {
          "name": "price_agreements_discount_range",
          "value": "\"price_agreements\".\"discount_percent\" IS NULL OR (\"price_agreements\".\"discount_percent\" >= $1 AND \"price_agreements\".\"discount_percent\" <= $2)"
        },
        "price_agreements_approval_consistency": {
          "name": "price_agreements_approval_consistency",
          "value": "(\"price_agreements\".\"approved_at\" IS NULL AND \"price_agreements\".\"approved_by\" IS NULL) OR\n          (\"price_agreements\".\"approved_at\" IS NOT NULL AND \"price_agreements\".\"approved_by\" IS NOT NULL)"
        },
        "price_agreements_rejection_consistency": {
          "name": "price_agreements_rejection_consistency",
          "value": "(\"price_agreements\".\"rejected_at\" IS NULL AND \"price_agreements\".\"rejected_by\" IS NULL) OR\n          (\"price_agreements\".\"rejected_at\" IS NOT NULL AND \"price_agreements\".\"rejected_by\" IS NOT NULL)"
        },
        "price_agreements_total_items_non_negative": {
          "name": "price_agreements_total_items_non_negative",
          "value": "\"price_agreements\".\"total_items\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.price_change_history": {
      "name": "price_change_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "price_list_id": {
          "name": "price_list_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "agreement_id": {
          "name": "agreement_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "supplier_id": {
          "name": "supplier_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "previous_price": {
          "name": "previous_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "new_price": {
          "name": "new_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "price_change": {
          "name": "price_change",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "change_percent": {
          "name": "change_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "change_reason": {
          "name": "change_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "effective_date": {
          "name": "effective_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "price_change_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "requested_by": {
          "name": "requested_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "requested_at": {
          "name": "requested_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "approved_by": {
          "name": "approved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "rejected_by": {
          "name": "rejected_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "rejected_at": {
          "name": "rejected_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "rejection_reason": {
          "name": "rejection_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "applied_by": {
          "name": "applied_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "applied_at": {
          "name": "applied_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_price_change_history_price_list": {
          "name": "idx_price_change_history_price_list",
          "columns": [
            {
              "expression": "price_list_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_change_history_agreement": {
          "name": "idx_price_change_history_agreement",
          "columns": [
            {
              "expression": "agreement_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_change_history_supplier": {
          "name": "idx_price_change_history_supplier",
          "columns": [
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_change_history_org_supplier": {
          "name": "idx_price_change_history_org_supplier",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "supplier_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_change_history_org_status": {
          "name": "idx_price_change_history_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_change_history_requested_by": {
          "name": "idx_price_change_history_requested_by",
          "columns": [
            {
              "expression": "requested_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_change_history_requested_at": {
          "name": "idx_price_change_history_requested_at",
          "columns": [
            {
              "expression": "requested_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_change_history_org_pending": {
          "name": "idx_price_change_history_org_pending",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "requested_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_price_change_history_org_created_id": {
          "name": "idx_price_change_history_org_created_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "price_change_history_organization_id_organizations_id_fk": {
          "name": "price_change_history_organization_id_organizations_id_fk",
          "tableFrom": "price_change_history",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "price_change_history_price_list_id_supplier_price_lists_id_fk": {
          "name": "price_change_history_price_list_id_supplier_price_lists_id_fk",
          "tableFrom": "price_change_history",
          "tableTo": "supplier_price_lists",
          "columnsFrom": [
            "price_list_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "price_change_history_agreement_id_price_agreements_id_fk": {
          "name": "price_change_history_agreement_id_price_agreements_id_fk",
          "tableFrom": "price_change_history",
          "tableTo": "price_agreements",
          "columnsFrom": [
            "agreement_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "price_change_history_supplier_id_suppliers_id_fk": {
          "name": "price_change_history_supplier_id_suppliers_id_fk",
          "tableFrom": "price_change_history",
          "tableTo": "suppliers",
          "columnsFrom": [
            "supplier_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "price_change_history_requested_by_users_id_fk": {
          "name": "price_change_history_requested_by_users_id_fk",
          "tableFrom": "price_change_history",
          "tableTo": "users",
          "columnsFrom": [
            "requested_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "price_change_history_approved_by_users_id_fk": {
          "name": "price_change_history_approved_by_users_id_fk",
          "tableFrom": "price_change_history",
          "tableTo": "users",
          "columnsFrom": [
            "approved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "price_change_history_rejected_by_users_id_fk": {
          "name": "price_change_history_rejected_by_users_id_fk",
          "tableFrom": "price_change_history",
          "tableTo": "users",
          "columnsFrom": [
            "rejected_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "price_change_history_applied_by_users_id_fk": {
          "name": "price_change_history_applied_by_users_id_fk",
          "tableFrom": "price_change_history",
          "tableTo": "users",
          "columnsFrom": [
            "applied_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "price_change_history_select_policy": {
          "name": "price_change_history_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "price_change_history_insert_policy": {
          "name": "price_change_history_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "price_change_history_update_policy": {
          "name": "price_change_history_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "price_change_history_delete_policy": {
          "name": "price_change_history_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "price_change_history_approval_consistency": {
          "name": "price_change_history_approval_consistency",
          "value": "(\"price_change_history\".\"approved_at\" IS NULL AND \"price_change_history\".\"approved_by\" IS NULL) OR\n          (\"price_change_history\".\"approved_at\" IS NOT NULL AND \"price_change_history\".\"approved_by\" IS NOT NULL)"
        },
        "price_change_history_rejection_consistency": {
          "name": "price_change_history_rejection_consistency",
          "value": "(\"price_change_history\".\"rejected_at\" IS NULL AND \"price_change_history\".\"rejected_by\" IS NULL) OR\n          (\"price_change_history\".\"rejected_at\" IS NOT NULL AND \"price_change_history\".\"rejected_by\" IS NOT NULL)"
        },
        "price_change_history_application_consistency": {
          "name": "price_change_history_application_consistency",
          "value": "(\"price_change_history\".\"applied_at\" IS NULL AND \"price_change_history\".\"applied_by\" IS NULL) OR\n          (\"price_change_history\".\"applied_at\" IS NOT NULL AND \"price_change_history\".\"applied_by\" IS NOT NULL)"
        }
      },
      "isRLSEnabled": false
    },
    "public.search_index": {
      "name": "search_index",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subtitle": {
          "name": "subtitle",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "search_text": {
          "name": "search_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "search_vector": {
          "name": "search_vector",
          "type": "tsvector",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "to_tsvector('english', search_text)",
            "type": "stored"
          }
        },
        "rank_boost": {
          "name": "rank_boost",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_search_index_org_entity": {
          "name": "idx_search_index_org_entity",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_search_index_org_type": {
          "name": "idx_search_index_org_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_search_index_org_updated": {
          "name": "idx_search_index_org_updated",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "updated_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_search_index_search_vector": {
          "name": "idx_search_index_search_vector",
          "columns": [
            {
              "expression": "search_vector",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        }
      },
      "foreignKeys": {
        "search_index_organization_id_organizations_id_fk": {
          "name": "search_index_organization_id_organizations_id_fk",
          "tableFrom": "search_index",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "search_index_select_policy": {
          "name": "search_index_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "search_index_insert_policy": {
          "name": "search_index_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "search_index_update_policy": {
          "name": "search_index_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "search_index_delete_policy": {
          "name": "search_index_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "search_index_entity_type_check": {
          "name": "search_index_entity_type_check",
          "value": "\"search_index\".\"entity_type\" IN ('customer', 'contact', 'order', 'opportunity', 'product', 'inventory', 'supplier', 'warranty', 'issue', 'user', 'email', 'call', 'job', 'job_assignment', 'warranty_claim', 'quote', 'shipment', 'invoice', 'installer', 'purchase_order', 'rma')"
        }
      },
      "isRLSEnabled": false
    },
    "public.recent_items": {
      "name": "recent_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subtitle": {
          "name": "subtitle",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_accessed_at": {
          "name": "last_accessed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_recent_items_user_entity": {
          "name": "idx_recent_items_user_entity",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_recent_items_org_user": {
          "name": "idx_recent_items_org_user",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_recent_items_org_accessed": {
          "name": "idx_recent_items_org_accessed",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "last_accessed_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "recent_items_organization_id_organizations_id_fk": {
          "name": "recent_items_organization_id_organizations_id_fk",
          "tableFrom": "recent_items",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "recent_items_user_id_users_id_fk": {
          "name": "recent_items_user_id_users_id_fk",
          "tableFrom": "recent_items",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "recent_items_select_policy": {
          "name": "recent_items_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "\n        organization_id = (\n          SELECT organization_id FROM users WHERE auth_id = auth.uid()\n        )\n        AND user_id = (SELECT id FROM users WHERE auth_id = auth.uid())\n      "
        },
        "recent_items_insert_policy": {
          "name": "recent_items_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "\n        organization_id = (\n          SELECT organization_id FROM users WHERE auth_id = auth.uid()\n        )\n        AND user_id = (SELECT id FROM users WHERE auth_id = auth.uid())\n      "
        },
        "recent_items_update_policy": {
          "name": "recent_items_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "\n        organization_id = (\n          SELECT organization_id FROM users WHERE auth_id = auth.uid()\n        )\n        AND user_id = (SELECT id FROM users WHERE auth_id = auth.uid())\n      ",
          "withCheck": "\n        organization_id = (\n          SELECT organization_id FROM users WHERE auth_id = auth.uid()\n        )\n        AND user_id = (SELECT id FROM users WHERE auth_id = auth.uid())\n      "
        },
        "recent_items_delete_policy": {
          "name": "recent_items_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "\n        organization_id = (\n          SELECT organization_id FROM users WHERE auth_id = auth.uid()\n        )\n        AND user_id = (SELECT id FROM users WHERE auth_id = auth.uid())\n      "
        }
      },
      "checkConstraints": {
        "recent_items_entity_type_check": {
          "name": "recent_items_entity_type_check",
          "value": "\"recent_items\".\"entity_type\" IN ('customer', 'contact', 'order', 'opportunity', 'product', 'inventory', 'supplier', 'warranty', 'issue', 'user', 'email', 'call', 'job', 'job_assignment', 'warranty_claim', 'quote', 'shipment')"
        }
      },
      "isRLSEnabled": false
    },
    "public.search_index_outbox": {
      "name": "search_index_outbox",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "payload": {
          "name": "payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "retry_count": {
          "name": "retry_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "last_error": {
          "name": "last_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "processed_at": {
          "name": "processed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_search_outbox_org_status": {
          "name": "idx_search_outbox_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_search_outbox_org_entity": {
          "name": "idx_search_outbox_org_entity",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_search_outbox_org_entity_action": {
          "name": "idx_search_outbox_org_entity_action",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "search_index_outbox_organization_id_organizations_id_fk": {
          "name": "search_index_outbox_organization_id_organizations_id_fk",
          "tableFrom": "search_index_outbox",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "search_outbox_select_policy": {
          "name": "search_outbox_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "search_outbox_insert_policy": {
          "name": "search_outbox_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "search_outbox_update_policy": {
          "name": "search_outbox_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "search_outbox_delete_policy": {
          "name": "search_outbox_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "search_outbox_action_check": {
          "name": "search_outbox_action_check",
          "value": "\"search_index_outbox\".\"action\" IN ('upsert','delete')"
        },
        "search_outbox_entity_type_check": {
          "name": "search_outbox_entity_type_check",
          "value": "\"search_index_outbox\".\"entity_type\" IN ('customer', 'contact', 'order', 'opportunity', 'product', 'inventory', 'supplier', 'warranty', 'issue', 'user', 'email', 'call', 'job', 'job_assignment', 'warranty_claim', 'quote', 'shipment', 'invoice', 'installer', 'purchase_order', 'rma')"
        },
        "search_outbox_status_check": {
          "name": "search_outbox_status_check",
          "value": "\"search_index_outbox\".\"status\" IN ('pending','processing','failed','completed')"
        }
      },
      "isRLSEnabled": false
    },
    "public.custom_reports": {
      "name": "custom_reports",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_shared": {
          "name": "is_shared",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "definition": {
          "name": "definition",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_custom_reports_org": {
          "name": "idx_custom_reports_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_custom_reports_org_shared": {
          "name": "idx_custom_reports_org_shared",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_shared",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "custom_reports_organization_id_organizations_id_fk": {
          "name": "custom_reports_organization_id_organizations_id_fk",
          "tableFrom": "custom_reports",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "custom_reports_select_policy": {
          "name": "custom_reports_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "custom_reports_insert_policy": {
          "name": "custom_reports_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "custom_reports_update_policy": {
          "name": "custom_reports_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "custom_reports_delete_policy": {
          "name": "custom_reports_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.report_favorites": {
      "name": "report_favorites",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "report_type": {
          "name": "report_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "report_id": {
          "name": "report_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_report_favorites_org_user": {
          "name": "idx_report_favorites_org_user",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_report_favorites_org_user_report": {
          "name": "idx_report_favorites_org_user_report",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "report_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "report_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "report_favorites_organization_id_organizations_id_fk": {
          "name": "report_favorites_organization_id_organizations_id_fk",
          "tableFrom": "report_favorites",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "report_favorites_user_id_users_id_fk": {
          "name": "report_favorites_user_id_users_id_fk",
          "tableFrom": "report_favorites",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "report_favorites_select_policy": {
          "name": "report_favorites_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "report_favorites_insert_policy": {
          "name": "report_favorites_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "report_favorites_update_policy": {
          "name": "report_favorites_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "report_favorites_delete_policy": {
          "name": "report_favorites_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.scheduled_reports": {
      "name": "scheduled_reports",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "frequency": {
          "name": "frequency",
          "type": "report_frequency",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "format": {
          "name": "format",
          "type": "report_format",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pdf'"
        },
        "schedule_cron": {
          "name": "schedule_cron",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'Australia/Sydney'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "last_run_at": {
          "name": "last_run_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "next_run_at": {
          "name": "next_run_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_success_at": {
          "name": "last_success_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_error_at": {
          "name": "last_error_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_error": {
          "name": "last_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "consecutive_failures": {
          "name": "consecutive_failures",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "recipients": {
          "name": "recipients",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{\"emails\":[],\"userIds\":[]}'::jsonb"
        },
        "metrics": {
          "name": "metrics",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{\"metrics\":[],\"includeCharts\":true,\"includeTrends\":true,\"comparisonPeriod\":\"previous_period\"}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_scheduled_reports_org": {
          "name": "idx_scheduled_reports_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_scheduled_reports_org_active": {
          "name": "idx_scheduled_reports_org_active",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_scheduled_reports_org_next_run": {
          "name": "idx_scheduled_reports_org_next_run",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "next_run_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_scheduled_reports_org_frequency": {
          "name": "idx_scheduled_reports_org_frequency",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "frequency",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_scheduled_reports_org_created": {
          "name": "idx_scheduled_reports_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "scheduled_reports_organization_id_organizations_id_fk": {
          "name": "scheduled_reports_organization_id_organizations_id_fk",
          "tableFrom": "scheduled_reports",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "scheduled_reports_select_policy": {
          "name": "scheduled_reports_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "scheduled_reports_insert_policy": {
          "name": "scheduled_reports_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "scheduled_reports_update_policy": {
          "name": "scheduled_reports_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "scheduled_reports_delete_policy": {
          "name": "scheduled_reports_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.targets": {
      "name": "targets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "metric": {
          "name": "metric",
          "type": "target_metric",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "period": {
          "name": "period",
          "type": "target_period",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "target_value": {
          "name": "target_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_targets_org_metric": {
          "name": "idx_targets_org_metric",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "metric",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_targets_org_date": {
          "name": "idx_targets_org_date",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "start_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "end_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_targets_org_period": {
          "name": "idx_targets_org_period",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "period",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_targets_unique_metric_period": {
          "name": "idx_targets_unique_metric_period",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "metric",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "period",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "start_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "targets_organization_id_organizations_id_fk": {
          "name": "targets_organization_id_organizations_id_fk",
          "tableFrom": "targets",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "targets_select_policy": {
          "name": "targets_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "targets_insert_policy": {
          "name": "targets_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "targets_update_policy": {
          "name": "targets_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "targets_delete_policy": {
          "name": "targets_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.dashboard_layouts": {
      "name": "dashboard_layouts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "role_default": {
          "name": "role_default",
          "type": "user_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "layout": {
          "name": "layout",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{\"widgets\":[],\"gridColumns\":12,\"theme\":\"system\",\"compactMode\":false}'::jsonb"
        },
        "filters": {
          "name": "filters",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{\"dateRangeStart\":null,\"dateRangeEnd\":null,\"dateRangePreset\":\"30d\",\"comparisonEnabled\":false,\"comparisonType\":null}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_dashboard_layouts_org_user": {
          "name": "idx_dashboard_layouts_org_user",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_dashboard_layouts_org_user_default": {
          "name": "idx_dashboard_layouts_org_user_default",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_default",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_dashboard_layouts_org_role_default": {
          "name": "idx_dashboard_layouts_org_role_default",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "role_default",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "dashboard_layouts_organization_id_organizations_id_fk": {
          "name": "dashboard_layouts_organization_id_organizations_id_fk",
          "tableFrom": "dashboard_layouts",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "dashboard_layouts_user_id_users_id_fk": {
          "name": "dashboard_layouts_user_id_users_id_fk",
          "tableFrom": "dashboard_layouts",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "dashboard_layouts_select_policy": {
          "name": "dashboard_layouts_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "dashboard_layouts_insert_policy": {
          "name": "dashboard_layouts_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "dashboard_layouts_update_policy": {
          "name": "dashboard_layouts_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "dashboard_layouts_delete_policy": {
          "name": "dashboard_layouts_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.customer_portal_sessions": {
      "name": "customer_portal_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "scope": {
          "name": "scope",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'customer'"
        },
        "token_hash": {
          "name": "token_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "contact_id": {
          "name": "contact_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "job_assignment_id": {
          "name": "job_assignment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "used_at": {
          "name": "used_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_ip": {
          "name": "last_ip",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_portal_sessions_token": {
          "name": "idx_portal_sessions_token",
          "columns": [
            {
              "expression": "token_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_portal_sessions_org_scope": {
          "name": "idx_portal_sessions_org_scope",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "scope",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_portal_sessions_org_customer": {
          "name": "idx_portal_sessions_org_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_portal_sessions_org_job": {
          "name": "idx_portal_sessions_org_job",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "job_assignment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "customer_portal_sessions_organization_id_organizations_id_fk": {
          "name": "customer_portal_sessions_organization_id_organizations_id_fk",
          "tableFrom": "customer_portal_sessions",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "customer_portal_sessions_customer_id_customers_id_fk": {
          "name": "customer_portal_sessions_customer_id_customers_id_fk",
          "tableFrom": "customer_portal_sessions",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "customer_portal_sessions_contact_id_contacts_id_fk": {
          "name": "customer_portal_sessions_contact_id_contacts_id_fk",
          "tableFrom": "customer_portal_sessions",
          "tableTo": "contacts",
          "columnsFrom": [
            "contact_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "customer_portal_sessions_job_assignment_id_job_assignments_id_fk": {
          "name": "customer_portal_sessions_job_assignment_id_job_assignments_id_fk",
          "tableFrom": "customer_portal_sessions",
          "tableTo": "job_assignments",
          "columnsFrom": [
            "job_assignment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "portal_sessions_select_policy": {
          "name": "portal_sessions_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "portal_sessions_insert_policy": {
          "name": "portal_sessions_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "portal_sessions_update_policy": {
          "name": "portal_sessions_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "portal_sessions_delete_policy": {
          "name": "portal_sessions_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.portal_identities": {
      "name": "portal_identities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "auth_user_id": {
          "name": "auth_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "scope": {
          "name": "scope",
          "type": "portal_scope",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "portal_identity_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "contact_id": {
          "name": "contact_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "job_assignment_id": {
          "name": "job_assignment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "last_seen_at": {
          "name": "last_seen_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "revoked_at": {
          "name": "revoked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_portal_identities_org_auth_unique": {
          "name": "idx_portal_identities_org_auth_unique",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "auth_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_portal_identities_org_scope_customer": {
          "name": "idx_portal_identities_org_scope_customer",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "scope",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_portal_identities_org_scope_job": {
          "name": "idx_portal_identities_org_scope_job",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "scope",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "job_assignment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "portal_identities_organization_id_organizations_id_fk": {
          "name": "portal_identities_organization_id_organizations_id_fk",
          "tableFrom": "portal_identities",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "portal_identities_auth_user_id_users_id_fk": {
          "name": "portal_identities_auth_user_id_users_id_fk",
          "tableFrom": "portal_identities",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "auth_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "portal_identities_customer_id_customers_id_fk": {
          "name": "portal_identities_customer_id_customers_id_fk",
          "tableFrom": "portal_identities",
          "tableTo": "customers",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "portal_identities_contact_id_contacts_id_fk": {
          "name": "portal_identities_contact_id_contacts_id_fk",
          "tableFrom": "portal_identities",
          "tableTo": "contacts",
          "columnsFrom": [
            "contact_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "portal_identities_job_assignment_id_job_assignments_id_fk": {
          "name": "portal_identities_job_assignment_id_job_assignments_id_fk",
          "tableFrom": "portal_identities",
          "tableTo": "job_assignments",
          "columnsFrom": [
            "job_assignment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "portal_identities_select_policy": {
          "name": "portal_identities_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid) OR auth_user_id = auth.uid()"
        },
        "portal_identities_insert_policy": {
          "name": "portal_identities_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "portal_identities_update_policy": {
          "name": "portal_identities_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "portal_identities_delete_policy": {
          "name": "portal_identities_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "portal_identities_customer_scope_check": {
          "name": "portal_identities_customer_scope_check",
          "value": "\"portal_identities\".\"scope\" != 'customer' OR (\"portal_identities\".\"customer_id\" IS NOT NULL AND \"portal_identities\".\"job_assignment_id\" IS NULL)"
        },
        "portal_identities_subcontractor_scope_check": {
          "name": "portal_identities_subcontractor_scope_check",
          "value": "\"portal_identities\".\"scope\" != 'subcontractor' OR \"portal_identities\".\"job_assignment_id\" IS NOT NULL"
        }
      },
      "isRLSEnabled": false
    },
    "public.ai_conversations": {
      "name": "ai_conversations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "active_agent": {
          "name": "active_agent",
          "type": "ai_agent_name",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "agent_history": {
          "name": "agent_history",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "last_message_at": {
          "name": "last_message_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_ai_conversations_org": {
          "name": "idx_ai_conversations_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_conversations_user": {
          "name": "idx_ai_conversations_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_conversations_last_message": {
          "name": "idx_ai_conversations_last_message",
          "columns": [
            {
              "expression": "last_message_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_conversations_active_agent": {
          "name": "idx_ai_conversations_active_agent",
          "columns": [
            {
              "expression": "active_agent",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ai_conversations_user_id_users_id_fk": {
          "name": "ai_conversations_user_id_users_id_fk",
          "tableFrom": "ai_conversations",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "ai_conversations_organization_id_organizations_id_fk": {
          "name": "ai_conversations_organization_id_organizations_id_fk",
          "tableFrom": "ai_conversations",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "ai_conversations_select_policy": {
          "name": "ai_conversations_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "ai_conversations_insert_policy": {
          "name": "ai_conversations_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "ai_conversations_update_policy": {
          "name": "ai_conversations_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "ai_conversations_delete_policy": {
          "name": "ai_conversations_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ai_conversation_messages": {
      "name": "ai_conversation_messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "conversation_id": {
          "name": "conversation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "ai_message_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "tool_calls": {
          "name": "tool_calls",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "tool_results": {
          "name": "tool_results",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "tokens_used": {
          "name": "tokens_used",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "agent_name": {
          "name": "agent_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_ai_messages_conversation_created": {
          "name": "idx_ai_messages_conversation_created",
          "columns": [
            {
              "expression": "conversation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_messages_conversation_role": {
          "name": "idx_ai_messages_conversation_role",
          "columns": [
            {
              "expression": "conversation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "role",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_messages_agent_name": {
          "name": "idx_ai_messages_agent_name",
          "columns": [
            {
              "expression": "agent_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ai_conversation_messages_conversation_id_ai_conversations_id_fk": {
          "name": "ai_conversation_messages_conversation_id_ai_conversations_id_fk",
          "tableFrom": "ai_conversation_messages",
          "tableTo": "ai_conversations",
          "columnsFrom": [
            "conversation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "ai_conversation_messages_select_policy": {
          "name": "ai_conversation_messages_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "EXISTS (\n        SELECT 1 FROM ai_conversations c\n        WHERE c.id = conversation_id\n        AND c.organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )"
        },
        "ai_conversation_messages_insert_policy": {
          "name": "ai_conversation_messages_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "EXISTS (\n        SELECT 1 FROM ai_conversations c\n        WHERE c.id = conversation_id\n        AND c.organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )"
        },
        "ai_conversation_messages_delete_policy": {
          "name": "ai_conversation_messages_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "EXISTS (\n        SELECT 1 FROM ai_conversations c\n        WHERE c.id = conversation_id\n        AND c.organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ai_approvals": {
      "name": "ai_approvals",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "conversation_id": {
          "name": "conversation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "agent": {
          "name": "agent",
          "type": "ai_agent_name",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "action_data": {
          "name": "action_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "ai_approval_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "approved_by": {
          "name": "approved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "rejection_reason": {
          "name": "rejection_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "executed_at": {
          "name": "executed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "execution_result": {
          "name": "execution_result",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "retry_count": {
          "name": "retry_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "last_error": {
          "name": "last_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_attempt_at": {
          "name": "last_attempt_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_ai_approvals_org": {
          "name": "idx_ai_approvals_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_approvals_user": {
          "name": "idx_ai_approvals_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_approvals_status": {
          "name": "idx_ai_approvals_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_approvals_expires": {
          "name": "idx_ai_approvals_expires",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_approvals_user_status": {
          "name": "idx_ai_approvals_user_status",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_approvals_org_status": {
          "name": "idx_ai_approvals_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_approvals_retry_status": {
          "name": "idx_ai_approvals_retry_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "retry_count",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ai_approvals_conversation_id_ai_conversations_id_fk": {
          "name": "ai_approvals_conversation_id_ai_conversations_id_fk",
          "tableFrom": "ai_approvals",
          "tableTo": "ai_conversations",
          "columnsFrom": [
            "conversation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "ai_approvals_user_id_users_id_fk": {
          "name": "ai_approvals_user_id_users_id_fk",
          "tableFrom": "ai_approvals",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "ai_approvals_organization_id_organizations_id_fk": {
          "name": "ai_approvals_organization_id_organizations_id_fk",
          "tableFrom": "ai_approvals",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "ai_approvals_approved_by_users_id_fk": {
          "name": "ai_approvals_approved_by_users_id_fk",
          "tableFrom": "ai_approvals",
          "tableTo": "users",
          "columnsFrom": [
            "approved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "ai_approvals_select_policy": {
          "name": "ai_approvals_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "ai_approvals_insert_policy": {
          "name": "ai_approvals_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "ai_approvals_update_policy": {
          "name": "ai_approvals_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "ai_approvals_delete_policy": {
          "name": "ai_approvals_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ai_approval_entities": {
      "name": "ai_approval_entities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "approval_id": {
          "name": "approval_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ai_approval_entities_approval_idx": {
          "name": "ai_approval_entities_approval_idx",
          "columns": [
            {
              "expression": "approval_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ai_approval_entities_entity_idx": {
          "name": "ai_approval_entities_entity_idx",
          "columns": [
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ai_approval_entities_approval_id_ai_approvals_id_fk": {
          "name": "ai_approval_entities_approval_id_ai_approvals_id_fk",
          "tableFrom": "ai_approval_entities",
          "tableTo": "ai_approvals",
          "columnsFrom": [
            "approval_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "ai_approval_entities_select_policy": {
          "name": "ai_approval_entities_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "approval_id IN (\n        SELECT id FROM ai_approvals\n        WHERE organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )"
        },
        "ai_approval_entities_insert_policy": {
          "name": "ai_approval_entities_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "approval_id IN (\n        SELECT id FROM ai_approvals\n        WHERE organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )"
        },
        "ai_approval_entities_delete_policy": {
          "name": "ai_approval_entities_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "approval_id IN (\n        SELECT id FROM ai_approvals\n        WHERE organization_id = (SELECT current_setting('app.organization_id', true)::uuid)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ai_agent_tasks": {
      "name": "ai_agent_tasks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "task_type": {
          "name": "task_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "agent": {
          "name": "agent",
          "type": "ai_agent_name",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "input": {
          "name": "input",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "context": {
          "name": "context",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "ai_agent_task_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'queued'"
        },
        "progress": {
          "name": "progress",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "current_step": {
          "name": "current_step",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "result": {
          "name": "result",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "error": {
          "name": "error",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "tokens_used": {
          "name": "tokens_used",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "cost": {
          "name": "cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "queued_at": {
          "name": "queued_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_ai_agent_tasks_org": {
          "name": "idx_ai_agent_tasks_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_agent_tasks_user": {
          "name": "idx_ai_agent_tasks_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_agent_tasks_status": {
          "name": "idx_ai_agent_tasks_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_agent_tasks_type": {
          "name": "idx_ai_agent_tasks_type",
          "columns": [
            {
              "expression": "task_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_agent_tasks_queued": {
          "name": "idx_ai_agent_tasks_queued",
          "columns": [
            {
              "expression": "queued_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_agent_tasks_user_status": {
          "name": "idx_ai_agent_tasks_user_status",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_agent_tasks_org_status": {
          "name": "idx_ai_agent_tasks_org_status",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_agent_tasks_status_queued": {
          "name": "idx_ai_agent_tasks_status_queued",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "queued_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ai_agent_tasks_organization_id_organizations_id_fk": {
          "name": "ai_agent_tasks_organization_id_organizations_id_fk",
          "tableFrom": "ai_agent_tasks",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "ai_agent_tasks_user_id_users_id_fk": {
          "name": "ai_agent_tasks_user_id_users_id_fk",
          "tableFrom": "ai_agent_tasks",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "ai_agent_tasks_select_policy": {
          "name": "ai_agent_tasks_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "ai_agent_tasks_insert_policy": {
          "name": "ai_agent_tasks_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "ai_agent_tasks_update_policy": {
          "name": "ai_agent_tasks_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "ai_agent_tasks_delete_policy": {
          "name": "ai_agent_tasks_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {
        "ai_agent_tasks_progress_check": {
          "name": "ai_agent_tasks_progress_check",
          "value": "progress >= 0 AND progress <= 100"
        }
      },
      "isRLSEnabled": false
    },
    "public.ai_cost_tracking": {
      "name": "ai_cost_tracking",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "conversation_id": {
          "name": "conversation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "task_id": {
          "name": "task_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "feature": {
          "name": "feature",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "input_tokens": {
          "name": "input_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "output_tokens": {
          "name": "output_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "cache_read_tokens": {
          "name": "cache_read_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "cache_write_tokens": {
          "name": "cache_write_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "cost": {
          "name": "cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "date": {
          "name": "date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_ai_cost_org": {
          "name": "idx_ai_cost_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_cost_user": {
          "name": "idx_ai_cost_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_cost_date": {
          "name": "idx_ai_cost_date",
          "columns": [
            {
              "expression": "date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_cost_model": {
          "name": "idx_ai_cost_model",
          "columns": [
            {
              "expression": "model",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_cost_feature": {
          "name": "idx_ai_cost_feature",
          "columns": [
            {
              "expression": "feature",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_cost_org_date": {
          "name": "idx_ai_cost_org_date",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_cost_user_date": {
          "name": "idx_ai_cost_user_date",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_cost_org_model_date": {
          "name": "idx_ai_cost_org_model_date",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "model",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_cost_org_feature_date": {
          "name": "idx_ai_cost_org_feature_date",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "feature",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ai_cost_tracking_organization_id_organizations_id_fk": {
          "name": "ai_cost_tracking_organization_id_organizations_id_fk",
          "tableFrom": "ai_cost_tracking",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "ai_cost_tracking_user_id_users_id_fk": {
          "name": "ai_cost_tracking_user_id_users_id_fk",
          "tableFrom": "ai_cost_tracking",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "ai_cost_tracking_conversation_id_ai_conversations_id_fk": {
          "name": "ai_cost_tracking_conversation_id_ai_conversations_id_fk",
          "tableFrom": "ai_cost_tracking",
          "tableTo": "ai_conversations",
          "columnsFrom": [
            "conversation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "ai_cost_tracking_task_id_ai_agent_tasks_id_fk": {
          "name": "ai_cost_tracking_task_id_ai_agent_tasks_id_fk",
          "tableFrom": "ai_cost_tracking",
          "tableTo": "ai_agent_tasks",
          "columnsFrom": [
            "task_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "ai_cost_tracking_select_policy": {
          "name": "ai_cost_tracking_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "ai_cost_tracking_insert_policy": {
          "name": "ai_cost_tracking_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "ai_cost_tracking_delete_policy": {
          "name": "ai_cost_tracking_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.generated_documents": {
      "name": "generated_documents",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "document_type": {
          "name": "document_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "filename": {
          "name": "filename",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "storage_url": {
          "name": "storage_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_size": {
          "name": "file_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "generated_at": {
          "name": "generated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "generated_by_id": {
          "name": "generated_by_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "regeneration_count": {
          "name": "regeneration_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_generated_documents_unique_per_entity": {
          "name": "idx_generated_documents_unique_per_entity",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "document_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_generated_documents_entity": {
          "name": "idx_generated_documents_entity",
          "columns": [
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_generated_documents_org_doc_type": {
          "name": "idx_generated_documents_org_doc_type",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "document_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_generated_documents_generated_by": {
          "name": "idx_generated_documents_generated_by",
          "columns": [
            {
              "expression": "generated_by_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_generated_documents_org_created": {
          "name": "idx_generated_documents_org_created",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": false,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "generated_documents_organization_id_organizations_id_fk": {
          "name": "generated_documents_organization_id_organizations_id_fk",
          "tableFrom": "generated_documents",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "generated_documents_generated_by_id_users_id_fk": {
          "name": "generated_documents_generated_by_id_users_id_fk",
          "tableFrom": "generated_documents",
          "tableTo": "users",
          "columnsFrom": [
            "generated_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "generated_documents_select_policy": {
          "name": "generated_documents_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "generated_documents_insert_policy": {
          "name": "generated_documents_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "generated_documents_update_policy": {
          "name": "generated_documents_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "generated_documents_delete_policy": {
          "name": "generated_documents_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.document_templates": {
      "name": "document_templates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "document_type": {
          "name": "document_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "logo_url": {
          "name": "logo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "primary_color": {
          "name": "primary_color",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'#1f2937'"
        },
        "secondary_color": {
          "name": "secondary_color",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'#6b7280'"
        },
        "font_family": {
          "name": "font_family",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'inter'"
        },
        "paper_size": {
          "name": "paper_size",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'a4'"
        },
        "include_qr": {
          "name": "include_qr",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "footer_text": {
          "name": "footer_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "terms_text": {
          "name": "terms_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_document_templates_org": {
          "name": "idx_document_templates_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "document_templates_organization_id_organizations_id_fk": {
          "name": "document_templates_organization_id_organizations_id_fk",
          "tableFrom": "document_templates",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "uq_document_templates_org_doc_type": {
          "name": "uq_document_templates_org_doc_type",
          "nullsNotDistinct": false,
          "columns": [
            "organization_id",
            "document_type"
          ]
        }
      },
      "policies": {
        "document_templates_select_policy": {
          "name": "document_templates_select_policy",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "document_templates_insert_policy": {
          "name": "document_templates_insert_policy",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "document_templates_update_policy": {
          "name": "document_templates_update_policy",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)",
          "withCheck": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        },
        "document_templates_delete_policy": {
          "name": "document_templates_delete_policy",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "authenticated"
          ],
          "using": "organization_id = (SELECT current_setting('app.organization_id', true)::uuid)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.activity_action": {
      "name": "activity_action",
      "schema": "public",
      "values": [
        "created",
        "updated",
        "deleted",
        "viewed",
        "exported",
        "shared",
        "assigned",
        "commented",
        "email_sent",
        "email_opened",
        "email_clicked",
        "call_logged",
        "note_added"
      ]
    },
    "public.activity_direction": {
      "name": "activity_direction",
      "schema": "public",
      "values": [
        "inbound",
        "outbound",
        "internal"
      ]
    },
    "public.activity_entity_type": {
      "name": "activity_entity_type",
      "schema": "public",
      "values": [
        "customer",
        "contact",
        "order",
        "opportunity",
        "product",
        "inventory",
        "supplier",
        "warranty",
        "issue",
        "rma",
        "user",
        "email",
        "call",
        "project",
        "workstream",
        "task",
        "purchase_order",
        "shipment",
        "quote",
        "site_visit",
        "job_assignment",
        "job_material",
        "job_photo",
        "warranty_claim",
        "warranty_policy",
        "warranty_extension"
      ]
    },
    "public.activity_source": {
      "name": "activity_source",
      "schema": "public",
      "values": [
        "manual",
        "email",
        "webhook",
        "system",
        "import"
      ]
    },
    "public.address_type": {
      "name": "address_type",
      "schema": "public",
      "values": [
        "billing",
        "shipping",
        "service",
        "headquarters"
      ]
    },
    "public.allocation_method": {
      "name": "allocation_method",
      "schema": "public",
      "values": [
        "equal",
        "by_value",
        "by_weight",
        "by_quantity"
      ]
    },
    "public.amendment_status": {
      "name": "amendment_status",
      "schema": "public",
      "values": [
        "requested",
        "approved",
        "rejected",
        "applied",
        "cancelled"
      ]
    },
    "public.api_token_scope": {
      "name": "api_token_scope",
      "schema": "public",
      "values": [
        "read",
        "write",
        "admin"
      ]
    },
    "public.approval_status": {
      "name": "approval_status",
      "schema": "public",
      "values": [
        "pending",
        "approved",
        "rejected",
        "escalated"
      ]
    },
    "public.attribute_type": {
      "name": "attribute_type",
      "schema": "public",
      "values": [
        "text",
        "number",
        "boolean",
        "select",
        "multiselect",
        "date"
      ]
    },
    "public.bounce_type": {
      "name": "bounce_type",
      "schema": "public",
      "values": [
        "hard",
        "soft"
      ]
    },
    "public.campaign_recipient_status": {
      "name": "campaign_recipient_status",
      "schema": "public",
      "values": [
        "pending",
        "sent",
        "delivered",
        "opened",
        "clicked",
        "bounced",
        "failed",
        "unsubscribed",
        "skipped"
      ]
    },
    "public.campaign_status": {
      "name": "campaign_status",
      "schema": "public",
      "values": [
        "draft",
        "scheduled",
        "sending",
        "sent",
        "paused",
        "cancelled",
        "failed"
      ]
    },
    "public.condition": {
      "name": "condition",
      "schema": "public",
      "values": [
        "new",
        "refurbished",
        "used",
        "damaged"
      ]
    },
    "public.cost_layer_reference_type": {
      "name": "cost_layer_reference_type",
      "schema": "public",
      "values": [
        "purchase_order",
        "adjustment",
        "transfer",
        "rma"
      ]
    },
    "public.cost_type": {
      "name": "cost_type",
      "schema": "public",
      "values": [
        "freight",
        "duty",
        "insurance",
        "handling",
        "customs",
        "other"
      ]
    },
    "public.credit_note_status": {
      "name": "credit_note_status",
      "schema": "public",
      "values": [
        "draft",
        "issued",
        "applied",
        "voided"
      ]
    },
    "public.customer_activity_type": {
      "name": "customer_activity_type",
      "schema": "public",
      "values": [
        "call",
        "email",
        "meeting",
        "note",
        "quote",
        "order",
        "complaint",
        "feedback",
        "website_visit",
        "social_interaction"
      ]
    },
    "public.customer_priority_level": {
      "name": "customer_priority_level",
      "schema": "public",
      "values": [
        "low",
        "medium",
        "high",
        "vip"
      ]
    },
    "public.customer_size": {
      "name": "customer_size",
      "schema": "public",
      "values": [
        "micro",
        "small",
        "medium",
        "large",
        "enterprise"
      ]
    },
    "public.customer_status": {
      "name": "customer_status",
      "schema": "public",
      "values": [
        "prospect",
        "active",
        "inactive",
        "suspended",
        "blacklisted"
      ]
    },
    "public.customer_type": {
      "name": "customer_type",
      "schema": "public",
      "values": [
        "individual",
        "business",
        "government",
        "non_profit"
      ]
    },
    "public.deferred_revenue_status": {
      "name": "deferred_revenue_status",
      "schema": "public",
      "values": [
        "deferred",
        "partially_recognized",
        "fully_recognized"
      ]
    },
    "public.email_status": {
      "name": "email_status",
      "schema": "public",
      "values": [
        "pending",
        "sent",
        "delivered",
        "opened",
        "clicked",
        "bounced",
        "failed"
      ]
    },
    "public.empty_state_type": {
      "name": "empty_state_type",
      "schema": "public",
      "values": [
        "no_data",
        "filtered_empty",
        "search_empty",
        "permission_denied",
        "error"
      ]
    },
    "public.forecast_period": {
      "name": "forecast_period",
      "schema": "public",
      "values": [
        "daily",
        "weekly",
        "monthly",
        "quarterly"
      ]
    },
    "public.installment_status": {
      "name": "installment_status",
      "schema": "public",
      "values": [
        "pending",
        "due",
        "paid",
        "overdue"
      ]
    },
    "public.inventory_alert_type": {
      "name": "inventory_alert_type",
      "schema": "public",
      "values": [
        "low_stock",
        "out_of_stock",
        "overstock",
        "expiry",
        "slow_moving",
        "forecast_deviation"
      ]
    },
    "public.inventory_status": {
      "name": "inventory_status",
      "schema": "public",
      "values": [
        "available",
        "allocated",
        "sold",
        "damaged",
        "returned",
        "quarantined"
      ]
    },
    "public.invoice_status": {
      "name": "invoice_status",
      "schema": "public",
      "values": [
        "draft",
        "scheduled",
        "unpaid",
        "overdue",
        "paid",
        "canceled",
        "refunded"
      ]
    },
    "public.issue_priority": {
      "name": "issue_priority",
      "schema": "public",
      "values": [
        "low",
        "medium",
        "high",
        "critical"
      ]
    },
    "public.issue_status": {
      "name": "issue_status",
      "schema": "public",
      "values": [
        "open",
        "in_progress",
        "pending",
        "on_hold",
        "escalated",
        "resolved",
        "closed"
      ]
    },
    "public.issue_type": {
      "name": "issue_type",
      "schema": "public",
      "values": [
        "hardware_fault",
        "software_firmware",
        "installation_defect",
        "performance_degradation",
        "connectivity",
        "other"
      ]
    },
    "public.job_material_reservation_status": {
      "name": "job_material_reservation_status",
      "schema": "public",
      "values": [
        "pending",
        "fulfilled",
        "released",
        "expired"
      ]
    },
    "public.job_status": {
      "name": "job_status",
      "schema": "public",
      "values": [
        "pending",
        "running",
        "completed",
        "failed"
      ]
    },
    "public.job_time_category": {
      "name": "job_time_category",
      "schema": "public",
      "values": [
        "work",
        "travel",
        "break"
      ]
    },
    "public.job_type": {
      "name": "job_type",
      "schema": "public",
      "values": [
        "import",
        "export",
        "bulk_update",
        "report_generation",
        "data_sync",
        "cleanup",
        "other"
      ]
    },
    "public.movement_type": {
      "name": "movement_type",
      "schema": "public",
      "values": [
        "receive",
        "allocate",
        "deallocate",
        "pick",
        "ship",
        "adjust",
        "return",
        "transfer"
      ]
    },
    "public.notification_status": {
      "name": "notification_status",
      "schema": "public",
      "values": [
        "pending",
        "sent",
        "read",
        "dismissed",
        "failed"
      ]
    },
    "public.notification_type": {
      "name": "notification_type",
      "schema": "public",
      "values": [
        "quote",
        "order",
        "issue",
        "warranty",
        "shipment",
        "payment",
        "customer",
        "product",
        "inventory",
        "user",
        "system",
        "call_reminder",
        "call_overdue"
      ]
    },
    "public.opportunity_activity_type": {
      "name": "opportunity_activity_type",
      "schema": "public",
      "values": [
        "call",
        "email",
        "meeting",
        "note",
        "follow_up"
      ]
    },
    "public.opportunity_stage": {
      "name": "opportunity_stage",
      "schema": "public",
      "values": [
        "new",
        "qualified",
        "proposal",
        "negotiation",
        "won",
        "lost"
      ]
    },
    "public.order_line_item_pick_status": {
      "name": "order_line_item_pick_status",
      "schema": "public",
      "values": [
        "not_picked",
        "picking",
        "picked"
      ]
    },
    "public.order_status": {
      "name": "order_status",
      "schema": "public",
      "values": [
        "draft",
        "confirmed",
        "picking",
        "picked",
        "partially_shipped",
        "shipped",
        "delivered",
        "cancelled"
      ]
    },
    "public.payment_method": {
      "name": "payment_method",
      "schema": "public",
      "values": [
        "bank_transfer",
        "credit_card",
        "cash",
        "cheque",
        "paypal",
        "stripe",
        "xero"
      ]
    },
    "public.payment_plan_type": {
      "name": "payment_plan_type",
      "schema": "public",
      "values": [
        "fifty_fifty",
        "thirds",
        "monthly",
        "custom"
      ]
    },
    "public.payment_status": {
      "name": "payment_status",
      "schema": "public",
      "values": [
        "pending",
        "partial",
        "paid",
        "refunded",
        "overdue"
      ]
    },
    "public.payment_terms": {
      "name": "payment_terms",
      "schema": "public",
      "values": [
        "net_15",
        "net_30",
        "net_45",
        "net_60",
        "cod",
        "prepaid"
      ]
    },
    "public.portal_identity_status": {
      "name": "portal_identity_status",
      "schema": "public",
      "values": [
        "active",
        "revoked",
        "disabled"
      ]
    },
    "public.portal_scope": {
      "name": "portal_scope",
      "schema": "public",
      "values": [
        "customer",
        "subcontractor"
      ]
    },
    "public.price_change_type": {
      "name": "price_change_type",
      "schema": "public",
      "values": [
        "base_price",
        "cost_price",
        "tier_created",
        "tier_updated",
        "tier_deleted",
        "customer_price",
        "bulk_update"
      ]
    },
    "public.product_relation_type": {
      "name": "product_relation_type",
      "schema": "public",
      "values": [
        "accessory",
        "alternative",
        "upgrade",
        "compatible",
        "bundle"
      ]
    },
    "public.product_status": {
      "name": "product_status",
      "schema": "public",
      "values": [
        "active",
        "inactive",
        "discontinued"
      ]
    },
    "public.product_type": {
      "name": "product_type",
      "schema": "public",
      "values": [
        "physical",
        "service",
        "digital",
        "bundle"
      ]
    },
    "public.purchase_order_status": {
      "name": "purchase_order_status",
      "schema": "public",
      "values": [
        "draft",
        "pending_approval",
        "approved",
        "ordered",
        "partial_received",
        "received",
        "cancelled",
        "closed"
      ]
    },
    "public.quality_status": {
      "name": "quality_status",
      "schema": "public",
      "values": [
        "good",
        "damaged",
        "expired",
        "quarantined"
      ]
    },
    "public.receipt_status": {
      "name": "receipt_status",
      "schema": "public",
      "values": [
        "pending_inspection",
        "accepted",
        "partially_accepted",
        "rejected"
      ]
    },
    "public.recognition_state": {
      "name": "recognition_state",
      "schema": "public",
      "values": [
        "pending",
        "recognized",
        "syncing",
        "synced",
        "sync_failed",
        "manual_override"
      ]
    },
    "public.recognition_type": {
      "name": "recognition_type",
      "schema": "public",
      "values": [
        "on_delivery",
        "milestone",
        "time_based"
      ]
    },
    "public.rejection_reason": {
      "name": "rejection_reason",
      "schema": "public",
      "values": [
        "damaged",
        "wrong_item",
        "quality_issue",
        "short_shipment",
        "other"
      ]
    },
    "public.report_format": {
      "name": "report_format",
      "schema": "public",
      "values": [
        "pdf",
        "csv",
        "xlsx",
        "html"
      ]
    },
    "public.report_frequency": {
      "name": "report_frequency",
      "schema": "public",
      "values": [
        "daily",
        "weekly",
        "biweekly",
        "monthly",
        "quarterly"
      ]
    },
    "public.scheduled_call_status": {
      "name": "scheduled_call_status",
      "schema": "public",
      "values": [
        "pending",
        "completed",
        "cancelled",
        "rescheduled"
      ]
    },
    "public.scheduled_email_status": {
      "name": "scheduled_email_status",
      "schema": "public",
      "values": [
        "pending",
        "sent",
        "cancelled"
      ]
    },
    "public.service_level": {
      "name": "service_level",
      "schema": "public",
      "values": [
        "standard",
        "premium",
        "platinum"
      ]
    },
    "public.shipment_status": {
      "name": "shipment_status",
      "schema": "public",
      "values": [
        "pending",
        "in_transit",
        "out_for_delivery",
        "delivered",
        "failed",
        "returned"
      ]
    },
    "public.sla_domain": {
      "name": "sla_domain",
      "schema": "public",
      "values": [
        "support",
        "warranty",
        "jobs"
      ]
    },
    "public.sla_event_type": {
      "name": "sla_event_type",
      "schema": "public",
      "values": [
        "started",
        "paused",
        "resumed",
        "response_due_warning",
        "response_breached",
        "responded",
        "resolution_due_warning",
        "resolution_breached",
        "resolved",
        "escalated",
        "config_changed"
      ]
    },
    "public.sla_target_unit": {
      "name": "sla_target_unit",
      "schema": "public",
      "values": [
        "minutes",
        "hours",
        "business_hours",
        "days",
        "business_days"
      ]
    },
    "public.sla_tracking_status": {
      "name": "sla_tracking_status",
      "schema": "public",
      "values": [
        "active",
        "paused",
        "responded",
        "resolved",
        "breached"
      ]
    },
    "public.stock_count_status": {
      "name": "stock_count_status",
      "schema": "public",
      "values": [
        "draft",
        "in_progress",
        "completed",
        "cancelled"
      ]
    },
    "public.stock_count_type": {
      "name": "stock_count_type",
      "schema": "public",
      "values": [
        "full",
        "cycle",
        "spot",
        "annual"
      ]
    },
    "public.supplier_status": {
      "name": "supplier_status",
      "schema": "public",
      "values": [
        "active",
        "inactive",
        "suspended",
        "blacklisted"
      ]
    },
    "public.supplier_type": {
      "name": "supplier_type",
      "schema": "public",
      "values": [
        "manufacturer",
        "distributor",
        "retailer",
        "service",
        "raw_materials"
      ]
    },
    "public.suppression_reason": {
      "name": "suppression_reason",
      "schema": "public",
      "values": [
        "bounce",
        "complaint",
        "unsubscribe",
        "manual"
      ]
    },
    "public.target_metric": {
      "name": "target_metric",
      "schema": "public",
      "values": [
        "revenue",
        "kwh_deployed",
        "quote_win_rate",
        "active_installations",
        "warranty_claims",
        "pipeline_value",
        "customer_count",
        "orders_count",
        "average_order_value"
      ]
    },
    "public.target_period": {
      "name": "target_period",
      "schema": "public",
      "values": [
        "weekly",
        "monthly",
        "quarterly",
        "yearly"
      ]
    },
    "public.tax_type": {
      "name": "tax_type",
      "schema": "public",
      "values": [
        "gst",
        "gst_free",
        "input_taxed",
        "export"
      ]
    },
    "public.user_role": {
      "name": "user_role",
      "schema": "public",
      "values": [
        "owner",
        "admin",
        "manager",
        "sales",
        "operations",
        "support",
        "viewer"
      ]
    },
    "public.user_status": {
      "name": "user_status",
      "schema": "public",
      "values": [
        "active",
        "invited",
        "suspended",
        "deactivated"
      ]
    },
    "public.user_type": {
      "name": "user_type",
      "schema": "public",
      "values": [
        "staff",
        "installer"
      ]
    },
    "public.win_loss_reason_type": {
      "name": "win_loss_reason_type",
      "schema": "public",
      "values": [
        "win",
        "loss"
      ]
    },
    "public.xero_sync_status": {
      "name": "xero_sync_status",
      "schema": "public",
      "values": [
        "pending",
        "syncing",
        "synced",
        "error"
      ]
    },
    "public.amendment_type": {
      "name": "amendment_type",
      "schema": "public",
      "values": [
        "quantity_change",
        "item_add",
        "item_remove",
        "price_change",
        "discount_change",
        "shipping_change",
        "address_change",
        "date_change",
        "cancel_order",
        "other"
      ]
    },
    "public.quality_inspection_result": {
      "name": "quality_inspection_result",
      "schema": "public",
      "values": [
        "pass",
        "fail",
        "conditional"
      ]
    },
    "public.setting_type": {
      "name": "setting_type",
      "schema": "public",
      "values": [
        "string",
        "number",
        "boolean",
        "json"
      ]
    },
    "public.custom_field_entity_type": {
      "name": "custom_field_entity_type",
      "schema": "public",
      "values": [
        "customer",
        "contact",
        "order",
        "product",
        "supplier",
        "opportunity",
        "issue",
        "job"
      ]
    },
    "public.custom_field_type": {
      "name": "custom_field_type",
      "schema": "public",
      "values": [
        "text",
        "number",
        "date",
        "select",
        "checkbox",
        "textarea",
        "email",
        "url",
        "phone",
        "multiselect"
      ]
    },
    "public.export_format": {
      "name": "export_format",
      "schema": "public",
      "values": [
        "csv",
        "json",
        "xlsx"
      ]
    },
    "public.export_status": {
      "name": "export_status",
      "schema": "public",
      "values": [
        "pending",
        "processing",
        "completed",
        "failed",
        "cancelled",
        "expired"
      ]
    },
    "public.group_role": {
      "name": "group_role",
      "schema": "public",
      "values": [
        "member",
        "lead",
        "manager"
      ]
    },
    "public.invitation_status": {
      "name": "invitation_status",
      "schema": "public",
      "values": [
        "pending",
        "accepted",
        "expired",
        "cancelled"
      ]
    },
    "public.template_category": {
      "name": "template_category",
      "schema": "public",
      "values": [
        "quotes",
        "orders",
        "installations",
        "warranty",
        "support",
        "marketing",
        "follow_up",
        "custom"
      ]
    },
    "public.job_assignment_status": {
      "name": "job_assignment_status",
      "schema": "public",
      "values": [
        "scheduled",
        "in_progress",
        "completed",
        "cancelled",
        "on_hold"
      ]
    },
    "public.job_assignment_type": {
      "name": "job_assignment_type",
      "schema": "public",
      "values": [
        "installation",
        "service",
        "warranty",
        "inspection",
        "commissioning"
      ]
    },
    "public.job_photo_type": {
      "name": "job_photo_type",
      "schema": "public",
      "values": [
        "before",
        "during",
        "after",
        "issue",
        "signature"
      ]
    },
    "public.job_task_status": {
      "name": "job_task_status",
      "schema": "public",
      "values": [
        "pending",
        "in_progress",
        "completed",
        "blocked"
      ]
    },
    "public.project_priority": {
      "name": "project_priority",
      "schema": "public",
      "values": [
        "urgent",
        "high",
        "medium",
        "low"
      ]
    },
    "public.project_status": {
      "name": "project_status",
      "schema": "public",
      "values": [
        "quoting",
        "approved",
        "in_progress",
        "completed",
        "cancelled",
        "on_hold"
      ]
    },
    "public.project_type": {
      "name": "project_type",
      "schema": "public",
      "values": [
        "solar",
        "battery",
        "solar_battery",
        "service",
        "warranty",
        "inspection",
        "commissioning"
      ]
    },
    "public.site_visit_photo_type": {
      "name": "site_visit_photo_type",
      "schema": "public",
      "values": [
        "before",
        "during",
        "after",
        "issue",
        "signature",
        "receipt",
        "document"
      ]
    },
    "public.site_visit_status": {
      "name": "site_visit_status",
      "schema": "public",
      "values": [
        "scheduled",
        "in_progress",
        "completed",
        "cancelled",
        "no_show",
        "rescheduled"
      ]
    },
    "public.site_visit_type": {
      "name": "site_visit_type",
      "schema": "public",
      "values": [
        "assessment",
        "installation",
        "commissioning",
        "service",
        "warranty",
        "inspection",
        "maintenance"
      ]
    },
    "public.project_note_status": {
      "name": "project_note_status",
      "schema": "public",
      "values": [
        "draft",
        "completed",
        "processing"
      ]
    },
    "public.project_note_type": {
      "name": "project_note_type",
      "schema": "public",
      "values": [
        "general",
        "meeting",
        "audio",
        "site_visit",
        "client_feedback"
      ]
    },
    "public.project_file_type": {
      "name": "project_file_type",
      "schema": "public",
      "values": [
        "proposal",
        "contract",
        "specification",
        "drawing",
        "photo",
        "report",
        "warranty",
        "other"
      ]
    },
    "public.certification_type": {
      "name": "certification_type",
      "schema": "public",
      "values": [
        "solar_accredited",
        "electrical_license",
        "battery_certified",
        "roofing_certified",
        "first_aid",
        "working_at_heights"
      ]
    },
    "public.installer_skill": {
      "name": "installer_skill",
      "schema": "public",
      "values": [
        "solar_panels",
        "battery_systems",
        "electrical_work",
        "roof_work",
        "conduit_install",
        "commissioning",
        "diagnostics",
        "customer_training"
      ]
    },
    "public.installer_status": {
      "name": "installer_status",
      "schema": "public",
      "values": [
        "active",
        "busy",
        "away",
        "suspended",
        "inactive"
      ]
    },
    "public.vehicle_type": {
      "name": "vehicle_type",
      "schema": "public",
      "values": [
        "none",
        "ute",
        "van",
        "truck",
        "trailer"
      ]
    },
    "public.bom_item_status": {
      "name": "bom_item_status",
      "schema": "public",
      "values": [
        "planned",
        "ordered",
        "received",
        "allocated",
        "installed"
      ]
    },
    "public.bom_status": {
      "name": "bom_status",
      "schema": "public",
      "values": [
        "draft",
        "approved",
        "ordered",
        "partial",
        "complete",
        "cancelled"
      ]
    },
    "public.rma_reason": {
      "name": "rma_reason",
      "schema": "public",
      "values": [
        "defective",
        "damaged_in_shipping",
        "wrong_item",
        "not_as_described",
        "performance_issue",
        "installation_failure",
        "other"
      ]
    },
    "public.rma_resolution": {
      "name": "rma_resolution",
      "schema": "public",
      "values": [
        "refund",
        "replacement",
        "repair",
        "credit",
        "no_action"
      ]
    },
    "public.rma_status": {
      "name": "rma_status",
      "schema": "public",
      "values": [
        "requested",
        "approved",
        "received",
        "processed",
        "rejected",
        "cancelled"
      ]
    },
    "public.csat_source": {
      "name": "csat_source",
      "schema": "public",
      "values": [
        "email_link",
        "internal_entry",
        "public_form"
      ]
    },
    "public.kb_article_status": {
      "name": "kb_article_status",
      "schema": "public",
      "values": [
        "draft",
        "published",
        "archived"
      ]
    },
    "public.warranty_status": {
      "name": "warranty_status",
      "schema": "public",
      "values": [
        "active",
        "expiring_soon",
        "expired",
        "voided",
        "transferred"
      ]
    },
    "public.warranty_claim_resolution_type": {
      "name": "warranty_claim_resolution_type",
      "schema": "public",
      "values": [
        "repair",
        "replacement",
        "refund",
        "warranty_extension"
      ]
    },
    "public.warranty_claim_status": {
      "name": "warranty_claim_status",
      "schema": "public",
      "values": [
        "submitted",
        "under_review",
        "approved",
        "denied",
        "resolved",
        "cancelled"
      ]
    },
    "public.warranty_claim_type": {
      "name": "warranty_claim_type",
      "schema": "public",
      "values": [
        "cell_degradation",
        "bms_fault",
        "inverter_failure",
        "installation_defect",
        "other"
      ]
    },
    "public.warranty_extension_type": {
      "name": "warranty_extension_type",
      "schema": "public",
      "values": [
        "paid_extension",
        "promotional",
        "loyalty_reward",
        "goodwill"
      ]
    },
    "public.warranty_policy_type": {
      "name": "warranty_policy_type",
      "schema": "public",
      "values": [
        "battery_performance",
        "inverter_manufacturer",
        "installation_workmanship"
      ]
    },
    "public.price_agreement_status": {
      "name": "price_agreement_status",
      "schema": "public",
      "values": [
        "draft",
        "pending",
        "approved",
        "rejected",
        "expired",
        "cancelled"
      ]
    },
    "public.price_change_status": {
      "name": "price_change_status",
      "schema": "public",
      "values": [
        "pending",
        "approved",
        "rejected",
        "applied",
        "cancelled"
      ]
    },
    "public.ai_agent_name": {
      "name": "ai_agent_name",
      "schema": "public",
      "values": [
        "triage",
        "customer",
        "order",
        "analytics",
        "quote",
        "jobs",
        "communications",
        "inventory",
        "warranty",
        "purchasing"
      ]
    },
    "public.ai_agent_task_status": {
      "name": "ai_agent_task_status",
      "schema": "public",
      "values": [
        "queued",
        "running",
        "completed",
        "failed"
      ]
    },
    "public.ai_approval_status": {
      "name": "ai_approval_status",
      "schema": "public",
      "values": [
        "pending",
        "approved",
        "rejected",
        "expired"
      ]
    },
    "public.ai_message_role": {
      "name": "ai_message_role",
      "schema": "public",
      "values": [
        "user",
        "assistant",
        "system",
        "tool"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.mv_current_state": {
      "columns": {
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "as_of_date": {
          "name": "as_of_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "open_orders": {
          "name": "open_orders",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "open_opportunities": {
          "name": "open_opportunities",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "open_jobs": {
          "name": "open_jobs",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "open_issues": {
          "name": "open_issues",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "open_warranty_claims": {
          "name": "open_warranty_claims",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "name": "mv_current_state",
      "schema": "public",
      "isExisting": true,
      "materialized": true
    },
    "public.mv_daily_jobs": {
      "columns": {
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "day": {
          "name": "day",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "total_jobs": {
          "name": "total_jobs",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "completed_jobs": {
          "name": "completed_jobs",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "cancelled_jobs": {
          "name": "cancelled_jobs",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "in_progress_jobs": {
          "name": "in_progress_jobs",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "on_hold_jobs": {
          "name": "on_hold_jobs",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "name": "mv_daily_jobs",
      "schema": "public",
      "isExisting": true,
      "materialized": true
    },
    "public.mv_daily_metrics": {
      "columns": {
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "day": {
          "name": "day",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "orders_count": {
          "name": "orders_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "orders_total": {
          "name": "orders_total",
          "type": "numeric(14, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "tax_total": {
          "name": "tax_total",
          "type": "numeric(14, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "opportunities_count": {
          "name": "opportunities_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "opportunities_value": {
          "name": "opportunities_value",
          "type": "numeric(14, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "opportunities_weighted": {
          "name": "opportunities_weighted",
          "type": "numeric(14, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "issues_count": {
          "name": "issues_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "customers_count": {
          "name": "customers_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "name": "mv_daily_metrics",
      "schema": "public",
      "isExisting": true,
      "materialized": true
    },
    "public.mv_daily_pipeline": {
      "columns": {
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "day": {
          "name": "day",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "stage": {
          "name": "stage",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "opportunities_count": {
          "name": "opportunities_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "total_value": {
          "name": "total_value",
          "type": "numeric(14, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "weighted_value": {
          "name": "weighted_value",
          "type": "numeric(14, 2)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "name": "mv_daily_pipeline",
      "schema": "public",
      "isExisting": true,
      "materialized": true
    },
    "public.mv_daily_warranty": {
      "columns": {
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "day": {
          "name": "day",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "total_claims": {
          "name": "total_claims",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "submitted_claims": {
          "name": "submitted_claims",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "under_review_claims": {
          "name": "under_review_claims",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "approved_claims": {
          "name": "approved_claims",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "denied_claims": {
          "name": "denied_claims",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_claims": {
          "name": "resolved_claims",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "name": "mv_daily_warranty",
      "schema": "public",
      "isExisting": true,
      "materialized": true
    }
  },
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}