# Renoz CRM v3 - Environment Variables
# Copy to .env and fill in values. Do not commit .env.
#
# For Vercel: Add these in Project Settings → Environment Variables.
# For preview deployments, APP_URL can use https://$VERCEL_URL (Vercel injects this).

# =============================================================================
# REQUIRED
# =============================================================================

# Database (Supabase Postgres or compatible)
DATABASE_URL=postgresql://user:password@host:5432/database?sslmode=require

# Supabase (client + server)
VITE_SUPABASE_URL=https://xxx.supabase.co
VITE_SUPABASE_ANON_KEY=eyJ...
SUPABASE_SERVICE_ROLE_KEY=eyJ...

# App URL (for redirects, emails, links)
APP_URL=https://app.example.com
VITE_APP_URL=https://app.example.com

# =============================================================================
# EMAIL (Resend)
# =============================================================================
RESEND_API_KEY=re_...
RESEND_DOMAIN_ID=optional
EMAIL_FROM=noreply@example.com
EMAIL_FROM_NAME=Renoz

# =============================================================================
# REDIS (Upstash - for rate limits, cache, AI memory)
# =============================================================================
# Required for production: login, password reset, and invitation rate limiting.
UPSTASH_REDIS_REST_URL=https://xxx.upstash.io
UPSTASH_REDIS_REST_TOKEN=...

# Never set in production - bypasses rate limit when Redis errors (fail-open).
# AUTH_RATE_LIMIT_FAIL_OPEN=
UPSTASH_REDIS_URL=https://xxx.upstash.io
UPSTASH_REDIS_TOKEN=...

# =============================================================================
# BACKGROUND JOBS (Trigger.dev)
# =============================================================================
# Secret key from dashboard → API Keys (tr_dev_* for dev, tr_prod_* for prod)
# Required for: PDF generation, scheduled jobs, campaigns, etc.
TRIGGER_SECRET_KEY=tr_...
TRIGGER_PROJECT_ID=renoz-crm
# TRIGGER_API_URL=https://api.trigger.dev  # Optional, for self-hosted
# TRIGGER_PREVIEW_BRANCH=my-branch         # For Vercel preview deployments

# =============================================================================
# OPTIONAL
# =============================================================================
# OAuth (Google Workspace)
# GOOGLE_WORKSPACE_CLIENT_ID=
# GOOGLE_WORKSPACE_CLIENT_SECRET=
# GOOGLE_WORKSPACE_REDIRECT_URI=

# OAuth (Microsoft 365)
# MICROSOFT365_CLIENT_ID=
# MICROSOFT365_CLIENT_SECRET=
# MICROSOFT365_TENANT_ID=common
# MICROSOFT365_REDIRECT_URI=

# AI cost limits
# AI_COST_LIMIT_DAILY=100
# AI_COST_LIMIT_USER=10

# Support (client-facing, e.g. login invalid_user)
# VITE_SUPPORT_EMAIL=support@renoz.energy

# Feature flags (NEXT_PUBLIC_* are exposed to client)
# NEXT_PUBLIC_AI_ASSISTANT=true
# NEXT_PUBLIC_ANALYTICS_ENABLED=true

# Serialized lineage cutover controls (server-side)
# SERIAL_CANONICAL_WRITE=true
# SERIAL_READ_CANONICAL_FIRST=true
# SERIAL_LEGACY_FALLBACK_READ=true
# SERIAL_AUTO_UPSERT_ON_MISS=true
# SERIAL_FALLBACK_TELEMETRY=true
